parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"rWP2":[function(require,module,exports) {
var define;
var e;parcelRequire=function(t,r,n,i){var o,a="function"==typeof parcelRequire&&parcelRequire,s="function"==typeof require&&require;function c(e,n){if(!r[e]){if(!t[e]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(e,!0);if(a)return a(e,!0);if(s&&"string"==typeof e)return s(e);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}u.resolve=function(r){return t[e][1][r]||r},u.cache={};var p=r[e]=new c.Module(e);t[e][0].call(p.exports,u,p,p.exports,this)}return r[e].exports;function u(e){return c(u.resolve(e))}}c.isParcelRequire=!0,c.Module=function(e){this.id=e,this.bundle=c,this.exports={}},c.modules=t,c.cache=r,c.parent=a,c.register=function(e,r){t[e]=[function(e,t){t.exports=r},{}]};for(var p=0;p<n.length;p++)try{c(n[p])}catch(t){o||(o=t)}if(n.length){var u=c(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=u:"function"==typeof e&&e.amd&&e(function(){return u})}if(parcelRequire=c,o)throw o;return c}({EgBh:[function(e,t,r){var n={};n.useBlobBuilder=function(){try{return new Blob([]),!1}catch(n){return!0}}(),n.useArrayBufferView=!n.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch(n){return!0}}(),t.exports.binaryFeatures=n;var i=t.exports.BlobBuilder;function o(){this._pieces=[],this._parts=[]}"undefined"!=typeof window&&(i=t.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder),o.prototype.append=function(e){"number"==typeof e?this._pieces.push(e):(this.flush(),this._parts.push(e))},o.prototype.flush=function(){if(this._pieces.length>0){var e=new Uint8Array(this._pieces);n.useArrayBufferView||(e=e.buffer),this._parts.push(e),this._pieces=[]}},o.prototype.getBuffer=function(){if(this.flush(),n.useBlobBuilder){for(var e=new i,t=0,r=this._parts.length;t<r;t++)e.append(this._parts[t]);return e.getBlob()}return new Blob(this._parts)},t.exports.BufferBuilder=o},{}],kdPp:[function(e,t,r){var n=e("./bufferbuilder").BufferBuilder,i=e("./bufferbuilder").binaryFeatures,o={unpack:function(e){return new a(e).unpack()},pack:function(e){var t=new s;return t.pack(e),t.getBuffer()}};function a(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function s(){this.bufferBuilder=new n}function c(e){var t=e.charCodeAt(0);return t<=2047?"00":t<=65535?"000":t<=2097151?"0000":t<=67108863?"00000":"000000"}t.exports=o,a.prototype.unpack=function(){var e,t=this.unpack_uint8();if(t<128)return t;if((224^t)<32)return(224^t)-32;if((e=160^t)<=15)return this.unpack_raw(e);if((e=176^t)<=15)return this.unpack_string(e);if((e=144^t)<=15)return this.unpack_array(e);if((e=128^t)<=15)return this.unpack_map(e);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:case 213:case 214:case 215:return;case 216:return e=this.unpack_uint16(),this.unpack_string(e);case 217:return e=this.unpack_uint32(),this.unpack_string(e);case 218:return e=this.unpack_uint16(),this.unpack_raw(e);case 219:return e=this.unpack_uint32(),this.unpack_raw(e);case 220:return e=this.unpack_uint16(),this.unpack_array(e);case 221:return e=this.unpack_uint32(),this.unpack_array(e);case 222:return e=this.unpack_uint16(),this.unpack_map(e);case 223:return e=this.unpack_uint32(),this.unpack_map(e)}},a.prototype.unpack_uint8=function(){var e=255&this.dataView[this.index];return this.index++,e},a.prototype.unpack_uint16=function(){var e=this.read(2),t=256*(255&e[0])+(255&e[1]);return this.index+=2,t},a.prototype.unpack_uint32=function(){var e=this.read(4),t=256*(256*(256*e[0]+e[1])+e[2])+e[3];return this.index+=4,t},a.prototype.unpack_uint64=function(){var e=this.read(8),t=256*(256*(256*(256*(256*(256*(256*e[0]+e[1])+e[2])+e[3])+e[4])+e[5])+e[6])+e[7];return this.index+=8,t},a.prototype.unpack_int8=function(){var e=this.unpack_uint8();return e<128?e:e-256},a.prototype.unpack_int16=function(){var e=this.unpack_uint16();return e<32768?e:e-65536},a.prototype.unpack_int32=function(){var e=this.unpack_uint32();return e<Math.pow(2,31)?e:e-Math.pow(2,32)},a.prototype.unpack_int64=function(){var e=this.unpack_uint64();return e<Math.pow(2,63)?e:e-Math.pow(2,64)},a.prototype.unpack_raw=function(e){if(this.length<this.index+e)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+e+" "+this.length);var t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t},a.prototype.unpack_string=function(e){for(var t,r,n=this.read(e),i=0,o="";i<e;)(t=n[i])<128?(o+=String.fromCharCode(t),i++):(192^t)<32?(r=(192^t)<<6|63&n[i+1],o+=String.fromCharCode(r),i+=2):(r=(15&t)<<12|(63&n[i+1])<<6|63&n[i+2],o+=String.fromCharCode(r),i+=3);return this.index+=e,o},a.prototype.unpack_array=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=this.unpack();return t},a.prototype.unpack_map=function(e){for(var t={},r=0;r<e;r++){var n=this.unpack(),i=this.unpack();t[n]=i}return t},a.prototype.unpack_float=function(){var e=this.unpack_uint32(),t=(e>>23&255)-127;return(0==e>>31?1:-1)*(8388607&e|8388608)*Math.pow(2,t-23)},a.prototype.unpack_double=function(){var e=this.unpack_uint32(),t=this.unpack_uint32(),r=(e>>20&2047)-1023;return(0==e>>31?1:-1)*((1048575&e|1048576)*Math.pow(2,r-20)+t*Math.pow(2,r-52))},a.prototype.read=function(e){var t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")},s.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},s.prototype.pack=function(e){var t=typeof e;if("string"===t)this.pack_string(e);else if("number"===t)Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if("boolean"===t)!0===e?this.bufferBuilder.append(195):!1===e&&this.bufferBuilder.append(194);else if("undefined"===t)this.bufferBuilder.append(192);else{if("object"!==t)throw new Error('Type "'+t+'" not yet supported');if(null===e)this.bufferBuilder.append(192);else{var r=e.constructor;if(r==Array)this.pack_array(e);else if(r==Blob||r==File||e instanceof Blob||e instanceof File)this.pack_bin(e);else if(r==ArrayBuffer)i.useArrayBufferView?this.pack_bin(new Uint8Array(e)):this.pack_bin(e);else if("BYTES_PER_ELEMENT"in e)i.useArrayBufferView?this.pack_bin(new Uint8Array(e.buffer)):this.pack_bin(e.buffer);else if(r==Object||r.toString().startsWith("class"))this.pack_object(e);else if(r==Date)this.pack_string(e.toString());else{if("function"!=typeof e.toBinaryPack)throw new Error('Type "'+r.toString()+'" not yet supported');this.bufferBuilder.append(e.toBinaryPack())}}}this.bufferBuilder.flush()},s.prototype.pack_bin=function(e){var t=e.length||e.byteLength||e.size;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this.bufferBuilder.append(218),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(t)}this.bufferBuilder.append(e)},s.prototype.pack_string=function(e){var t=function(e){return e.length>600?new Blob([e]).size:e.replace(/[^\u0000-\u007F]/g,c).length}(e);if(t<=15)this.pack_uint8(176+t);else if(t<=65535)this.bufferBuilder.append(216),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(t)}this.bufferBuilder.append(e)},s.prototype.pack_array=function(e){var t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this.bufferBuilder.append(220),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(t)}for(var r=0;r<t;r++)this.pack(e[r])},s.prototype.pack_integer=function(e){if(e>=-32&&e<=127)this.bufferBuilder.append(255&e);else if(e>=0&&e<=255)this.bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this.bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this.bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this.bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this.bufferBuilder.append(210),this.pack_int32(e);else if(e>=-0x8000000000000000&&e<=0x8000000000000000)this.bufferBuilder.append(211),this.pack_int64(e);else{if(!(e>=0&&e<=0x10000000000000000))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(e)}},s.prototype.pack_double=function(e){var t=0;e<0&&(t=1,e=-e);var r=Math.floor(Math.log(e)/Math.LN2),n=e/Math.pow(2,r)-1,i=Math.floor(n*Math.pow(2,52)),o=Math.pow(2,32),a=t<<31|r+1023<<20|i/o&1048575,s=i%o;this.bufferBuilder.append(203),this.pack_int32(a),this.pack_int32(s)},s.prototype.pack_object=function(e){var t=Object.keys(e).length;if(t<=15)this.pack_uint8(128+t);else if(t<=65535)this.bufferBuilder.append(222),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(t)}for(var r in e)e.hasOwnProperty(r)&&(this.pack(r),this.pack(e[r]))},s.prototype.pack_uint8=function(e){this.bufferBuilder.append(e)},s.prototype.pack_uint16=function(e){this.bufferBuilder.append(e>>8),this.bufferBuilder.append(255&e)},s.prototype.pack_uint32=function(e){var t=4294967295&e;this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t)},s.prototype.pack_uint64=function(e){var t=e/Math.pow(2,32),r=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t),this.bufferBuilder.append((4278190080&r)>>>24),this.bufferBuilder.append((16711680&r)>>>16),this.bufferBuilder.append((65280&r)>>>8),this.bufferBuilder.append(255&r)},s.prototype.pack_int8=function(e){this.bufferBuilder.append(255&e)},s.prototype.pack_int16=function(e){this.bufferBuilder.append((65280&e)>>8),this.bufferBuilder.append(255&e)},s.prototype.pack_int32=function(e){this.bufferBuilder.append(e>>>24&255),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e)},s.prototype.pack_int64=function(e){var t=Math.floor(e/Math.pow(2,32)),r=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t),this.bufferBuilder.append((4278190080&r)>>>24),this.bufferBuilder.append((16711680&r)>>>16),this.bufferBuilder.append((65280&r)>>>8),this.bufferBuilder.append(255&r)}},{"./bufferbuilder":"EgBh"}],iSxC:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.extractVersion=a,r.wrapPeerConnectionEvent=function(e,t,r){if(e.RTCPeerConnection){var n=e.RTCPeerConnection.prototype,i=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return i.apply(this,arguments);var o=function(e){var t=r(e);t&&(n.handleEvent?n.handleEvent(t):n(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(n,o),i.apply(this,[e,o])};var o=n.removeEventListener;n.removeEventListener=function(e,r){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(r))return o.apply(this,arguments);var n=this._eventMap[t].get(r);return this._eventMap[t].delete(r),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,n])},Object.defineProperty(n,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}},r.disableLog=function(e){return"boolean"!=typeof e?new Error("Argument type: "+n(e)+". Please use a boolean."):(i=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},r.disableWarnings=function(e){return"boolean"!=typeof e?new Error("Argument type: "+n(e)+". Please use a boolean."):(o=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},r.log=function(){if("object"===("undefined"==typeof window?"undefined":n(window))){if(i)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},r.deprecated=function(e,t){o&&console.warn(e+" is deprecated, please use "+t+" instead.")},r.detectBrowser=function(e){var t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;var{navigator:r}=e;if(r.mozGetUserMedia)t.browser="firefox",t.version=a(r.userAgent,/Firefox\/(\d+)\./,1);else if(r.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=a(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(r.mediaDevices&&r.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=a(r.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!r.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=a(r.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t},r.compactObject=function e(t){return s(t)?Object.keys(t).reduce(function(r,n){var i=s(t[n]),o=i?e(t[n]):t[n],a=i&&!Object.keys(o).length;return void 0===o||a?r:Object.assign(r,function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},n,o))},{}):t},r.walkStats=c,r.filterStats=function(e,t,r){var n=r?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;var o=[];return e.forEach(function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)}),o.forEach(function(t){e.forEach(function(r){r.type===n&&r.trackId===t.id&&c(e,r,i)})}),i};var i=!0,o=!0;function a(e,t,r){var n=e.match(t);return n&&n.length>=r&&parseInt(n[r],10)}function s(e){return"[object Object]"===Object.prototype.toString.call(e)}function c(e,t,r){t&&!r.has(t.id)&&(r.set(t.id,t),Object.keys(t).forEach(function(n){n.endsWith("Id")?c(e,e.get(t[n]),r):n.endsWith("Ids")&&t[n].forEach(function(t){c(e,e.get(t),r)})}))}},{}],s6SN:[function(e,t,r){"use strict";function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetUserMedia=function(e,t){var r=e&&e.navigator;if(r.mediaDevices){var n=function(e){if("object"!==i(e)||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(r){if("require"!==r&&"advanced"!==r&&"mediaSource"!==r){var n="object"===i(e[r])?e[r]:{ideal:e[r]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){t.optional=t.optional||[];var a={};"number"==typeof n.ideal?(a[o("min",r)]=n.ideal,t.optional.push(a),(a={})[o("max",r)]=n.ideal,t.optional.push(a)):(a[o("",r)]=n.ideal,t.optional.push(a))}void 0!==n.exact&&"number"!=typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",r)]=n.exact):["min","max"].forEach(function(e){void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,r)]=n[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},a=function(e,a){if(t.version>=61)return a(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===i(e.audio)){var s=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])};s((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),s(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=n(e.audio)}if(e&&"object"===i(e.video)){var c=e.video.facingMode;c=c&&("object"===i(c)?c:{ideal:c});var p,u=t.version<66;if(c&&("user"===c.exact||"environment"===c.exact||"user"===c.ideal||"environment"===c.ideal)&&(!r.mediaDevices.getSupportedConstraints||!r.mediaDevices.getSupportedConstraints().facingMode||u)&&(delete e.video.facingMode,"environment"===c.exact||"environment"===c.ideal?p=["back","rear"]:"user"!==c.exact&&"user"!==c.ideal||(p=["front"]),p))return r.mediaDevices.enumerateDevices().then(function(t){var r=(t=t.filter(function(e){return"videoinput"===e.kind})).find(function(e){return p.some(function(t){return e.label.toLowerCase().includes(t)})});return!r&&t.length&&p.includes("back")&&(r=t[t.length-1]),r&&(e.video.deviceId=c.exact?{exact:r.deviceId}:{ideal:r.deviceId}),e.video=n(e.video),o("chrome: "+JSON.stringify(e)),a(e)});e.video=n(e.video)}return o("chrome: "+JSON.stringify(e)),a(e)},s=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(r.getUserMedia=function(e,t,n){a(e,function(e){r.webkitGetUserMedia(e,t,function(e){n&&n(s(e))})})}.bind(r),r.mediaDevices.getUserMedia){var c=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(e){return a(e,function(e){return c(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return t},function(e){return Promise.reject(s(e))})})}}}};var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}(e("../utils.js")).log},{"../utils.js":"iSxC"}],VHa8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetDisplayMedia=function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then(function(t){var n=r.video&&r.video.width,i=r.video&&r.video.height,o=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},n&&(r.video.mandatory.maxWidth=n),i&&(r.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(r)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}},{}],uI5X:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimMediaStream=function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},r.shimOnTrack=function(e){if("object"!==c(e)||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype)n.wrapPeerConnectionEvent(e,"track",function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e});else{Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var r=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",function(n){var i;i=e.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find(function(e){return e.track&&e.track.id===n.track.id}):{track:n.track};var o=new Event("track");o.track=n.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],r.dispatchEvent(o)}),t.stream.getTracks().forEach(function(n){var i;i=e.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find(function(e){return e.track&&e.track.id===n.id}):{track:n};var o=new Event("track");o.track=n,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],r.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}},r.shimGetSendersWithDtmf=function(e){if("object"===c(e)&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){var i=r.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach(function(e){r._senders.push(t(r,e))})};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach(function(e){var r=t._senders.find(function(t){return t.track===e});r&&t._senders.splice(t._senders.indexOf(r),1)})}}else if("object"===c(e)&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},r.shimGetStats=function(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,[r,n,i]=arguments;if(arguments.length>0&&"function"==typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof r))return t.apply(this,[]);var o=function(e){var t={};return e.result().forEach(function(e){var r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(function(t){r[t]=e.stat(t)}),t[r.id]=r}),t},a=function(e){return new Map(Object.keys(e).map(function(t){return[t,e[t]]}))};return arguments.length>=2?t.apply(this,[function(e){n(a(o(e)))},r]):new Promise(function(r,n){t.apply(e,[function(e){r(a(o(e)))},n])}).then(n,i)}}},r.shimSenderReceiverGetStats=function(e){if("object"===c(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,r=t.apply(this,[]);return r.forEach(function(t){return t._pc=e}),r});var r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return n.filterStats(t,e.track,!0)})}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var i=e.RTCPeerConnection.prototype.getReceivers;i&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=i.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t}),n.wrapPeerConnectionEvent(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return n.filterStats(t,e.track,!1)})}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t,r,n,i=arguments[0];return this.getSenders().forEach(function(e){e.track===i&&(t?n=!0:t=e)}),this.getReceivers().forEach(function(e){return e.track===i&&(r?n=!0:r=e),e.track===i}),n||t&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}},r.shimAddTrackRemoveTrackWithNative=p,r.shimAddTrackRemoveTrack=function(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return p(e);var r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=r.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map(function(t){return e._reverseStreams[t.id]})};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var r=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(function(e){if(r.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}n.apply(this,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,r){var n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find(function(e){return e===t}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[r.id];if(o)o.addTrack(t),Promise.resolve().then(function(){n.dispatchEvent(new Event("negotiationneeded"))});else{var a=new e.MediaStream([t]);this._streams[r.id]=a,this._reverseStreams[a.id]=r,this.addStream(a)}return this.getSenders().find(function(e){return e.track===t})},["createOffer","createAnswer"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t],n=s({},t,function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?r.apply(this,[function(r){var n=c(e,r);t[0].apply(null,[n])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):r.apply(this,arguments).then(function(t){return c(e,t)})});e.RTCPeerConnection.prototype[t]=n[t]});var o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=(e=this,t=arguments[0],r=t.sdp,Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(n.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:r})),o.apply(this,arguments)):o.apply(this,arguments);var e,t,r};var a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=a.get.apply(this);return""===e.type?e:c(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach(function(n){r._streams[n].getTracks().find(function(t){return e.track===t})&&(t=r._streams[n])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function c(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(i.id,"g"),n.id)}),new RTCSessionDescription({type:t.type,sdp:r})}},r.shimPeerConnection=function(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t],n=s({},t,function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)});e.RTCPeerConnection.prototype[t]=n[t]})},r.fixNegotiationNeeded=function(e,t){n.wrapPeerConnectionEvent(e,"negotiationneeded",function(e){var r=e.target;if(!(t.version<72||r.getConfiguration&&"plan-b"===r.getConfiguration().sdpSemantics)||"stable"===r.signalingState)return e})},Object.defineProperty(r,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia}}),Object.defineProperty(r,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}});var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("../utils.js")),i=e("./getusermedia"),o=e("./getdisplaymedia");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(t){return e._shimmedLocalStreams[t][0]})};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var n=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(n)&&this._shimmedLocalStreams[r.id].push(n):this._shimmedLocalStreams[r.id]=[r,n],n};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(function(e){if(t.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")});var n=this.getSenders();r.apply(this,arguments);var i=this.getSenders().filter(function(e){return-1===n.indexOf(e)});this._shimmedLocalStreams[e.id]=[e].concat(i)};var n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(function(r){var n=t._shimmedLocalStreams[r].indexOf(e);-1!==n&&t._shimmedLocalStreams[r].splice(n,1),1===t._shimmedLocalStreams[r].length&&delete t._shimmedLocalStreams[r]}),i.apply(this,arguments)}}},{"../utils.js":"iSxC","./getusermedia":"s6SN","./getdisplaymedia":"VHa8"}],NZ1C:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.filterIceServers=function(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&n.deprecated("RTCIceServer.url","RTCIceServer.urls");var i="string"==typeof t;return i&&(t=[t]),t=t.filter(function(e){if(0===e.indexOf("stun:"))return!1;var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!r?(r=!0,!0):t&&!r}),delete e.url,e.urls=i?t[0]:t,!!t.length}})};var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}(e("../utils"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}},{"../utils":"iSxC"}],YHvh:[function(e,t,r){"use strict";var n={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};n.localCName=n.generateIdentifier(),n.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},n.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},n.getDescription=function(e){var t=n.splitSections(e);return t&&t[0]},n.getMediaSections=function(e){var t=n.splitSections(e);return t.shift(),t},n.matchPrefix=function(e,t){return n.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},n.parseCandidate=function(e){for(var t,r={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},n=8;n<t.length;n+=2)switch(t[n]){case"raddr":r.relatedAddress=t[n+1];break;case"rport":r.relatedPort=parseInt(t[n+1],10);break;case"tcptype":r.tcpType=t[n+1];break;case"ufrag":r.ufrag=t[n+1],r.usernameFragment=t[n+1];break;default:r[t[n]]=t[n+1]}return r},n.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},n.parseIceOptions=function(e){return e.substr(14).split(" ")},n.parseRtpMap=function(e){var t=e.substr(9).split(" "),r={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),r.name=t[0],r.clockRate=parseInt(t[1],10),r.channels=3===t.length?parseInt(t[2],10):1,r.numChannels=r.channels,r},n.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var r=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==r?"/"+r:"")+"\r\n"},n.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},n.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},n.parseFmtp=function(e){for(var t,r={},n=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<n.length;i++)r[(t=n[i].trim().split("="))[0].trim()]=t[1];return r},n.writeFmtp=function(e){var t="",r=e.payloadType;if(void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var n=[];Object.keys(e.parameters).forEach(function(t){e.parameters[t]?n.push(t+"="+e.parameters[t]):n.push(t)}),t+="a=fmtp:"+r+" "+n.join(";")+"\r\n"}return t},n.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},n.writeRtcpFb=function(e){var t="",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},n.parseSsrcMedia=function(e){var t=e.indexOf(" "),r={ssrc:parseInt(e.substr(7,t-7),10)},n=e.indexOf(":",t);return n>-1?(r.attribute=e.substr(t+1,n-t-1),r.value=e.substr(n+1)):r.attribute=e.substr(t+1),r},n.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(function(e){return parseInt(e,10)})}},n.getMid=function(e){var t=n.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},n.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},n.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:n.matchPrefix(e+t,"a=fingerprint:").map(n.parseFingerprint)}},n.writeDtlsParameters=function(e,t){var r="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),r},n.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},n.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?n.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},n.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},n.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},n.getCryptoParameters=function(e,t){return n.matchPrefix(e+t,"a=crypto:").map(n.parseCryptoLine)},n.getIceParameters=function(e,t){var r=n.matchPrefix(e+t,"a=ice-ufrag:")[0],i=n.matchPrefix(e+t,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substr(12),password:i.substr(10)}:null},n.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},n.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=n.splitLines(e)[0].split(" "),i=3;i<r.length;i++){var o=r[i],a=n.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){var s=n.parseRtpMap(a),c=n.matchPrefix(e,"a=fmtp:"+o+" ");switch(s.parameters=c.length?n.parseFmtp(c[0]):{},s.rtcpFeedback=n.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(n.parseRtcpFb),t.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(s.name.toUpperCase())}}}return n.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(n.parseExtmap(e))}),t},n.writeRtpDescription=function(e,t){var r="";r+="m="+e+" ",r+=t.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){r+=n.writeRtpMap(e),r+=n.writeFmtp(e),r+=n.writeRtcpFb(e)});var i=0;return t.codecs.forEach(function(e){e.maxptime>i&&(i=e.maxptime)}),i>0&&(r+="a=maxptime:"+i+"\r\n"),r+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach(function(e){r+=n.writeExtmap(e)}),r},n.parseRtpEncodingParameters=function(e){var t,r=[],i=n.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),a=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=n.matchPrefix(e,"a=ssrc:").map(function(e){return n.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),c=s.length>0&&s[0].ssrc,p=n.matchPrefix(e,"a=ssrc-group:FID").map(function(e){return e.substr(17).split(" ").map(function(e){return parseInt(e,10)})});p.length>0&&p[0].length>1&&p[0][0]===c&&(t=p[0][1]),i.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var n={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(n.rtx={ssrc:t}),r.push(n),o&&((n=JSON.parse(JSON.stringify(n))).fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},r.push(n))}}),0===r.length&&c&&r.push({ssrc:c});var u=n.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,r.forEach(function(e){e.maxBitrate=u})),r},n.parseRtcpParameters=function(e){var t={},r=n.matchPrefix(e,"a=ssrc:").map(function(e){return n.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];r&&(t.cname=r.value,t.ssrc=r.ssrc);var i=n.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=n.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},n.parseMsid=function(e){var t,r=n.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(t=r[0].substr(7).split(" "))[0],track:t[1]};var i=n.matchPrefix(e,"a=ssrc:").map(function(e){return n.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute});return i.length>0?{stream:(t=i[0].value.split(" "))[0],track:t[1]}:void 0},n.parseSctpDescription=function(e){var t,r=n.parseMLine(e),i=n.matchPrefix(e,"a=max-message-size:");i.length>0&&(t=parseInt(i[0].substr(19),10)),isNaN(t)&&(t=65536);var o=n.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:r.fmt,maxMessageSize:t};if(n.matchPrefix(e,"a=sctpmap:").length>0){var a=n.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:t}}},n.writeSctpDescription=function(e,t){var r=[];return r="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&r.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),r.join("")},n.generateSessionId=function(){return Math.random().toString().substr(2,21)},n.writeSessionBoilerplate=function(e,t,r){var i=void 0!==t?t:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||n.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},n.writeMediaSection=function(e,t,r,i){var o=n.writeRtpDescription(e.kind,t);if(o+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var a="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),o},n.getDirection=function(e,t){for(var r=n.splitLines(e),i=0;i<r.length;i++)switch(r[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[i].substr(2)}return t?n.getDirection(t):"sendrecv"},n.getKind=function(e){return n.splitLines(e)[0].split(" ")[0].substr(2)},n.isRejected=function(e){return"0"===e.split(" ",2)[1]},n.parseMLine=function(e){var t=n.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},n.parseOLine=function(e){var t=n.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},n.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=n.splitLines(e),r=0;r<t.length;r++)if(t[r].length<2||"="!==t[r].charAt(1))return!1;return!0},"object"==typeof t&&(t.exports=n)},{}],NJ2u:[function(e,t,r){"use strict";var n=e("sdp");function i(e,t,r,i,o){var a=n.writeRtpDescription(e.kind,t);if(a+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":o||"active"),a+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?a+="a=sendrecv\r\n":e.rtpSender?a+="a=sendonly\r\n":e.rtpReceiver?a+="a=recvonly\r\n":a+="a=inactive\r\n",e.rtpSender){var s=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=s;var c="msid:"+(i?i.id:"-")+" "+s+"\r\n";a+="a="+c,a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),a}function o(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r]},i=function(e,t,r,i){var o=n(e.parameters.apt,r),a=n(t.parameters.apt,i);return o&&a&&o.name.toLowerCase()===a.name.toLowerCase()};return e.codecs.forEach(function(n){for(var o=0;o<t.codecs.length;o++){var a=t.codecs[o];if(n.name.toLowerCase()===a.name.toLowerCase()&&n.clockRate===a.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&a.parameters.apt&&!i(n,a,e.codecs,t.codecs))continue;(a=JSON.parse(JSON.stringify(a))).numChannels=Math.min(n.numChannels,a.numChannels),r.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter(function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var n=0;n<t.headerExtensions.length;n++){var i=t.headerExtensions[n];if(e.uri===i.uri){r.headerExtensions.push(i);break}}}),r}function a(e,t,r){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)}function s(e,t){var r=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return r||e.addRemoteCandidate(t),!r}function c(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}t.exports=function(e,t){function r(t,r){r.addTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function p(t,r,n,i){var o=new Event("track");o.track=r,o.receiver=n,o.transceiver={receiver:n},o.streams=i,e.setTimeout(function(){t._dispatchEvent("track",o)})}var u=function(r){var i=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){i[e]=o[e].bind(o)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",r=JSON.parse(JSON.stringify(r||{})),this.usingBundle="max-bundle"===r.bundlePolicy,"negotiate"===r.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(r.rtcpMuxPolicy||(r.rtcpMuxPolicy="require"),r.iceTransportPolicy){case"all":case"relay":break;default:r.iceTransportPolicy="all"}switch(r.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:r.bundlePolicy="balanced"}if(r.iceServers=function(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof n;return i&&(n=[n]),n=n.filter(function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||r?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(r=!0,!0)}),delete e.url,e.urls=i?n[0]:n,!!n.length}})}(r.iceServers||[],t),this._iceGatherers=[],r.iceCandidatePoolSize)for(var a=r.iceCandidatePoolSize;a>0;a--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:r.iceServers,gatherPolicy:r.iceTransportPolicy}));else r.iceCandidatePoolSize=0;this._config=r,this.transceivers=[],this._sdpSessionId=n.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(u.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(u.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),u.prototype.onicecandidate=null,u.prototype.onaddstream=null,u.prototype.ontrack=null,u.prototype.onremovestream=null,u.prototype.onsignalingstatechange=null,u.prototype.oniceconnectionstatechange=null,u.prototype.onconnectionstatechange=null,u.prototype.onicegatheringstatechange=null,u.prototype.onnegotiationneeded=null,u.prototype.ondatachannel=null,u.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},u.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},u.prototype.getConfiguration=function(){return this._config},u.prototype.getLocalStreams=function(){return this.localStreams},u.prototype.getRemoteStreams=function(){return this.remoteStreams},u.prototype._createTransceiver=function(e,t){var r=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&r)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();n.iceTransport=i.iceTransport,n.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(n),n},u.prototype.addTrack=function(t,r){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var n;if(this.transceivers.find(function(e){return e.track===t}))throw c("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(n=this.transceivers[i]);return n||(n=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(r)&&this.localStreams.push(r),n.track=t,n.stream=r,n.rtpSender=new e.RTCRtpSender(t,n.dtlsTransport),n.rtpSender},u.prototype.addStream=function(e){var r=this;if(t>=15025)e.getTracks().forEach(function(t){r.addTrack(t,e)});else{var n=e.clone();e.getTracks().forEach(function(e,t){var r=n.getTracks()[t];e.addEventListener("enabled",function(e){r.enabled=e.enabled})}),n.getTracks().forEach(function(e){r.addTrack(e,n)})}},u.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var r=this.transceivers.find(function(e){return e.rtpSender===t});if(!r)throw c("InvalidAccessError","Sender was not created by this connection.");var n=r.stream;r.rtpSender.stop(),r.rtpSender=null,r.track=null,r.stream=null,-1===this.transceivers.map(function(e){return e.stream}).indexOf(n)&&this.localStreams.indexOf(n)>-1&&this.localStreams.splice(this.localStreams.indexOf(n),1),this._maybeFireNegotiationNeeded()},u.prototype.removeStream=function(e){var t=this;e.getTracks().forEach(function(e){var r=t.getSenders().find(function(t){return t.track===e});r&&t.removeTrack(r)})},u.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},u.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},u.prototype._createIceGatherer=function(t,r){var n=this;if(r&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var r=!e.candidate||0===Object.keys(e.candidate).length;i.state=r?"completed":"gathering",null!==n.transceivers[t].bufferedCandidateEvents&&n.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},u.prototype._gather=function(t,r){var i=this,o=this.transceivers[r].iceGatherer;if(!o.onlocalcandidate){var a=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[r].bufferCandidates),o.onlocalcandidate=function(e){if(!(i.usingBundle&&r>0)){var a=new Event("icecandidate");a.candidate={sdpMid:t,sdpMLineIndex:r};var s=e.candidate,c=!s||0===Object.keys(s).length;if(c)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),s.component=1,s.ufrag=o.getLocalParameters().usernameFragment;var p=n.writeCandidate(s);a.candidate=Object.assign(a.candidate,n.parseCandidate(p)),a.candidate.candidate=p,a.candidate.toJSON=function(){return{candidate:a.candidate.candidate,sdpMid:a.candidate.sdpMid,sdpMLineIndex:a.candidate.sdpMLineIndex,usernameFragment:a.candidate.usernameFragment}}}var u=n.getMediaSections(i._localDescription.sdp);u[a.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+a.candidate.candidate+"\r\n",i._localDescription.sdp=n.getDescription(i._localDescription.sdp)+u.join("");var d=i.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});"gathering"!==i.iceGatheringState&&(i.iceGatheringState="gathering",i._emitGatheringStateChange()),c||i._dispatchEvent("icecandidate",a),d&&(i._dispatchEvent("icecandidate",new Event("icecandidate")),i.iceGatheringState="complete",i._emitGatheringStateChange())}},e.setTimeout(function(){a.forEach(function(e){o.onlocalcandidate(e)})},0)}},u.prototype._createIceAndDtlsTransports=function(){var t=this,r=new e.RTCIceTransport(null);r.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var n=new e.RTCDtlsTransport(r);return n.ondtlsstatechange=function(){t._updateConnectionState()},n.onerror=function(){Object.defineProperty(n,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:r,dtlsTransport:n}},u.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var r=this.transceivers[e].iceTransport;r&&(delete r.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport)},u.prototype._transceive=function(e,r,i){var a=o(e.localCapabilities,e.remoteCapabilities);r&&e.rtpSender&&(a.encodings=e.sendEncodingParameters,a.rtcp={cname:n.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(a.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(a)),i&&e.rtpReceiver&&a.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),e.recvEncodingParameters.length?a.encodings=e.recvEncodingParameters:a.encodings=[{}],a.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(a.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(a.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(a))},u.prototype.setLocalDescription=function(e){var t,r,i=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!a("setLocalDescription",e.type,i.signalingState)||i._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+i.signalingState));if("offer"===e.type)t=n.splitSections(e.sdp),r=t.shift(),t.forEach(function(e,t){var r=n.parseRtpParameters(e);i.transceivers[t].localCapabilities=r}),i.transceivers.forEach(function(e,t){i._gather(e.mid,t)});else if("answer"===e.type){t=n.splitSections(i._remoteDescription.sdp),r=t.shift();var s=n.matchPrefix(r,"a=ice-lite").length>0;t.forEach(function(e,t){var a=i.transceivers[t],c=a.iceGatherer,p=a.iceTransport,u=a.dtlsTransport,d=a.localCapabilities,l=a.remoteCapabilities;if(!(n.isRejected(e)&&0===n.matchPrefix(e,"a=bundle-only").length||a.rejected)){var f=n.getIceParameters(e,r),h=n.getDtlsParameters(e,r);s&&(h.role="server"),i.usingBundle&&0!==t||(i._gather(a.mid,t),"new"===p.state&&p.start(c,f,s?"controlling":"controlled"),"new"===u.state&&u.start(h));var v=o(d,l);i._transceive(a,v.codecs.length>0,!1)}})}return i._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?i._updateSignalingState("have-local-offer"):i._updateSignalingState("stable"),Promise.resolve()},u.prototype.setRemoteDescription=function(i){var u=this;if(-1===["offer","answer"].indexOf(i.type))return Promise.reject(c("TypeError",'Unsupported type "'+i.type+'"'));if(!a("setRemoteDescription",i.type,u.signalingState)||u._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+i.type+" in state "+u.signalingState));var d={};u.remoteStreams.forEach(function(e){d[e.id]=e});var l=[],f=n.splitSections(i.sdp),h=f.shift(),v=n.matchPrefix(h,"a=ice-lite").length>0,m=n.matchPrefix(h,"a=group:BUNDLE ").length>0;u.usingBundle=m;var y=n.matchPrefix(h,"a=ice-options:")[0];return u.canTrickleIceCandidates=!!y&&y.substr(14).split(" ").indexOf("trickle")>=0,f.forEach(function(a,c){var p=n.splitLines(a),f=n.getKind(a),y=n.isRejected(a)&&0===n.matchPrefix(a,"a=bundle-only").length,g=p[0].substr(2).split(" ")[2],_=n.getDirection(a,h),b=n.parseMsid(a),C=n.getMid(a)||n.generateIdentifier();if(y||"application"===f&&("DTLS/SCTP"===g||"UDP/DTLS/SCTP"===g))u.transceivers[c]={mid:C,kind:f,protocol:g,rejected:!0};else{var S,T,P,w,k,E,R,O,M;!y&&u.transceivers[c]&&u.transceivers[c].rejected&&(u.transceivers[c]=u._createTransceiver(f,!0));var D,x,j=n.parseRtpParameters(a);y||(D=n.getIceParameters(a,h),(x=n.getDtlsParameters(a,h)).role="client"),R=n.parseRtpEncodingParameters(a);var I=n.parseRtcpParameters(a),L=n.matchPrefix(a,"a=end-of-candidates",h).length>0,A=n.matchPrefix(a,"a=candidate:").map(function(e){return n.parseCandidate(e)}).filter(function(e){return 1===e.component});if(("offer"===i.type||"answer"===i.type)&&!y&&m&&c>0&&u.transceivers[c]&&(u._disposeIceAndDtlsTransports(c),u.transceivers[c].iceGatherer=u.transceivers[0].iceGatherer,u.transceivers[c].iceTransport=u.transceivers[0].iceTransport,u.transceivers[c].dtlsTransport=u.transceivers[0].dtlsTransport,u.transceivers[c].rtpSender&&u.transceivers[c].rtpSender.setTransport(u.transceivers[0].dtlsTransport),u.transceivers[c].rtpReceiver&&u.transceivers[c].rtpReceiver.setTransport(u.transceivers[0].dtlsTransport)),"offer"!==i.type||y)"answer"!==i.type||y||(T=(S=u.transceivers[c]).iceGatherer,P=S.iceTransport,w=S.dtlsTransport,k=S.rtpReceiver,E=S.sendEncodingParameters,O=S.localCapabilities,u.transceivers[c].recvEncodingParameters=R,u.transceivers[c].remoteCapabilities=j,u.transceivers[c].rtcpParameters=I,A.length&&"new"===P.state&&(!v&&!L||m&&0!==c?A.forEach(function(e){s(S.iceTransport,e)}):P.setRemoteCandidates(A)),m&&0!==c||("new"===P.state&&P.start(T,D,"controlling"),"new"===w.state&&w.start(x)),!o(S.localCapabilities,S.remoteCapabilities).codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&S.sendEncodingParameters[0].rtx&&delete S.sendEncodingParameters[0].rtx,u._transceive(S,"sendrecv"===_||"recvonly"===_,"sendrecv"===_||"sendonly"===_),!k||"sendrecv"!==_&&"sendonly"!==_?delete S.rtpReceiver:(M=k.track,b?(d[b.stream]||(d[b.stream]=new e.MediaStream),r(M,d[b.stream]),l.push([M,k,d[b.stream]])):(d.default||(d.default=new e.MediaStream),r(M,d.default),l.push([M,k,d.default]))));else{(S=u.transceivers[c]||u._createTransceiver(f)).mid=C,S.iceGatherer||(S.iceGatherer=u._createIceGatherer(c,m)),A.length&&"new"===S.iceTransport.state&&(!L||m&&0!==c?A.forEach(function(e){s(S.iceTransport,e)}):S.iceTransport.setRemoteCandidates(A)),O=e.RTCRtpReceiver.getCapabilities(f),t<15019&&(O.codecs=O.codecs.filter(function(e){return"rtx"!==e.name})),E=S.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var B,N=!1;"sendrecv"===_||"sendonly"===_?(N=!S.rtpReceiver,k=S.rtpReceiver||new e.RTCRtpReceiver(S.dtlsTransport,f),N&&(M=k.track,b&&"-"===b.stream||(b?(d[b.stream]||(d[b.stream]=new e.MediaStream,Object.defineProperty(d[b.stream],"id",{get:function(){return b.stream}})),Object.defineProperty(M,"id",{get:function(){return b.track}}),B=d[b.stream]):(d.default||(d.default=new e.MediaStream),B=d.default)),B&&(r(M,B),S.associatedRemoteMediaStreams.push(B)),l.push([M,k,B]))):S.rtpReceiver&&S.rtpReceiver.track&&(S.associatedRemoteMediaStreams.forEach(function(t){var r,n,i=t.getTracks().find(function(e){return e.id===S.rtpReceiver.track.id});i&&(r=i,(n=t).removeTrack(r),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:r})))}),S.associatedRemoteMediaStreams=[]),S.localCapabilities=O,S.remoteCapabilities=j,S.rtpReceiver=k,S.rtcpParameters=I,S.sendEncodingParameters=E,S.recvEncodingParameters=R,u._transceive(u.transceivers[c],!1,N)}}}),void 0===u._dtlsRole&&(u._dtlsRole="offer"===i.type?"active":"passive"),u._remoteDescription={type:i.type,sdp:i.sdp},"offer"===i.type?u._updateSignalingState("have-remote-offer"):u._updateSignalingState("stable"),Object.keys(d).forEach(function(t){var r=d[t];if(r.getTracks().length){if(-1===u.remoteStreams.indexOf(r)){u.remoteStreams.push(r);var n=new Event("addstream");n.stream=r,e.setTimeout(function(){u._dispatchEvent("addstream",n)})}l.forEach(function(e){var t=e[0],n=e[1];r.id===e[2].id&&p(u,t,n,[r])})}}),l.forEach(function(e){e[2]||p(u,e[0],e[1],[])}),e.setTimeout(function(){u&&u.transceivers&&u.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},u.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},u.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},u.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout(function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}},0))},u.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++}),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",r)}},u.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)}),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var r=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",r)}},u.prototype.createOffer=function(){var r=this;if(r._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var o=r.transceivers.filter(function(e){return"audio"===e.kind}).length,a=r.transceivers.filter(function(e){return"video"===e.kind}).length,s=arguments[0];if(s){if(s.mandatory||s.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==s.offerToReceiveAudio&&(o=!0===s.offerToReceiveAudio?1:!1===s.offerToReceiveAudio?0:s.offerToReceiveAudio),void 0!==s.offerToReceiveVideo&&(a=!0===s.offerToReceiveVideo?1:!1===s.offerToReceiveVideo?0:s.offerToReceiveVideo)}for(r.transceivers.forEach(function(e){"audio"===e.kind?--o<0&&(e.wantReceive=!1):"video"===e.kind&&--a<0&&(e.wantReceive=!1)});o>0||a>0;)o>0&&(r._createTransceiver("audio"),o--),a>0&&(r._createTransceiver("video"),a--);var p=n.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.transceivers.forEach(function(i,o){var a=i.track,s=i.kind,c=i.mid||n.generateIdentifier();i.mid=c,i.iceGatherer||(i.iceGatherer=r._createIceGatherer(o,r.usingBundle));var p=e.RTCRtpSender.getCapabilities(s);t<15019&&(p.codecs=p.codecs.filter(function(e){return"rtx"!==e.name})),p.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),i.remoteCapabilities&&i.remoteCapabilities.codecs&&i.remoteCapabilities.codecs.forEach(function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)})}),p.headerExtensions.forEach(function(e){(i.remoteCapabilities&&i.remoteCapabilities.headerExtensions||[]).forEach(function(t){e.uri===t.uri&&(e.id=t.id)})});var u=i.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];a&&t>=15019&&"video"===s&&!u[0].rtx&&(u[0].rtx={ssrc:u[0].ssrc+1}),i.wantReceive&&(i.rtpReceiver=new e.RTCRtpReceiver(i.dtlsTransport,s)),i.localCapabilities=p,i.sendEncodingParameters=u}),"max-compat"!==r._config.bundlePolicy&&(p+="a=group:BUNDLE "+r.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),p+="a=ice-options:trickle\r\n",r.transceivers.forEach(function(e,t){p+=i(e,e.localCapabilities,"offer",e.stream,r._dtlsRole),p+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===r.iceGatheringState||0!==t&&r.usingBundle||(e.iceGatherer.getLocalCandidates().forEach(function(e){e.component=1,p+="a="+n.writeCandidate(e)+"\r\n"}),"completed"===e.iceGatherer.state&&(p+="a=end-of-candidates\r\n"))});var u=new e.RTCSessionDescription({type:"offer",sdp:p});return Promise.resolve(u)},u.prototype.createAnswer=function(){var r=this;if(r._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==r.signalingState&&"have-local-pranswer"!==r.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+r.signalingState));var a=n.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.usingBundle&&(a+="a=group:BUNDLE "+r.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),a+="a=ice-options:trickle\r\n";var s=n.getMediaSections(r._remoteDescription.sdp).length;r.transceivers.forEach(function(e,n){if(!(n+1>s)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?a+="m=application 0 DTLS/SCTP 5000\r\n":a+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?a+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(a+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(a+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;e.stream&&("audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var p=o(e.localCapabilities,e.remoteCapabilities);!p.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,a+=i(e,p,"answer",e.stream,r._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(a+="a=rtcp-rsize\r\n")}});var p=new e.RTCSessionDescription({type:"answer",sdp:a});return Promise.resolve(p)},u.prototype.addIceCandidate=function(e){var t,r=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(i,o){if(!r._remoteDescription)return o(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var a=e.sdpMLineIndex;if(e.sdpMid)for(var p=0;p<r.transceivers.length;p++)if(r.transceivers[p].mid===e.sdpMid){a=p;break}var u=r.transceivers[a];if(!u)return o(c("OperationError","Can not add ICE candidate"));if(u.rejected)return i();var d=Object.keys(e.candidate).length>0?n.parseCandidate(e.candidate):{};if("tcp"===d.protocol&&(0===d.port||9===d.port))return i();if(d.component&&1!==d.component)return i();if((0===a||a>0&&u.iceTransport!==r.transceivers[0].iceTransport)&&!s(u.iceTransport,d))return o(c("OperationError","Can not add ICE candidate"));var l=e.candidate.trim();0===l.indexOf("a=")&&(l=l.substr(2)),(t=n.getMediaSections(r._remoteDescription.sdp))[a]+="a="+(d.type?l:"end-of-candidates")+"\r\n",r._remoteDescription.sdp=n.getDescription(r._remoteDescription.sdp)+t.join("")}else for(var f=0;f<r.transceivers.length&&(r.transceivers[f].rejected||(r.transceivers[f].iceTransport.addRemoteCandidate({}),(t=n.getMediaSections(r._remoteDescription.sdp))[f]+="a=end-of-candidates\r\n",r._remoteDescription.sdp=n.getDescription(r._remoteDescription.sdp)+t.join(""),!r.usingBundle));f++);i()})},u.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var r=null;if(this.transceivers.forEach(function(e){e.rtpSender&&e.rtpSender.track===t?r=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(r=e.rtpReceiver)}),!r)throw c("InvalidAccessError","Invalid selector.");return r.getStats()}var n=[];return this.transceivers.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(t){e[t]&&n.push(e[t].getStats())})}),Promise.all(n).then(function(e){var t=new Map;return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})}),t})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(t){var r=e[t];if(r&&r.prototype&&r.prototype.getStats){var n=r.prototype.getStats;r.prototype.getStats=function(){return n.apply(this).then(function(e){var t=new Map;return Object.keys(e).forEach(function(r){e[r].type=function(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}(e[r]),t.set(r,e[r])}),t})}}});var d=["createOffer","createAnswer"];return d.forEach(function(e){var t=u.prototype[e];u.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then(function(t){"function"==typeof e[0]&&e[0].apply(null,[t])},function(t){"function"==typeof e[1]&&e[1].apply(null,[t])}):t.apply(this,arguments)}}),(d=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(e){var t=u.prototype[e];u.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)},function(t){"function"==typeof e[2]&&e[2].apply(null,[t])}):t.apply(this,arguments)}}),["getStats"].forEach(function(e){var t=u.prototype[e];u.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),u}},{sdp:"YHvh"}],YdKx:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetUserMedia=function(e){var t=e&&e.navigator,r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return r(e).catch(function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))})}}},{}],P3bV:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetDisplayMedia=function(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}},{}],XRic:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimPeerConnection=function(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var r=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){r.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}!e.RTCRtpSender||"dtmf"in e.RTCRtpSender.prototype||Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var a=(0,o.default)(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=(0,i.filterIceServers)(e.iceServers,t.version),n.log("ICE servers after filtering:",e.iceServers)),new a(e)},e.RTCPeerConnection.prototype=a.prototype},r.shimReplaceTrack=function(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)},Object.defineProperty(r,"shimGetUserMedia",{enumerable:!0,get:function(){return a.shimGetUserMedia}}),Object.defineProperty(r,"shimGetDisplayMedia",{enumerable:!0,get:function(){return s.shimGetDisplayMedia}});var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("../utils")),i=e("./filtericeservers"),o=function(e){return e&&e.__esModule?e:{default:e}}(e("rtcpeerconnection-shim")),a=e("./getusermedia"),s=e("./getdisplaymedia");function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}},{"../utils":"iSxC","./filtericeservers":"NZ1C","rtcpeerconnection-shim":"NJ2u","./getusermedia":"YdKx","./getdisplaymedia":"P3bV"}],GzSv:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetUserMedia=function(e,t){var r=e&&e.navigator,i=e&&e.MediaStreamTrack;if(r.getUserMedia=function(e,t,i){n.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(e).then(t,i)},!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){var a=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])},s=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(e){return"object"===o(e)&&"object"===o(e.audio)&&(e=JSON.parse(JSON.stringify(e)),a(e.audio,"autoGainControl","mozAutoGainControl"),a(e.audio,"noiseSuppression","mozNoiseSuppression")),s(e)},i&&i.prototype.getSettings){var c=i.prototype.getSettings;i.prototype.getSettings=function(){var e=c.apply(this,arguments);return a(e,"mozAutoGainControl","autoGainControl"),a(e,"mozNoiseSuppression","noiseSuppression"),e}}if(i&&i.prototype.applyConstraints){var p=i.prototype.applyConstraints;i.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===o(e)&&(e=JSON.parse(JSON.stringify(e)),a(e,"autoGainControl","mozAutoGainControl"),a(e,"noiseSuppression","mozNoiseSuppression")),p.apply(this,[e])}}}};var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}(e("../utils"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}},{"../utils":"iSxC"}],UuGU:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimGetDisplayMedia=function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){var n=new DOMException("getDisplayMedia without video constraints is undefined");return n.name="NotFoundError",n.code=8,Promise.reject(n)}return!0===r.video?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}},{}],Fzdr:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimOnTrack=function(e){"object"===s(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},r.shimPeerConnection=function(e,t){if("object"===s(e)&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t],n=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},t,function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)});e.RTCPeerConnection.prototype[t]=n[t]});var r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var[e,i,o]=arguments;return n.apply(this,[e||null]).then(function(e){if(t.version<53&&!i)try{e.forEach(function(e){e.type=r[e.type]||e.type})}catch(n){if("TypeError"!==n.name)throw n;e.forEach(function(t,n){e.set(n,Object.assign({},t,{type:r[t.type]||t.type}))})}return e}).then(i,o)}}},r.shimSenderGetStats=function(e){if("object"===s(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,r=t.apply(this,[]);return r.forEach(function(t){return t._pc=e}),r});var r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}},r.shimReceiverGetStats=function(e){if("object"===s(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,r=t.apply(this,[]);return r.forEach(function(t){return t._pc=e}),r}),n.wrapPeerConnectionEvent(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},r.shimRemoveStream=function(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;n.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(r){r.track&&e.getTracks().includes(r.track)&&t.removeTrack(r)})})},r.shimRTCDataChannel=function(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)},r.shimAddTransceiver=function(e){if("object"===s(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],r=e&&"sendEncodings"in e;r&&e.sendEncodings.forEach(function(e){if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});var n=t.apply(this,arguments);if(r){var{sender:i}=n,o=i.getParameters();"encodings"in o&&(1!==o.encodings.length||0!==Object.keys(o.encodings[0]).length)||(o.encodings=e.sendEncodings,i.sendEncodings=e.sendEncodings,this.setParametersPromises.push(i.setParameters(o).then(function(){delete i.sendEncodings}).catch(function(){delete i.sendEncodings})))}return n})}},r.shimGetParameters=function(e){if("object"===s(e)&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}},r.shimCreateOffer=function(e){if("object"===s(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,r=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return t.apply(r,e)}).finally(function(){r.setParametersPromises=[]}):t.apply(this,arguments)}}},r.shimCreateAnswer=function(e){if("object"===s(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,r=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return t.apply(r,e)}).finally(function(){r.setParametersPromises=[]}):t.apply(this,arguments)}}},Object.defineProperty(r,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia}}),Object.defineProperty(r,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}});var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("../utils")),i=e("./getusermedia"),o=e("./getdisplaymedia");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}},{"../utils":"iSxC","./getusermedia":"GzSv","./getdisplaymedia":"UuGU"}],t1lL:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimLocalStreamsAPI=function(e){if("object"===o(e)&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(function(n){return t.call(r,n,e)}),e.getVideoTracks().forEach(function(n){return t.call(r,n,e)})},e.RTCPeerConnection.prototype.addTrack=function(e){for(var r=this,n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return i&&i.forEach(function(e){r._localStreams?r._localStreams.includes(e)||r._localStreams.push(e):r._localStreams=[e]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var r=this._localStreams.indexOf(e);if(-1!==r){this._localStreams.splice(r,1);var n=e.getTracks();this.getSenders().forEach(function(e){n.includes(e.track)&&t.removeTrack(e)})}})}},r.shimRemoteStreamsAPI=function(e){if("object"===o(e)&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var r=new Event("addstream");r.stream=e,t.dispatchEvent(r)}})})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var r=new Event("addstream");r.stream=t,e.dispatchEvent(r)}})}),t.apply(e,arguments)}}},r.shimCallbacksAPI=function(e){if("object"===o(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,i=t.setLocalDescription,a=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i};var c=function(e,t,r){var n=i.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n};t.setLocalDescription=c,c=function(e,t,r){var n=a.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.setRemoteDescription=c,c=function(e,t,r){var n=s.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.addIceCandidate=c}},r.shimGetUserMedia=function(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var r=t.mediaDevices,n=r.getUserMedia.bind(r);t.mediaDevices.getUserMedia=function(e){return n(a(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,n){t.mediaDevices.getUserMedia(e).then(r,n)}.bind(t))},r.shimConstraints=a,r.shimRTCIceServerUrls=function(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,r){if(e&&e.iceServers){for(var i=[],o=0;o<e.iceServers.length;o++){var a=e.iceServers[o];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(n.deprecated("RTCIceServer.url","RTCIceServer.urls"),(a=JSON.parse(JSON.stringify(a))).urls=a.url,delete a.url,i.push(a)):i.push(e.iceServers[o])}e.iceServers=i}return new t(e,r)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}},r.shimTrackEventTransceiver=function(e){"object"===o(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},r.shimCreateOfferLegacy=function(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var r=this.getTransceivers().find(function(e){return"audio"===e.receiver.track.kind});!1===e.offerToReceiveAudio&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveAudio||r||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var n=this.getTransceivers().find(function(e){return"video"===e.receiver.track.kind});!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video")}return t.apply(this,arguments)}},r.shimAudioContext=function(e){"object"!==o(e)||e.AudioContext||(e.AudioContext=e.webkitAudioContext)};var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}(e("../utils"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return e&&void 0!==e.video?Object.assign({},e,{video:n.compactObject(e.video)}):e}},{"../utils":"iSxC"}],GOQK:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shimRTCIceCandidate=function(e){if(e.RTCIceCandidate&&!(e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===a(e)&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var r=new t(e),i=n.default.parseCandidate(e.candidate),o=Object.assign(r,i);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,i.wrapPeerConnectionEvent(e,"icecandidate",function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t})}},r.shimMaxMessageSize=function(e,t){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){var{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(e){if(!e||!e.sdp)return!1;var t=n.default.splitSections(e.sdp);return t.shift(),t.some(function(e){var t=n.default.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})}(arguments[0])){var i,o=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var r=parseInt(t[1],10);return r!=r?-1:r}(arguments[0]),a=(p=o,u=65536,"firefox"===t.browser&&(u=t.version<57?-1===p?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),u),s=function(e,r){var i=65536;"firefox"===t.browser&&57===t.version&&(i=65535);var o=n.default.matchPrefix(e.sdp,"a=max-message-size:");return o.length>0?i=parseInt(o[0].substr(19),10):"firefox"===t.browser&&-1!==r&&(i=2147483637),i}(arguments[0],o);i=0===a&&0===s?Number.POSITIVE_INFINITY:0===a||0===s?Math.max(a,s):Math.min(a,s);var c={};Object.defineProperty(c,"maxMessageSize",{get:function(){return i}}),this._sctp=c}var p,u;return r.apply(this,arguments)}}},r.shimSendThrowTypeError=function(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return r(e,this),e},i.wrapPeerConnectionEvent(e,"datachannel",function(e){return r(e.channel,e.target),e})}function r(e,t){var r=e.send;e.send=function(){var n=arguments[0],i=n.length||n.size||n.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return r.apply(e,arguments)}}},r.shimConnectionState=function(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(e){var r=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var r=new Event("connectionstatechange",e);t.dispatchEvent(r)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}},r.removeExtmapAllowMixed=function(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71||"safari"===t.browser&&t.version>=605)){var r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var n=t.sdp.split("\n").filter(function(e){return"a=extmap-allow-mixed"!==e.trim()}).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return r.apply(this,arguments)}}},r.shimAddIceCandidateNullOrEmpty=function(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var r=e.RTCPeerConnection.prototype.addIceCandidate;r&&0!==r.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}};var n=function(e){return e&&e.__esModule?e:{default:e}}(e("sdp")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("./utils"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}},{sdp:"YHvh","./utils":"iSxC"}],KtlG:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.adapterFactory=function(){var{window:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},r=n.log,p=n.detectBrowser(e),u={browserDetails:p,commonShim:c,extractVersion:n.extractVersion,disableLog:n.disableLog,disableWarnings:n.disableWarnings};switch(p.browser){case"chrome":if(!i||!i.shimPeerConnection||!t.shimChrome)return r("Chrome shim is not included in this adapter release."),u;if(null===p.version)return r("Chrome shim can not determine version, not shimming."),u;r("adapter.js shimming chrome."),u.browserShim=i,c.shimAddIceCandidateNullOrEmpty(e,p),i.shimGetUserMedia(e,p),i.shimMediaStream(e,p),i.shimPeerConnection(e,p),i.shimOnTrack(e,p),i.shimAddTrackRemoveTrack(e,p),i.shimGetSendersWithDtmf(e,p),i.shimGetStats(e,p),i.shimSenderReceiverGetStats(e,p),i.fixNegotiationNeeded(e,p),c.shimRTCIceCandidate(e,p),c.shimConnectionState(e,p),c.shimMaxMessageSize(e,p),c.shimSendThrowTypeError(e,p),c.removeExtmapAllowMixed(e,p);break;case"firefox":if(!a||!a.shimPeerConnection||!t.shimFirefox)return r("Firefox shim is not included in this adapter release."),u;r("adapter.js shimming firefox."),u.browserShim=a,c.shimAddIceCandidateNullOrEmpty(e,p),a.shimGetUserMedia(e,p),a.shimPeerConnection(e,p),a.shimOnTrack(e,p),a.shimRemoveStream(e,p),a.shimSenderGetStats(e,p),a.shimReceiverGetStats(e,p),a.shimRTCDataChannel(e,p),a.shimAddTransceiver(e,p),a.shimGetParameters(e,p),a.shimCreateOffer(e,p),a.shimCreateAnswer(e,p),c.shimRTCIceCandidate(e,p),c.shimConnectionState(e,p),c.shimMaxMessageSize(e,p),c.shimSendThrowTypeError(e,p);break;case"edge":if(!o||!o.shimPeerConnection||!t.shimEdge)return r("MS edge shim is not included in this adapter release."),u;r("adapter.js shimming edge."),u.browserShim=o,o.shimGetUserMedia(e,p),o.shimGetDisplayMedia(e,p),o.shimPeerConnection(e,p),o.shimReplaceTrack(e,p),c.shimMaxMessageSize(e,p),c.shimSendThrowTypeError(e,p);break;case"safari":if(!s||!t.shimSafari)return r("Safari shim is not included in this adapter release."),u;r("adapter.js shimming safari."),u.browserShim=s,c.shimAddIceCandidateNullOrEmpty(e,p),s.shimRTCIceServerUrls(e,p),s.shimCreateOfferLegacy(e,p),s.shimCallbacksAPI(e,p),s.shimLocalStreamsAPI(e,p),s.shimRemoteStreamsAPI(e,p),s.shimTrackEventTransceiver(e,p),s.shimGetUserMedia(e,p),s.shimAudioContext(e,p),c.shimRTCIceCandidate(e,p),c.shimMaxMessageSize(e,p),c.shimSendThrowTypeError(e,p),c.removeExtmapAllowMixed(e,p);break;default:r("Unsupported browser!")}return u};var n=u(e("./utils")),i=u(e("./chrome/chrome_shim")),o=u(e("./edge/edge_shim")),a=u(e("./firefox/firefox_shim")),s=u(e("./safari/safari_shim")),c=u(e("./common_shim"));function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}},{"./utils":"iSxC","./chrome/chrome_shim":"uI5X","./edge/edge_shim":"XRic","./firefox/firefox_shim":"Fzdr","./safari/safari_shim":"t1lL","./common_shim":"GOQK"}],tI1X:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=(0,e("./adapter_factory.js").adapterFactory)({window:"undefined"==typeof window?void 0:window});r.default=n},{"./adapter_factory.js":"KtlG"}],sXtV:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.webRTCAdapter=void 0;var i=n(e("webrtc-adapter"));r.webRTCAdapter=i.default},{"webrtc-adapter":"tI1X"}],I31f:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Supports=void 0;var n=e("./adapter");r.Supports=new(function(){function e(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return e.prototype.isWebRTCSupported=function(){return"undefined"!=typeof RTCPeerConnection},e.prototype.isBrowserSupported=function(){var e=this.getBrowser(),t=this.getVersion();return!!this.supportedBrowsers.includes(e)&&("chrome"===e?t>=this.minChromeVersion:"firefox"===e?t>=this.minFirefoxVersion:"safari"===e&&!this.isIOS&&t>=this.minSafariVersion)},e.prototype.getBrowser=function(){return n.webRTCAdapter.browserDetails.browser},e.prototype.getVersion=function(){return n.webRTCAdapter.browserDetails.version||0},e.prototype.isUnifiedPlanSupported=function(){var e,t=this.getBrowser(),r=n.webRTCAdapter.browserDetails.version||0;if("chrome"===t&&r<72)return!1;if("firefox"===t&&r>=59)return!0;if(!(window.RTCRtpTransceiver&&"currentDirection"in RTCRtpTransceiver.prototype))return!1;var i=!1;try{(e=new RTCPeerConnection).addTransceiver("audio"),i=!0}catch(o){}finally{e&&e.close()}return i},e.prototype.toString=function(){return"Supports: \n    browser:"+this.getBrowser()+" \n    version:"+this.getVersion()+" \n    isIOS:"+this.isIOS+" \n    isWebRTCSupported:"+this.isWebRTCSupported()+" \n    isBrowserSupported:"+this.isBrowserSupported()+" \n    isUnifiedPlanSupported:"+this.isUnifiedPlanSupported()},e}())},{"./adapter":"sXtV"}],BHXf:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.util=void 0;var a=o(e("peerjs-js-binarypack")),s=e("./supports"),c={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:0.peerjs.com:3478",username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};r.util=new(function(){function e(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=c,this.browser=s.Supports.getBrowser(),this.browserVersion=s.Supports.getVersion(),this.supports=function(){var e,t={browser:s.Supports.isBrowserSupported(),webRTC:s.Supports.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;try{e=new RTCPeerConnection(c),t.audioVideo=!0;var r=void 0;try{r=e.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!r.ordered;try{r.binaryType="blob",t.binaryBlob=!s.Supports.isIOS}catch(a){}}catch(a){}finally{r&&r.close()}}catch(a){}finally{e&&e.close()}return t}(),this.pack=a.pack,this.unpack=a.unpack,this._dataCount=1}return e.prototype.noop=function(){},e.prototype.validateId=function(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e)},e.prototype.chunk=function(e){for(var t=[],n=e.size,i=Math.ceil(n/r.util.chunkedMTU),o=0,a=0;a<n;){var s=Math.min(n,a+r.util.chunkedMTU),c=e.slice(a,s),p={__peerData:this._dataCount,n:o,data:c,total:i};t.push(p),a=s,o++}return this._dataCount++,t},e.prototype.blobToArrayBuffer=function(e,t){var r=new FileReader;return r.onload=function(e){e.target&&t(e.target.result)},r.readAsArrayBuffer(e),r},e.prototype.binaryStringToArrayBuffer=function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=255&e.charCodeAt(r);return t.buffer},e.prototype.randomToken=function(){return Math.random().toString(36).substr(2)},e.prototype.isSecure=function(){return"https:"===location.protocol},e}())},{"peerjs-js-binarypack":"kdPp","./supports":"I31f"}],JJlS:[function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,i="~";function o(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,r,n,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new a(r,n||e,o),c=i?i+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function c(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function p(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),p.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},p.prototype.listeners=function(e){var t=i?i+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,a=new Array(o);n<o;n++)a[n]=r[n].fn;return a},p.prototype.listenerCount=function(e){var t=i?i+e:e,r=this._events[t];return r?r.fn?1:r.length:0},p.prototype.emit=function(e,t,r,n,o,a){var s=i?i+e:e;if(!this._events[s])return!1;var c,p,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,n),!0;case 5:return u.fn.call(u.context,t,r,n,o),!0;case 6:return u.fn.call(u.context,t,r,n,o,a),!0}for(p=1,c=new Array(d-1);p<d;p++)c[p-1]=arguments[p];u.fn.apply(u.context,c)}else{var l,f=u.length;for(p=0;p<f;p++)switch(u[p].once&&this.removeListener(e,u[p].fn,void 0,!0),d){case 1:u[p].fn.call(u[p].context);break;case 2:u[p].fn.call(u[p].context,t);break;case 3:u[p].fn.call(u[p].context,t,r);break;case 4:u[p].fn.call(u[p].context,t,r,n);break;default:if(!c)for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u[p].fn.apply(u[p].context,c)}}return!0},p.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},p.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},p.prototype.removeListener=function(e,t,r,n){var o=i?i+e:e;if(!this._events[o])return this;if(!t)return c(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||n&&!a.once||r&&a.context!==r||c(this,o);else{for(var s=0,p=[],u=a.length;s<u;s++)(a[s].fn!==t||n&&!a[s].once||r&&a[s].context!==r)&&p.push(a[s]);p.length?this._events[o]=1===p.length?p[0]:p:c(this,o)}return this},p.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&c(this,t)):(this._events=new o,this._eventsCount=0),this},p.prototype.off=p.prototype.removeListener,p.prototype.addListener=p.prototype.on,p.prefixed=i,p.EventEmitter=p,void 0!==t&&(t.exports=p)},{}],WOs9:[function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(s){i={error:s}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(r,"__esModule",{value:!0}),r.LogLevel=void 0;var o;!function(e){e[e.Disabled=0]="Disabled",e[e.Errors=1]="Errors",e[e.Warnings=2]="Warnings",e[e.All=3]="All"}(o=r.LogLevel||(r.LogLevel={}));var a=function(){function e(){this._logLevel=o.Disabled}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel>=o.All&&this._print.apply(this,i([o.All],n(e)))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel>=o.Warnings&&this._print.apply(this,i([o.Warnings],n(e)))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel>=o.Errors&&this._print.apply(this,i([o.Errors],n(e)))},e.prototype.setLogFunction=function(e){this._print=e},e.prototype._print=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var a=i(["PeerJS: "],n(t));for(var s in a)a[s]instanceof Error&&(a[s]="("+a[s].name+") "+a[s].message);e>=o.All?console.log.apply(console,i([],n(a))):e>=o.Warnings?console.warn.apply(console,i(["WARNING"],n(a))):e>=o.Errors&&console.error.apply(console,i(["ERROR"],n(a)))},e}();r.default=new a},{}],ZRYf:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ServerMessageType=r.SocketEventType=r.SerializationType=r.PeerErrorType=r.PeerEventType=r.ConnectionType=r.ConnectionEventType=void 0,function(e){e.Open="open",e.Stream="stream",e.Data="data",e.Close="close",e.Error="error",e.IceStateChanged="iceStateChanged"}(r.ConnectionEventType||(r.ConnectionEventType={})),function(e){e.Data="data",e.Media="media"}(r.ConnectionType||(r.ConnectionType={})),function(e){e.Open="open",e.Close="close",e.Connection="connection",e.Call="call",e.Disconnected="disconnected",e.Error="error"}(r.PeerEventType||(r.PeerEventType={})),function(e){e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc"}(r.PeerErrorType||(r.PeerErrorType={})),function(e){e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json"}(r.SerializationType||(r.SerializationType={})),function(e){e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close"}(r.SocketEventType||(r.SocketEventType={})),function(e){e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE"}(r.ServerMessageType||(r.ServerMessageType={}))},{}],wJlv:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(u){i={error:u}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},o=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.Socket=void 0;var c=e("eventemitter3"),p=s(e("./logger")),u=e("./enums"),d=function(e){function t(t,r,n,i,o,a){void 0===a&&(a=5e3);var s=e.call(this)||this;s.pingInterval=a,s._disconnected=!0,s._messagesQueue=[];var c=t?"wss://":"ws://";return s._baseUrl=c+r+":"+n+i+"peerjs?key="+o,s}return n(t,e),t.prototype.start=function(e,t){var r=this;this._id=e;var n=this._baseUrl+"&id="+e+"&token="+t;!this._socket&&this._disconnected&&(this._socket=new WebSocket(n),this._disconnected=!1,this._socket.onmessage=function(e){var t;try{t=JSON.parse(e.data),p.default.log("Server message received:",t)}catch(n){return void p.default.log("Invalid server message",e.data)}r.emit(u.SocketEventType.Message,t)},this._socket.onclose=function(e){r._disconnected||(p.default.log("Socket closed.",e),r._cleanup(),r._disconnected=!0,r.emit(u.SocketEventType.Disconnected))},this._socket.onopen=function(){r._disconnected||(r._sendQueuedMessages(),p.default.log("Socket open"),r._scheduleHeartbeat())})},t.prototype._scheduleHeartbeat=function(){var e=this;this._wsPingTimer=setTimeout(function(){e._sendHeartbeat()},this.pingInterval)},t.prototype._sendHeartbeat=function(){if(this._wsOpen()){var e=JSON.stringify({type:u.ServerMessageType.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}else p.default.log("Cannot send heartbeat, because socket closed")},t.prototype._wsOpen=function(){return!!this._socket&&1===this._socket.readyState},t.prototype._sendQueuedMessages=function(){var e,t,r=o([],i(this._messagesQueue));this._messagesQueue=[];try{for(var n=a(r),s=n.next();!s.done;s=n.next()){var c=s.value;this.send(c)}}catch(p){e={error:p}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t.prototype.send=function(e){if(!this._disconnected)if(this._id)if(e.type){if(this._wsOpen()){var t=JSON.stringify(e);this._socket.send(t)}}else this.emit(u.SocketEventType.Error,"Invalid message");else this._messagesQueue.push(e)},t.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},t.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},t}(c.EventEmitter);r.Socket=d},{eventemitter3:"JJlS","./logger":"WOs9","./enums":"ZRYf"}],HCdX:[function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{c(n.next(e))}catch(t){o(t)}}function s(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.Negotiator=void 0;var s=e("./util"),c=a(e("./logger")),p=e("./enums"),u=function(){function e(e){this.connection=e}return e.prototype.startConnection=function(e){var t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===p.ConnectionType.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){if(this.connection.type===p.ConnectionType.Data){var r=this.connection,n={ordered:!!e.reliable},i=t.createDataChannel(r.label,n);r.initialize(i)}this._makeOffer()}else this.handleSDP("OFFER",e.sdp)},e.prototype._startPeerConnection=function(){c.default.log("Creating RTCPeerConnection.");var e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e},e.prototype._setupListeners=function(e){var t=this,r=this.connection.peer,n=this.connection.connectionId,i=this.connection.type,o=this.connection.provider;c.default.log("Listening for ICE candidates."),e.onicecandidate=function(e){e.candidate&&e.candidate.candidate&&(c.default.log("Received ICE candidates for "+r+":",e.candidate),o.socket.send({type:p.ServerMessageType.Candidate,payload:{candidate:e.candidate,type:i,connectionId:n},dst:r}))},e.oniceconnectionstatechange=function(){switch(e.iceConnectionState){case"failed":c.default.log("iceConnectionState is failed, closing connections to "+r),t.connection.emit(p.ConnectionEventType.Error,new Error("Negotiation of connection to "+r+" failed.")),t.connection.close();break;case"closed":c.default.log("iceConnectionState is closed, closing connections to "+r),t.connection.emit(p.ConnectionEventType.Error,new Error("Connection to "+r+" closed.")),t.connection.close();break;case"disconnected":c.default.log("iceConnectionState changed to disconnected on the connection with "+r);break;case"completed":e.onicecandidate=s.util.noop}t.connection.emit(p.ConnectionEventType.IceStateChanged,e.iceConnectionState)},c.default.log("Listening for data channel"),e.ondatachannel=function(e){c.default.log("Received data channel");var t=e.channel;o.getConnection(r,n).initialize(t)},c.default.log("Listening for remote stream"),e.ontrack=function(e){c.default.log("Received remote stream");var i=e.streams[0],a=o.getConnection(r,n);if(a.type===p.ConnectionType.Media){var s=a;t._addStreamToMediaConnection(i,s)}}},e.prototype.cleanup=function(){c.default.log("Cleaning up PeerConnection to "+this.connection.peer);var e=this.connection.peerConnection;if(e){this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=function(){};var t="closed"!==e.signalingState,r=!1;if(this.connection.type===p.ConnectionType.Data){var n=this.connection.dataChannel;n&&(r=!!n.readyState&&"closed"!==n.readyState)}(t||r)&&e.close()}},e.prototype._makeOffer=function(){return i(this,void 0,Promise,function(){var e,t,r,i,a,u,d;return o(this,function(o){switch(o.label){case 0:e=this.connection.peerConnection,t=this.connection.provider,o.label=1;case 1:return o.trys.push([1,7,,8]),[4,e.createOffer(this.connection.options.constraints)];case 2:r=o.sent(),c.default.log("Created offer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),o.label=3;case 3:return o.trys.push([3,5,,6]),[4,e.setLocalDescription(r)];case 4:return o.sent(),c.default.log("Set localDescription:",r,"for:"+this.connection.peer),i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:s.util.browser},this.connection.type===p.ConnectionType.Data&&(a=this.connection,i=n(n({},i),{label:a.label,reliable:a.reliable,serialization:a.serialization})),t.socket.send({type:p.ServerMessageType.Offer,payload:i,dst:this.connection.peer}),[3,6];case 5:return"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=(u=o.sent())&&(t.emitError(p.PeerErrorType.WebRTC,u),c.default.log("Failed to setLocalDescription, ",u)),[3,6];case 6:return[3,8];case 7:return d=o.sent(),t.emitError(p.PeerErrorType.WebRTC,d),c.default.log("Failed to createOffer, ",d),[3,8];case 8:return[2]}})})},e.prototype._makeAnswer=function(){return i(this,void 0,Promise,function(){var e,t,r,n,i;return o(this,function(o){switch(o.label){case 0:e=this.connection.peerConnection,t=this.connection.provider,o.label=1;case 1:return o.trys.push([1,7,,8]),[4,e.createAnswer()];case 2:r=o.sent(),c.default.log("Created answer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),o.label=3;case 3:return o.trys.push([3,5,,6]),[4,e.setLocalDescription(r)];case 4:return o.sent(),c.default.log("Set localDescription:",r,"for:"+this.connection.peer),t.socket.send({type:p.ServerMessageType.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,browser:s.util.browser},dst:this.connection.peer}),[3,6];case 5:return n=o.sent(),t.emitError(p.PeerErrorType.WebRTC,n),c.default.log("Failed to setLocalDescription, ",n),[3,6];case 6:return[3,8];case 7:return i=o.sent(),t.emitError(p.PeerErrorType.WebRTC,i),c.default.log("Failed to create answer, ",i),[3,8];case 8:return[2]}})})},e.prototype.handleSDP=function(e,t){return i(this,void 0,Promise,function(){var r,n,i,a;return o(this,function(o){switch(o.label){case 0:t=new RTCSessionDescription(t),r=this.connection.peerConnection,n=this.connection.provider,c.default.log("Setting remote description",t),i=this,o.label=1;case 1:return o.trys.push([1,5,,6]),[4,r.setRemoteDescription(t)];case 2:return o.sent(),c.default.log("Set remoteDescription:"+e+" for:"+this.connection.peer),"OFFER"!==e?[3,4]:[4,i._makeAnswer()];case 3:o.sent(),o.label=4;case 4:return[3,6];case 5:return a=o.sent(),n.emitError(p.PeerErrorType.WebRTC,a),c.default.log("Failed to setRemoteDescription, ",a),[3,6];case 6:return[2]}})})},e.prototype.handleCandidate=function(e){return i(this,void 0,Promise,function(){var t,r,n,i,a,s;return o(this,function(o){switch(o.label){case 0:c.default.log("handleCandidate:",e),t=e.candidate,r=e.sdpMLineIndex,n=e.sdpMid,i=this.connection.peerConnection,a=this.connection.provider,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.addIceCandidate(new RTCIceCandidate({sdpMid:n,sdpMLineIndex:r,candidate:t}))];case 2:return o.sent(),c.default.log("Added ICE candidate for:"+this.connection.peer),[3,4];case 3:return s=o.sent(),a.emitError(p.PeerErrorType.WebRTC,s),c.default.log("Failed to handleCandidate, ",s),[3,4];case 4:return[2]}})})},e.prototype._addTracksToConnection=function(e,t){if(c.default.log("add tracks from stream "+e.id+" to peer connection"),!t.addTrack)return c.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(function(r){t.addTrack(r,e)})},e.prototype._addStreamToMediaConnection=function(e,t){c.default.log("add stream "+e.id+" to media connection "+t.connectionId),t.addStream(e)},e}();r.Negotiator=u},{"./util":"BHXf","./logger":"WOs9","./enums":"ZRYf"}],tQFK:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0}),r.BaseConnection=void 0;var i=function(e){function t(t,r,n){var i=e.call(this)||this;return i.peer=t,i.provider=r,i.options=n,i._open=!1,i.metadata=n.metadata,i}return n(t,e),Object.defineProperty(t.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),t}(e("eventemitter3").EventEmitter);r.BaseConnection=i},{eventemitter3:"JJlS"}],dbHP:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.MediaConnection=void 0;var s=e("./util"),c=a(e("./logger")),p=e("./negotiator"),u=e("./enums"),d=function(e){function t(r,n,i){var o=e.call(this,r,n,i)||this;return o._localStream=o.options._stream,o.connectionId=o.options.connectionId||t.ID_PREFIX+s.util.randomToken(),o._negotiator=new p.Negotiator(o),o._localStream&&o._negotiator.startConnection({_stream:o._localStream,originator:!0}),o}return n(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return u.ConnectionType.Media},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),t.prototype.addStream=function(t){c.default.log("Receiving stream",t),this._remoteStream=t,e.prototype.emit.call(this,u.ConnectionEventType.Stream,t)},t.prototype.handleMessage=function(e){var t=e.type,r=e.payload;switch(e.type){case u.ServerMessageType.Answer:this._negotiator.handleSDP(t,r.sdp),this._open=!0;break;case u.ServerMessageType.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:c.default.warn("Unrecognized message type:"+t+" from peer:"+this.peer)}},t.prototype.answer=function(e,t){var r,n;if(void 0===t&&(t={}),this._localStream)c.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");else{this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection(i(i({},this.options._payload),{_stream:e}));var a=this.provider._getMessages(this.connectionId);try{for(var s=o(a),p=s.next();!p.done;p=s.next()){var u=p.value;this.handleMessage(u)}}catch(d){r={error:d}}finally{try{p&&!p.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}this._open=!0}},t.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,e.prototype.emit.call(this,u.ConnectionEventType.Close))},t.ID_PREFIX="mc_",t}(e("./baseconnection").BaseConnection);r.MediaConnection=d},{"./util":"BHXf","./logger":"WOs9","./negotiator":"HCdX","./enums":"ZRYf","./baseconnection":"tQFK"}],GGp6:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.EncodingQueue=void 0;var o=e("eventemitter3"),a=i(e("./logger")),s=function(e){function t(){var t=e.call(this)||this;return t.fileReader=new FileReader,t._queue=[],t._processing=!1,t.fileReader.onload=function(e){t._processing=!1,e.target&&t.emit("done",e.target.result),t.doNextTask()},t.fileReader.onerror=function(e){a.default.error("EncodingQueue error:",e),t._processing=!1,t.destroy(),t.emit("error",e)},t}return n(t,e),Object.defineProperty(t.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),t.prototype.enque=function(e){this.queue.push(e),this.processing||this.doNextTask()},t.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},t.prototype.doNextTask=function(){0!==this.size&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},t}(o.EventEmitter);r.EncodingQueue=s},{eventemitter3:"JJlS","./logger":"WOs9"}],GBTQ:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.DataConnection=void 0;var a=e("./util"),s=o(e("./logger")),c=e("./negotiator"),p=e("./enums"),u=e("./baseconnection"),d=e("./encodingQueue"),l=function(e){function t(r,n,i){var o=e.call(this,r,n,i)||this;return o.stringify=JSON.stringify,o.parse=JSON.parse,o._buffer=[],o._bufferSize=0,o._buffering=!1,o._chunkedData={},o._encodingQueue=new d.EncodingQueue,o.connectionId=o.options.connectionId||t.ID_PREFIX+a.util.randomToken(),o.label=o.options.label||o.connectionId,o.serialization=o.options.serialization||p.SerializationType.Binary,o.reliable=!!o.options.reliable,o._encodingQueue.on("done",function(e){o._bufferedSend(e)}),o._encodingQueue.on("error",function(){s.default.error("DC#"+o.connectionId+": Error occured in encoding from blob to arraybuffer, close DC"),o.close()}),o._negotiator=new c.Negotiator(o),o._negotiator.startConnection(o.options._payload||{originator:!0}),o}return n(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return p.ConnectionType.Data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e){this._dc=e,this._configureDataChannel()},t.prototype._configureDataChannel=function(){var e=this;a.util.supports.binaryBlob&&!a.util.supports.reliable||(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){s.default.log("DC#"+e.connectionId+" dc connection success"),e._open=!0,e.emit(p.ConnectionEventType.Open)},this.dataChannel.onmessage=function(t){s.default.log("DC#"+e.connectionId+" dc onmessage:",t.data),e._handleDataMessage(t)},this.dataChannel.onclose=function(){s.default.log("DC#"+e.connectionId+" dc closed for:",e.peer),e.close()}},t.prototype._handleDataMessage=function(t){var r=this,n=t.data,i=n.constructor,o=n;if(this.serialization===p.SerializationType.Binary||this.serialization===p.SerializationType.BinaryUTF8){if(i===Blob)return void a.util.blobToArrayBuffer(n,function(e){var t=a.util.unpack(e);r.emit(p.ConnectionEventType.Data,t)});if(i===ArrayBuffer)o=a.util.unpack(n);else if(i===String){var s=a.util.binaryStringToArrayBuffer(n);o=a.util.unpack(s)}}else this.serialization===p.SerializationType.JSON&&(o=this.parse(n));o.__peerData?this._handleChunk(o):e.prototype.emit.call(this,p.ConnectionEventType.Data,o)},t.prototype._handleChunk=function(e){var t=e.__peerData,r=this._chunkedData[t]||{data:[],count:0,total:e.total};if(r.data[e.n]=e.data,r.count++,this._chunkedData[t]=r,r.total===r.count){delete this._chunkedData[t];var n=new Blob(r.data);this._handleDataMessage({data:n})}},t.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,e.prototype.emit.call(this,p.ConnectionEventType.Close))},t.prototype.send=function(t,r){if(this.open)if(this.serialization===p.SerializationType.JSON)this._bufferedSend(this.stringify(t));else if(this.serialization===p.SerializationType.Binary||this.serialization===p.SerializationType.BinaryUTF8){var n=a.util.pack(t);if(!r&&n.size>a.util.chunkedMTU)return void this._sendChunks(n);a.util.supports.binaryBlob?this._bufferedSend(n):this._encodingQueue.enque(n)}else this._bufferedSend(t);else e.prototype.emit.call(this,p.ConnectionEventType.Error,new Error("Connection is not open. You should listen for the `open` event before sending messages."))},t.prototype._bufferedSend=function(e){!this._buffering&&this._trySend(e)||(this._buffer.push(e),this._bufferSize=this._buffer.length)},t.prototype._trySend=function(r){var n=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>t.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){n._buffering=!1,n._tryBuffer()},50),!1;try{this.dataChannel.send(r)}catch(e){return s.default.error("DC#:"+this.connectionId+" Error when sending:",e),this._buffering=!0,this.close(),!1}return!0},t.prototype._tryBuffer=function(){if(this.open&&0!==this._buffer.length){var e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}},t.prototype._sendChunks=function(e){var t,r,n=a.util.chunk(e);s.default.log("DC#"+this.connectionId+" Try to send "+n.length+" chunks...");try{for(var o=i(n),c=o.next();!c.done;c=o.next()){var p=c.value;this.send(p,!0)}}catch(u){t={error:u}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}},t.prototype.handleMessage=function(e){var t=e.payload;switch(e.type){case p.ServerMessageType.Answer:this._negotiator.handleSDP(e.type,t.sdp);break;case p.ServerMessageType.Candidate:this._negotiator.handleCandidate(t.candidate);break;default:s.default.warn("Unrecognized message type:",e.type,"from peer:",this.peer)}},t.ID_PREFIX="dc_",t.MAX_BUFFERED_AMOUNT=8388608,t}(u.BaseConnection);r.DataConnection=l},{"./util":"BHXf","./logger":"WOs9","./negotiator":"HCdX","./enums":"ZRYf","./baseconnection":"tQFK","./encodingQueue":"GGp6"}],in7L:[function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{c(n.next(e))}catch(t){o(t)}}function s(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.API=void 0;var a=e("./util"),s=o(e("./logger")),c=function(){function e(e){this._options=e}return e.prototype._buildUrl=function(e){return(this._options.secure?"https://":"http://")+this._options.host+":"+this._options.port+this._options.path+this._options.key+"/"+e+"?ts="+(new Date).getTime()+Math.random()},e.prototype.retrieveId=function(){return n(this,void 0,Promise,function(){var e,t,r,n;return i(this,function(i){switch(i.label){case 0:e=this._buildUrl("id"),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,fetch(e)];case 2:if(200!==(t=i.sent()).status)throw new Error("Error. Status:"+t.status);return[2,t.text()];case 3:throw r=i.sent(),s.default.error("Error retrieving ID",r),n="","/"===this._options.path&&this._options.host!==a.util.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n);case 4:return[2]}})})},e.prototype.listAllPeers=function(){return n(this,void 0,Promise,function(){var e,t,r,n;return i(this,function(i){switch(i.label){case 0:e=this._buildUrl("peers"),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,fetch(e)];case 2:if(200!==(t=i.sent()).status){if(401===t.status)throw"",r=this._options.host===a.util.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+r);throw new Error("Error. Status:"+t.status)}return[2,t.json()];case 3:throw n=i.sent(),s.default.error("Error retrieving list peers",n),new Error("Could not get list peers from the server."+n);case 4:return[2]}})})},e}();r.API=c},{"./util":"BHXf","./logger":"WOs9"}],Hxpd:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(u){i={error:u}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.Peer=void 0;var c=e("eventemitter3"),p=e("./util"),u=s(e("./logger")),d=e("./socket"),l=e("./mediaconnection"),f=e("./dataconnection"),h=e("./enums"),v=e("./api"),m=function(e){function t(r,n){var o,a=e.call(this)||this;return a._id=null,a._lastServerId=null,a._destroyed=!1,a._disconnected=!1,a._open=!1,a._connections=new Map,a._lostMessages=new Map,r&&r.constructor==Object?n=r:r&&(o=r.toString()),n=i({debug:0,host:p.util.CLOUD_HOST,port:p.util.CLOUD_PORT,path:"/",key:t.DEFAULT_KEY,token:p.util.randomToken(),config:p.util.defaultConfig},n),a._options=n,"/"===a._options.host&&(a._options.host=window.location.hostname),a._options.path&&("/"!==a._options.path[0]&&(a._options.path="/"+a._options.path),"/"!==a._options.path[a._options.path.length-1]&&(a._options.path+="/")),void 0===a._options.secure&&a._options.host!==p.util.CLOUD_HOST?a._options.secure=p.util.isSecure():a._options.host==p.util.CLOUD_HOST&&(a._options.secure=!0),a._options.logFunction&&u.default.setLogFunction(a._options.logFunction),u.default.logLevel=a._options.debug||0,a._api=new v.API(n),a._socket=a._createServerConnection(),p.util.supports.audioVideo||p.util.supports.data?o&&!p.util.validateId(o)?(a._delayedAbort(h.PeerErrorType.InvalidID,'ID "'+o+'" is invalid'),a):(o?a._initialize(o):a._api.retrieveId().then(function(e){return a._initialize(e)}).catch(function(e){return a._abort(h.PeerErrorType.ServerError,e)}),a):(a._delayedAbort(h.PeerErrorType.BrowserIncompatible,"The current browser does not support WebRTC"),a)}return n(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connections",{get:function(){var e,t,r=Object.create(null);try{for(var n=o(this._connections),i=n.next();!i.done;i=n.next()){var s=a(i.value,2),c=s[0],p=s[1];r[c]=p}}catch(f){e={error:f}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),t.prototype._createServerConnection=function(){var e=this,t=new d.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(h.SocketEventType.Message,function(t){e._handleMessage(t)}),t.on(h.SocketEventType.Error,function(t){e._abort(h.PeerErrorType.SocketError,t)}),t.on(h.SocketEventType.Disconnected,function(){e.disconnected||(e.emitError(h.PeerErrorType.Network,"Lost connection to server."),e.disconnect())}),t.on(h.SocketEventType.Close,function(){e.disconnected||e._abort(h.PeerErrorType.SocketClosed,"Underlying socket is already closed.")}),t},t.prototype._initialize=function(e){this._id=e,this.socket.start(e,this._options.token)},t.prototype._handleMessage=function(e){var t,r,n=e.type,i=e.payload,a=e.src;switch(n){case h.ServerMessageType.Open:this._lastServerId=this.id,this._open=!0,this.emit(h.PeerEventType.Open,this.id);break;case h.ServerMessageType.Error:this._abort(h.PeerErrorType.ServerError,i.msg);break;case h.ServerMessageType.IdTaken:this._abort(h.PeerErrorType.UnavailableID,'ID "'+this.id+'" is taken');break;case h.ServerMessageType.InvalidKey:this._abort(h.PeerErrorType.InvalidKey,'API KEY "'+this._options.key+'" is invalid');break;case h.ServerMessageType.Leave:u.default.log("Received leave message from "+a),this._cleanupPeer(a),this._connections.delete(a);break;case h.ServerMessageType.Expire:this.emitError(h.PeerErrorType.PeerUnavailable,"Could not connect to peer "+a);break;case h.ServerMessageType.Offer:var s=i.connectionId;if((m=this.getConnection(a,s))&&(m.close(),u.default.warn("Offer received for existing Connection ID:"+s)),i.type===h.ConnectionType.Media)m=new l.MediaConnection(a,this,{connectionId:s,_payload:i,metadata:i.metadata}),this._addConnection(a,m),this.emit(h.PeerEventType.Call,m);else{if(i.type!==h.ConnectionType.Data)return void u.default.warn("Received malformed connection type:"+i.type);m=new f.DataConnection(a,this,{connectionId:s,_payload:i,metadata:i.metadata,label:i.label,serialization:i.serialization,reliable:i.reliable}),this._addConnection(a,m),this.emit(h.PeerEventType.Connection,m)}var c=this._getMessages(s);try{for(var p=o(c),d=p.next();!d.done;d=p.next()){var v=d.value;m.handleMessage(v)}}catch(y){t={error:y}}finally{try{d&&!d.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}break;default:if(!i)return void u.default.warn("You received a malformed message from "+a+" of type "+n);var m;s=i.connectionId,(m=this.getConnection(a,s))&&m.peerConnection?m.handleMessage(e):s?this._storeMessage(s,e):u.default.warn("You received an unrecognized message:",e)}},t.prototype._storeMessage=function(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)},t.prototype._getMessages=function(e){var t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]},t.prototype.connect=function(e,t){if(void 0===t&&(t={}),this.disconnected)return u.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError(h.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");var r=new f.DataConnection(e,this,t);return this._addConnection(e,r),r},t.prototype.call=function(e,t,r){if(void 0===r&&(r={}),this.disconnected)return u.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError(h.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");if(t){r._stream=t;var n=new l.MediaConnection(e,this,r);return this._addConnection(e,n),n}u.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.")},t.prototype._addConnection=function(e,t){u.default.log("add connection "+t.type+":"+t.connectionId+" to peerId:"+e),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)},t.prototype._removeConnection=function(e){var t=this._connections.get(e.peer);if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}this._lostMessages.delete(e.connectionId)},t.prototype.getConnection=function(e,t){var r,n,i=this._connections.get(e);if(!i)return null;try{for(var a=o(i),s=a.next();!s.done;s=a.next()){var c=s.value;if(c.connectionId===t)return c}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return null},t.prototype._delayedAbort=function(e,t){var r=this;setTimeout(function(){r._abort(e,t)},0)},t.prototype._abort=function(e,t){u.default.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()},t.prototype.emitError=function(e,t){var r;u.default.error("Error:",t),(r="string"==typeof t?new Error(t):t).type=e,this.emit(h.PeerEventType.Error,r)},t.prototype.destroy=function(){this.destroyed||(u.default.log("Destroy peer with ID:"+this.id),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit(h.PeerEventType.Close))},t.prototype._cleanup=function(){var e,t;try{for(var r=o(this._connections.keys()),n=r.next();!n.done;n=r.next()){var i=n.value;this._cleanupPeer(i),this._connections.delete(i)}}catch(p){e={error:p}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this.socket.removeAllListeners()},t.prototype._cleanupPeer=function(e){var t,r,n=this._connections.get(e);if(n)try{for(var i=o(n),a=i.next();!a.done;a=i.next())a.value.close()}catch(u){t={error:u}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},t.prototype.disconnect=function(){if(!this.disconnected){var e=this.id;u.default.log("Disconnect peer with ID:"+e),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit(h.PeerEventType.Disconnected,e)}},t.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)u.default.log("Attempting reconnection to server with ID "+this._lastServerId),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error("Peer "+this.id+" cannot reconnect because it is not disconnected from the server!");u.default.error("In a hurry? We're still trying to make the initial connection!")}},t.prototype.listAllPeers=function(e){var t=this;void 0===e&&(e=function(e){}),this._api.listAllPeers().then(function(t){return e(t)}).catch(function(e){return t._abort(h.PeerErrorType.ServerError,e)})},t.DEFAULT_KEY="peerjs",t}(c.EventEmitter);r.Peer=m},{eventemitter3:"JJlS","./util":"BHXf","./logger":"WOs9","./socket":"wJlv","./mediaconnection":"dbHP","./dataconnection":"GBTQ","./enums":"ZRYf","./api":"in7L"}],iTK6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.peerjs=void 0;var n=e("./util"),i=e("./peer");r.peerjs={Peer:i.Peer,util:n.util},r.default=i.Peer,window.peerjs=r.peerjs,window.Peer=i.Peer},{"./util":"BHXf","./peer":"Hxpd"}]},{},["iTK6"]);
},{}],"zES8":[function(require,module,exports) {
var define;
var global = arguments[3];
var define,global=arguments[3];!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Automerge=e():t.Automerge=e()}(this,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s="./src/automerge.js")}({"./backend/index.js":function(t,e,r){"use strict";var n=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(c){o=!0,i=c}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();var i=r("./node_modules/immutable/dist/immutable.js"),a=i.Map,s=i.List,c=i.fromJS,u=r("./src/common.js"),g=(u.isObject,u.lessOrEqual),l=u.parseElemId,f=r("./backend/op_set.js"),p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.diffs={},this.children={}}return o(t,[{key:"unpackValue",value:function(t,e,r){Object.assign(e,r),r.link&&this.children[t].push(r.value)}},{key:"unpackConflicts",value:function(t,e,r){if(r){e.conflicts=[];var o=!0,i=!1,a=void 0;try{for(var s,c=r[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value,g=n(u,2),l=g[0],f=g[1],p={actor:l};this.unpackValue(t,p,f),e.conflicts.push(p)}}catch(h){i=!0,a=h}finally{try{!o&&c.return&&c.return()}finally{if(i)throw a}}}}},{key:"instantiateMap",value:function(t,e,r){var n=this.diffs[e];e!==f.ROOT_ID&&n.push({obj:e,type:r,action:"create"});var o=f.getObjectConflicts(t,e,this),i=!0,a=!1,s=void 0;try{for(var c,u=f.getObjectFields(t,e)[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var g=c.value,l={obj:e,type:r,action:"set",key:g};this.unpackValue(e,l,f.getObjectField(t,e,g,this)),this.unpackConflicts(e,l,o.get(g)),n.push(l)}}catch(p){a=!0,s=p}finally{try{!i&&u.return&&u.return()}finally{if(a)throw s}}}},{key:"instantiateList",value:function(t,e,r){var n=this.diffs[e],o=0;n.push({obj:e,type:r,action:"create"});var i=!0,a=!1,s=void 0;try{for(var c,u=f.listIterator(t,e,this)[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var g=c.value,p=g.index,h=g.elemId,d=g.value,m=g.conflicts;if(o=Math.max(o,l(h).counter),void 0!==p){var y={obj:e,type:r,action:"insert",index:p,elemId:h};this.unpackValue(e,y,d),this.unpackConflicts(e,y,m),n.push(y)}}}catch(v){a=!0,s=v}finally{try{!i&&u.return&&u.return()}finally{if(a)throw s}}n.push({obj:e,type:r,action:"maxElem",value:o})}},{key:"instantiateObject",value:function(t,e){if(this.diffs[e])return{value:e,link:!0};var r=e===f.ROOT_ID,n=t.getIn(["byObject",e,"_init","action"]);if(this.diffs[e]=[],this.children[e]=[],r||"makeMap"===n)this.instantiateMap(t,e,"map");else if("makeTable"===n)this.instantiateMap(t,e,"table");else if("makeList"===n)this.instantiateList(t,e,"list");else{if("makeText"!==n)throw new RangeError("Unknown object type: "+n);this.instantiateList(t,e,"text")}return{value:e,link:!0}}},{key:"makePatch",value:function(t,e){var r=!0,n=!1,o=void 0;try{for(var i,a=this.children[t][Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var s=i.value;this.makePatch(s,e)}}catch(h){n=!0,o=h}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}var c=!0,u=!1,g=void 0;try{for(var l,f=this.diffs[t][Symbol.iterator]();!(c=(l=f.next()).done);c=!0){var p=l.value;e.push(p)}}catch(h){u=!0,g=h}finally{try{!c&&f.return&&f.return()}finally{if(u)throw g}}}}]),t}();function h(t,e){var r=t.getIn(["opSet","undoPos"])>0,n=!t.getIn(["opSet","redoStack"]).isEmpty();return{clock:t.getIn(["opSet","clock"]).toJS(),deps:t.getIn(["opSet","deps"]).toJS(),canUndo:r,canRedo:n,diffs:e}}function d(t,e,r){var o=[],i=t.get("opSet"),a=!0,s=!1,u=void 0;try{for(var g,l=c(e)[Symbol.iterator]();!(a=(g=l.next()).done);a=!0){var p=g.value;p=p.remove("requestType");var d=f.addChange(i,p,r),m=n(d,2),y=m[0],v=m[1],_=!0,b=!1,S=void 0;try{for(var w,E=v[Symbol.iterator]();!(_=(w=E.next()).done);_=!0){var O=w.value;o.push(O)}}catch(j){b=!0,S=j}finally{try{!_&&E.return&&E.return()}finally{if(b)throw S}}i=y}}catch(j){s=!0,u=j}finally{try{!a&&l.return&&l.return()}finally{if(s)throw u}}return[t=t.set("opSet",i),h(t,o)]}function m(t,e){return d(t,e,!1)}t.exports={init:function(){return a({opSet:f.init()})},applyChanges:m,applyLocalChange:function(t,e){if("string"!=typeof e.actor||"number"!=typeof e.seq)throw new TypeError("Change request requries `actor` and `seq` properties");if(e.seq<=t.getIn(["opSet","clock",e.actor],0))throw new RangeError("Change request has already been applied");var r=void 0;if("change"===e.requestType){var o=d(t,[e],!1!==e.undoable),i=n(o,2);t=i[0],r=i[1]}else if("undo"===e.requestType){var u=function(t,e){var r=t.getIn(["opSet","undoPos"]),o=t.getIn(["opSet","undoStack",r-1]);if(r<1||!o)throw new RangeError("Cannot undo: there is nothing to be undone");var i=e.actor,u=e.seq,g=e.deps,l=e.message,p=a({actor:i,seq:u,deps:c(g),message:l,ops:o}),d=t.get("opSet"),m=s().withMutations(function(t){var e=!0,r=!1,n=void 0;try{for(var i,s=o[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var c=i.value;if(!["set","del","link","inc"].includes(c.get("action")))throw new RangeError("Unexpected operation type in undo history: "+c);var u=f.getFieldOps(d,c.get("obj"),c.get("key"));if("inc"===c.get("action"))t.push(a({action:"inc",obj:c.get("obj"),key:c.get("key"),value:-c.get("value")}));else if(u.isEmpty())t.push(a({action:"del",obj:c.get("obj"),key:c.get("key")}));else{var g=!0,l=!1,p=void 0;try{for(var h,m=u[Symbol.iterator]();!(g=(h=m.next()).done);g=!0){var y=h.value;t.push(y.remove("actor").remove("seq"))}}catch(v){l=!0,p=v}finally{try{!g&&m.return&&m.return()}finally{if(l)throw p}}}}}catch(v){r=!0,n=v}finally{try{!e&&s.return&&s.return()}finally{if(r)throw n}}});d=d.set("undoPos",r-1).update("redoStack",function(t){return t.push(m)});var y=f.addChange(d,p,!1),v=n(y,2),_=v[0],b=v[1];return[t=t.set("opSet",_),h(t,b)]}(t,e),g=n(u,2);t=g[0],r=g[1]}else{if("redo"!==e.requestType)throw new RangeError("Unknown requestType: "+e.requestType);var l=function(t,e){var r=t.getIn(["opSet","redoStack"]).last();if(!r)throw new RangeError("Cannot redo: the last change was not an undo");var o=e.actor,i=e.seq,s=e.deps,u=e.message,g=a({actor:o,seq:i,deps:c(s),message:u,ops:r}),l=t.get("opSet").update("undoPos",function(t){return t+1}).update("redoStack",function(t){return t.pop()}),p=f.addChange(l,g,!1),d=n(p,2),m=d[0],y=d[1];return[t=t.set("opSet",m),h(t,y)]}(t,e),p=n(l,2);t=p[0],r=p[1]}return r.actor=e.actor,r.seq=e.seq,[t,r]},getPatch:function(t){var e=[],r=t.get("opSet"),n=new p(r);return n.instantiateObject(r,f.ROOT_ID),n.makePatch(f.ROOT_ID,e),h(t,e)},getChanges:function(t,e){var r=t.getIn(["opSet","clock"]),n=e.getIn(["opSet","clock"]);if(!g(r,n))throw new RangeError("Cannot diff two states that have diverged");return f.getMissingChanges(e.get("opSet"),r).toJS()},getChangesForActor:function(t,e){return f.getChangesForActor(t.get("opSet"),e).toJS()},getMissingChanges:function(t,e){return f.getMissingChanges(t.get("opSet"),e).toJS()},getMissingDeps:function(t){return f.getMissingDeps(t.get("opSet"))},merge:function(t,e){var r=f.getMissingChanges(e.get("opSet"),t.getIn(["opSet","clock"]));return m(t,r)}}},"./backend/op_set.js":function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(c){o=!0,i=c}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=r("./node_modules/immutable/dist/immutable.js"),a=i.Map,s=i.List,c=i.Set,u=r("./backend/skip_list.js").SkipList,g=r("./src/common.js"),l=g.ROOT_ID,f=g.parseElemId;function p(t,e,r){var n=[e.get("actor"),e.get("seq")],o=n[0],i=n[1],a=[r.get("actor"),r.get("seq")],s=a[0],c=a[1];if(!(o&&s&&i&&c))return!1;var u=t.getIn(["states",o,i-1,"allDeps"]),g=t.getIn(["states",s,c-1,"allDeps"]);return u.get(s,0)<c&&g.get(o,0)<i}function h(t,e){var r=e.get("actor"),n=e.get("seq"),o=!0;return e.get("deps").set(r,n-1).forEach(function(e,r){t.getIn(["clock",r],0)<e&&(o=!1)}),o}function d(t,e){return e.reduce(function(e,r,n){if(r<=0)return e;var o=t.getIn(["states",n,r-1,"allDeps"]);return e.mergeWith(function(t,e){return Math.max(t,e)},o).set(n,r)},a())}function m(t,e){for(var r=[];e!==l;){var n=t.getIn(["byObject",e,"_inbound"],c()).first();if(!n)return null;e=n.get("obj");var o=t.getIn(["byObject",e,"_init","action"]);if("makeList"===o||"makeText"===o){var i=t.getIn(["byObject",e,"_elemIds"]).indexOf(n.get("key"));if(i<0)return null;r.unshift(i)}else r.unshift(n.get("key"))}return r}function y(t,e){var r=e.get("obj");if(t.hasIn(["byObject",r,"_keys"]))throw new Error("Duplicate creation of object "+r);var n={action:"create",obj:r},o=a({_init:e,_inbound:c(),_keys:a()});return"makeMap"===e.get("action")?n.type="map":"makeTable"===e.get("action")?n.type="table":(n.type="makeText"===e.get("action")?"text":"list",o=o.set("_elemIds",new u)),[t=t.setIn(["byObject",r],o),[n]]}function v(t,e){var r=e.get("obj"),n=e.get("elem"),o=e.get("actor")+":"+n,i=Math.max(n,t.getIn(["byObject",r,"_maxElem"],0)),a="makeText"===t.getIn(["byObject",r,"_init","action"])?"text":"list";if(!t.get("byObject").has(r))throw new Error("Modification of unknown object "+r);if(t.hasIn(["byObject",r,"_insertion",o]))throw new Error("Duplicate list element ID "+o);return[t=t.updateIn(["byObject",r,"_following",e.get("key")],s(),function(t){return t.push(e)}).setIn(["byObject",r,"_maxElem"],i).setIn(["byObject",r,"_insertion",o],e),[{obj:r,type:a,action:"maxElem",value:i,path:m(t,r)}]]}function _(t){var e=[],r=!0,n=!1,o=void 0;try{for(var i,a=t.shift()[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var s=i.value,c={actor:s.get("actor"),value:s.get("value")};"link"===s.get("action")&&(c.link=!0),s.get("datatype")&&(c.datatype=s.get("datatype")),e.push(c)}}catch(u){n=!0,o=u}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}return e}function b(t,e,r,n,o,i){var a="makeText"===t.getIn(["byObject",e,"_init","action"])?"text":"list",s=i?i.first():null,c=t.getIn(["byObject",e,"_elemIds"]),u=s?s.get("value"):null,g={action:o,type:a,obj:e,index:r,path:m(t,e)};if(s&&"link"===s.get("action")&&(g.link=!0,u={obj:s.get("value")}),"insert"===o)c=c.insertIndex(r,s.get("key"),u),g.elemId=n,g.value=s.get("value"),s.get("datatype")&&(g.datatype=s.get("datatype"));else if("set"===o)c=c.setValue(s.get("key"),u),g.value=s.get("value"),s.get("datatype")&&(g.datatype=s.get("datatype"));else{if("remove"!==o)throw new Error("Unknown action type: "+o);c=c.removeIndex(r)}return i&&i.size>1&&(g.conflicts=_(i)),[t=t.setIn(["byObject",e,"_elemIds"],c),[g]]}function S(t,e,r,n){var o=I(t,e,n),i=o.first(),a={action:"",type:r,obj:e,key:n,path:m(t,e)};return o.isEmpty()?a.action="remove":(a.action="set",a.value=i.get("value"),"link"===i.get("action")&&(a.link=!0),i.get("datatype")&&(a.datatype=i.get("datatype")),o.size>1&&(a.conflicts=_(o))),[t,[a]]}function w(t,e,r){var n=e.get("obj"),o=t.getIn(["byObject",n,"_init","action"]);if(!t.get("byObject").has(n))throw new Error("Modification of unknown object "+n);if(t.has("undoLocal")&&r){var i=void 0;(i="inc"===e.get("action")?s.of(a({action:"inc",obj:n,key:e.get("key"),value:-e.get("value")})):t.getIn(["byObject",n,"_keys",e.get("key")],s()).map(function(t){return t.filter(function(t,e){return["action","obj","key","value","datatype"].includes(e)})})).isEmpty()&&(i=s.of(a({action:"del",obj:n,key:e.get("key")}))),t=t.update("undoLocal",function(t){return t.concat(i)})}var u=t.getIn(["byObject",n,"_keys",e.get("key")],s()),g=void 0,f=void 0;if("inc"===e.get("action"))g=s(),f=u.map(function(r){return"set"!==r.get("action")||"number"!=typeof r.get("value")||"counter"!==r.get("datatype")||p(t,r,e)?r:r.set("value",r.get("value")+e.get("value"))});else{var h=u.groupBy(function(r){return!!p(t,r,e)});g=h.get(!1,s()),f=h.get(!0,s())}var d=function(e){t=t.updateIn(["byObject",e.get("value"),"_inbound"],function(t){return t.remove(e)})},m=!0,y=!1,v=void 0;try{for(var _,w=g.filter(function(t){return"link"===t.get("action")})[Symbol.iterator]();!(m=(_=w.next()).done);m=!0){d(_.value)}}catch(E){y=!0,v=E}finally{try{!m&&w.return&&w.return()}finally{if(y)throw v}}if("link"===e.get("action")&&(t=t.updateIn(["byObject",e.get("value"),"_inbound"],c(),function(t){return t.add(e)})),["set","link"].includes(e.get("action"))&&(f=f.push(e)),f=f.sortBy(function(t){return t.get("actor")}).reverse(),t=t.setIn(["byObject",n,"_keys",e.get("key")],f),n===l||"makeMap"===o)return S(t,n,"map",e.get("key"));if("makeTable"===o)return S(t,n,"table",e.get("key"));if("makeList"===o||"makeText"===o)return function(t,e,r){var n=I(t,e,r),o=t.getIn(["byObject",e,"_elemIds"]),i=o.indexOf(r);if(i>=0)return n.isEmpty()?b(t,e,i,r,"remove",null):b(t,e,i,r,"set",n);if(n.isEmpty())return[t,[]];for(var a=r;i=-1,(a=C(t,e,a))&&!((i=o.indexOf(a))>=0););return b(t,e,i+1,r,"insert",n)}(t,n,e.get("key"));throw new RangeError("Unknown operation type "+o)}function E(t){for(var e={},r=[],n=t.length-1;n>=0;n--){var o=t[n],i=o.obj,a=o.action;if("maxElem"===a)(void 0===e[i]||e[i]<o.value)&&(e[i]=o.value,r.push(o));else if("insert"===a){var s=f(o.elemId).counter;(void 0===e[i]||e[i]<s)&&(e[i]=s),r.push(o)}else r.push(o)}return r.reverse()}function O(t,e){var r=e.get("actor"),n=e.get("seq"),i=t.getIn(["states",r],s());if(n<=i.size){if(!i.get(n-1).get("change").equals(e))throw new Error("Inconsistent reuse of sequence number "+n+" by "+r);return[t,[]]}var u,g=d(t,e.get("deps").set(r,n-1)),l=function(t,e){var r=[],n=c(),i=!0,a=!1,s=void 0;try{for(var u,g=e[Symbol.iterator]();!(i=(u=g.next()).done);i=!0){var l=u.value,f=void 0,p=l.get("action");if(["makeMap","makeList","makeText","makeTable"].includes(p)){n=n.add(l.get("obj"));var h=y(t,l),d=o(h,2);t=d[0],f=d[1]}else if("ins"===p){var m=v(t,l),_=o(m,2);t=_[0],f=_[1]}else{if(!["set","del","link","inc"].includes(p))throw new RangeError("Unknown operation type "+p);var b=w(t,l,!n.contains(l.get("obj"))),S=o(b,2);t=S[0],f=S[1]}var O=!0,j=!1,I=void 0;try{for(var T,A=f[Symbol.iterator]();!(O=(T=A.next()).done);O=!0){var k=T.value;r.push(k)}}catch(x){j=!0,I=x}finally{try{!O&&A.return&&A.return()}finally{if(j)throw I}}}}catch(x){a=!0,s=x}finally{try{!i&&g.return&&g.return()}finally{if(a)throw s}}return[t,E(r)]}(t=t.setIn(["states",r],i.push(a({change:e,allDeps:g}))),e.get("ops").map(function(t){return t.merge({actor:r,seq:n})})),f=o(l,2);t=f[0],u=f[1];var p=t.get("deps").filter(function(t,e){return t>g.get(e,0)}).set(r,n);return[t=t.set("deps",p).setIn(["clock",r],n).update("history",function(t){return t.push(e)}),u]}function j(t){for(var e=s(),r=void 0,n=[];;){var i=!0,a=!1,c=void 0;try{for(var u,g=t.get("queue")[Symbol.iterator]();!(i=(u=g.next()).done);i=!0){var l=u.value;if(h(t,l)){var f=O(t,l),p=o(f,2);t=p[0],r=p[1];var d=!0,m=!1,y=void 0;try{for(var v,_=r[Symbol.iterator]();!(d=(v=_.next()).done);d=!0){var b=v.value;n.push(b)}}catch(S){m=!0,y=S}finally{try{!d&&_.return&&_.return()}finally{if(m)throw y}}}else e=e.push(l)}}catch(S){a=!0,c=S}finally{try{!i&&g.return&&g.return()}finally{if(a)throw c}}if(e.count()===t.get("queue").count())return[t,n];t=t.set("queue",e),e=s()}}function I(t,e,r){return t.getIn(["byObject",e,"_keys",r],s())}function T(t,e,r){if("_head"!==r){var n=t.getIn(["byObject",e,"_insertion",r]);if(!n)throw new TypeError("Missing index entry for list element "+r);return n.get("key")}}function A(t,e){return t.get("elem")<e.get("elem")?-1:t.get("elem")>e.get("elem")?1:t.get("actor")<e.get("actor")?-1:t.get("actor")>e.get("actor")?1:0}function k(t,e,r,n){var o=null;if(n){var i=f(n);o=a({actor:i.actorId,elem:i.counter})}return t.getIn(["byObject",e,"_following",r],s()).filter(function(t){return"ins"===t.get("action")}).filter(function(t){return!o||A(t,o)<0}).sort(A).reverse().map(function(t){return t.get("actor")+":"+t.get("elem")})}function x(t,e,r){var n=k(t,e,r);if(!n.isEmpty())return n.first();for(var o=void 0;;){if(!(o=T(t,e,r)))return;var i=k(t,e,o,r);if(!i.isEmpty())return i.first();r=o}}function C(t,e,r){var n=T(t,e,r),o=k(t,e,n);if(o.first()===r)return"_head"===n?null:n;var i=void 0,a=!0,s=!1,c=void 0;try{for(var u,g=o[Symbol.iterator]();!(a=(u=g.next()).done);a=!0){var l=u.value;if(l===r)break;i=l}}catch(f){s=!0,c=f}finally{try{!a&&g.return&&g.return()}finally{if(s)throw c}}for(;;){if((o=k(t,e,i)).isEmpty())return i;i=o.last()}}function M(t,e,r){if("object"!==(void 0===e?"undefined":n(e))||null===e)return e;if("link"===e.get("action"))return r.instantiateObject(t,e.get("value"));if("set"===e.get("action")){var o={value:e.get("value")};return e.get("datatype")&&(o.datatype=e.get("datatype")),o}throw new TypeError("Unexpected operation action: "+e.get("action"))}t.exports={init:function(){return a().set("states",a()).set("history",s()).set("byObject",a().set(l,a().set("_keys",a()))).set("clock",a()).set("deps",a()).set("undoPos",0).set("undoStack",s()).set("redoStack",s()).set("queue",s())},addChange:function(t,e,r){if(t=t.update("queue",function(t){return t.push(e)}),r){var n,i=j(t=t.set("undoLocal",s())),a=o(i,2);return t=a[0],n=a[1],[t=function(t){var e=t.get("undoPos");return t.update("undoStack",function(r){return r.slice(0,e).push(t.get("undoLocal"))}).set("undoPos",e+1).set("redoStack",s()).remove("undoLocal")}(t),n]}return j(t)},getMissingChanges:function(t,e){var r=d(t,e);return t.get("states").map(function(t,e){return t.skip(r.get(e,0))}).valueSeq().flatten(1).map(function(t){return t.get("change")})},getChangesForActor:function(t,e,r){return r=r||0,t.get("states").filter(function(t,r){return r===e}).map(function(t,e){return t.skip(r)}).valueSeq().flatten(1).map(function(t){return t.get("change")})},getMissingDeps:function(t){var e={},r=!0,n=!1,o=void 0;try{for(var i,a=t.get("queue")[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var s=i.value;s.get("deps").set(s.get("actor"),s.get("seq")-1).forEach(function(r,n){t.getIn(["clock",n],0)<r&&(e[n]=Math.max(r,e[n]||0))})}}catch(c){n=!0,o=c}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}return e},getObjectFields:function(t,e){return t.getIn(["byObject",e,"_keys"]).keySeq().filter(function(r){return function(t,e,r){return!I(t,e,r).isEmpty()}(t,e,r)}).toSet()},getObjectField:function(t,e,r,n){var o=I(t,e,r);if(!o.isEmpty())return M(t,o.first(),n)},getObjectConflicts:function(t,e,r){return t.getIn(["byObject",e,"_keys"]).filter(function(r,n){return I(t,e,n).size>1}).mapEntries(function(e){var n=o(e,2);return[n[0],n[1].shift().toMap().mapEntries(function(e){var n=o(e,2),i=(n[0],n[1]);return[i.get("actor"),M(t,i,r)]})]})},getFieldOps:I,listElemByIndex:function(t,e,r,n){var o=t.getIn(["byObject",e,"_elemIds"]).keyOf(r);if(o){var i=I(t,e,o);if(!i.isEmpty())return M(t,i.first(),n)}},listLength:function(t,e){return t.getIn(["byObject",e,"_elemIds"]).length},listIterator:function(t,e,r){var n="_head",i=-1,a={next:function(){for(;n;){if(!(n=x(t,e,n)))return{done:!0};var a={elemId:n},s=I(t,e,n);return s.isEmpty()||(i+=1,a.index=i,a.value=M(t,s.first(),r),a.conflicts=null,s.size>1&&(a.conflicts=s.shift().toMap().mapEntries(function(e){var n=o(e,2),i=(n[0],n[1]);return[i.get("actor"),M(t,i,r)]}))),{done:!1,value:a}}}};return a[Symbol.iterator]=function(){return a},a},ROOT_ID:l}},"./backend/skip_list.js":function(t,e,r){"use strict";var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r("./node_modules/immutable/dist/immutable.js").Map;var a=function(){function t(e,r,n,i,a,s,c){o(this,t),this.key=e,this.value=r,this.level=n,this.prevKey=i,this.nextKey=a,this.prevCount=s,this.nextCount=c}return n(t,[{key:"setValue",value:function(e){return new t(this.key,e,this.level,this.prevKey,this.nextKey,this.prevCount,this.nextCount)}},{key:"insertAfter",value:function(e,r,n,o){if(r>this.level&&null!==this.key)throw new RangeError("Cannot increase the level of a non-head node");for(var i=Math.max(this.level,r),a=this.nextKey.slice(),s=this.nextCount.slice(),c=n;c<i;c++)c<r?(a[c]=e,s[c]=o):s[c]+=1;return new t(this.key,this.value,i,this.prevKey,a,this.prevCount,s)}},{key:"insertBefore",value:function(e,r,n,o){if(r>this.level)throw new RangeError("Cannot increase node level");for(var i=this.prevKey.slice(),a=this.prevCount.slice(),s=n;s<this.level;s++)s<r?(i[s]=e,a[s]=o):a[s]+=1;return new t(this.key,this.value,this.level,i,this.nextKey,a,this.nextCount)}},{key:"removeAfter",value:function(e,r,n,o){for(var i=this.nextKey.slice(),a=this.nextCount.slice(),s=e;s<this.level;s++)s<r?(i[s]=n[s],a[s]=o[s]):a[s]-=1;return new t(this.key,this.value,this.level,this.prevKey,i,this.prevCount,a)}},{key:"removeBefore",value:function(e,r,n,o){for(var i=this.prevKey.slice(),a=this.prevCount.slice(),s=e;s<this.level;s++)s<r?(i[s]=n[s],a[s]=o[s]):a[s]-=1;return new t(this.key,this.value,this.level,i,this.nextKey,a,this.nextCount)}}]),t}(),s=function(){function t(e){o(this,t);var r=new a(null,null,1,[],[null],[],[null]),n=e?e():{next:function(){for(var t=Math.floor(4294967296*Math.random()),e=1;t<1<<32-2*e&&e<16;)e+=1;return{value:e,done:!1}}};return c(0,i().set(null,r),n)}return n(t,[{key:"predecessors",value:function(t,e){for(var r=[t],n=[1],o=1;o<e;o++){for(var i=r[o-1],a=n[o-1];i;){var s=this._nodes.get(i);if(s.level>o)break;if(s.level<o)throw new RangeError("Node "+i+" below expected level "+(o-1));a+=s.prevCount[o-1],i=s.prevKey[o-1]}r[o]=i,n[o]=a}return{preKeys:r,preCounts:n}}},{key:"successors",value:function(t,e){for(var r=[t],n=[1],o=1;o<e;o++){for(var i=r[o-1],a=n[o-1];i;){var s=this._nodes.get(i);if(s.level>o)break;if(s.level<o)throw new RangeError("Node "+i+" below expected level "+(o-1));a+=s.nextCount[o-1],i=s.nextKey[o-1]}r[o]=i,n[o]=a}return{sucKeys:r,sucCounts:n}}},{key:"insertAfter",value:function(t,e,r){if("string"!=typeof e||""===e)throw new RangeError("Key must be a nonempty string");if(!this._nodes.has(t))throw new RangeError("The referenced predecessor key does not exist");if(this._nodes.has(e))throw new RangeError("Cannot insert a key that already exists");var n=this._randomSource.next().value,o=Math.max(n,this.headNode.level),i=this._nodes.get(t).nextKey[0]||null,s=this.predecessors(t,o),u=s.preKeys,g=s.preCounts,l=this.successors(i,o),f=l.sucKeys,p=l.sucCounts;return c(this.length+1,this._nodes.withMutations(function(t){for(var i=0,s=0,c=function(r){var a=Math.min(r,n);r!==o&&u[r]===u[i]||(t.update(u[i],function(t){return t.insertAfter(e,a,i,g[i])}),i=r),!f[s]||r!==o&&f[r]===f[s]||(t.update(f[s],function(t){return t.insertBefore(e,a,s,p[s])}),s=r)},l=1;l<=o;l++)c(l);t.set(e,new a(e,r,n,u.slice(0,n),f.slice(0,n),g.slice(0,n),p.slice(0,n)))}),this._randomSource)}},{key:"insertIndex",value:function(t,e,r){if("number"!=typeof t||t<0)throw new RangeError("Index must be a non-negative integer");return 0===t?this.insertAfter(null,e,r):this.insertAfter(this.keyOf(t-1),e,r)}},{key:"removeKey",value:function(t){if("string"!=typeof t||!this._nodes.has(t))throw new RangeError("The given key cannot be removed because it does not exist");for(var e=this._nodes.get(t),r=this.headNode.level,n=this.predecessors(e.prevKey[0],r),o=n.preKeys,i=n.preCounts,a=this.successors(e.nextKey[0],r),s=a.sucKeys,u=a.sucCounts,g=new Array(r),l=0;l<r;l++)g[l]=i[l]+u[l]-1;return c(this.length-1,this._nodes.withMutations(function(n){n.remove(t);for(var i=0,a=0,c=function(t){var c=Math.min(t,e.level);t!==r&&o[t]===o[i]||(n.update(o[i],function(t){return t.removeAfter(i,c,s,g)}),i=t),!s[a]||t!==r&&s[t]===s[a]||(n.update(s[a],function(t){return t.removeBefore(a,c,o,g)}),a=t)},u=1;u<=r;u++)c(u)}),this._randomSource)}},{key:"removeIndex",value:function(t){return this.removeKey(this.keyOf(t))}},{key:"indexOf",value:function(t){if("string"!=typeof t||""===t||!this._nodes.has(t))return-1;for(var e=this._nodes.get(t),r=0;e&&e.key;)r+=e.prevCount[e.level-1],e=this._nodes.get(e.prevKey[e.level-1]);return r-1}},{key:"keyOf",value:function(t){if("number"!=typeof t)return null;if(t<0&&(t+=this.length),t<0||t>=this.length)return null;for(var e=this._nodes.get(null),r=e.level-1,n=0;;){if(n===t+1)return e.key;n+e.nextCount[r]>t+1?r-=1:(n+=e.nextCount[r],e=this._nodes.get(e.nextKey[r]))}}},{key:"getValue",value:function(t){if("string"!=typeof t||""===t)throw new RangeError("Key must be a nonempty string");var e=this._nodes.get(t);return e&&e.value}},{key:"setValue",value:function(t,e){if("string"!=typeof t||""===t)throw new RangeError("Key must be a nonempty string");var r=this._nodes.get(t);if(!r)throw new RangeError("The referenced key does not exist");return r=r.setValue(e),c(this.length,this._nodes.set(t,r),this._randomSource)}},{key:"iterator",value:function(t){var e=this,r=this._nodes,n=r.get(null).nextKey[0];return function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}({next:function(){if(!n)return{value:void 0,done:!0};var e=r.get(n),o=void 0;switch(t){case"keys":o={value:n,done:!1};break;case"values":o={value:e.value,done:!1};break;case"entries":o={value:[n,e.value],done:!1}}return n=e.nextKey[0],o}},Symbol.iterator,function(){return e.iterator(t)})}},{key:Symbol.iterator,value:function(){return this.iterator("values")}},{key:"headNode",get:function(){return this._nodes.get(null)}}]),t}();function c(t,e,r){var n=Object.create(s.prototype);return n.length=t,n._nodes=e,n._randomSource=r,n}t.exports={SkipList:s}},"./frontend/apply_patch.js":function(t,e,r){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}var o=r("./src/common.js"),i=o.ROOT_ID,a=o.isObject,s=o.copyObject,c=o.parseElemId,u=r("./frontend/constants.js"),g=u.OPTIONS,l=u.OBJECT_ID,f=u.CONFLICTS,p=u.ELEM_IDS,h=u.MAX_ELEM,d=r("./frontend/text.js"),m=(d.Text,d.instantiateText),y=r("./frontend/table.js"),v=y.Table,_=y.instantiateTable,b=r("./frontend/counter.js").Counter;function S(t,e,r){if(t.link)return r[t.value]||e[t.value];if("timestamp"===t.datatype)return new Date(t.value);if("counter"===t.datatype)return new b(t.value);if(void 0!==t.datatype)throw new TypeError("Unknown datatype: "+t.datatype);return t.value}function w(t,e){var r={},n=t[f][e]||{},o=[t[e]].concat(Object.values(n)),i=!0,s=!1,c=void 0;try{for(var u,g=o[Symbol.iterator]();!(i=(u=g.next()).done);i=!0){var p=u.value;a(p)&&p[l]&&(r[p[l]]=!0)}}catch(h){s=!0,c=h}finally{try{!i&&g.return&&g.return()}finally{if(s)throw c}}return r}function E(t,e,r,n){var o=!0,i=!1,a=void 0;try{for(var s,c=Object.keys(e)[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;r[u]||delete n[u]}}catch(m){i=!0,a=m}finally{try{!o&&c.return&&c.return()}finally{if(i)throw a}}var g=!0,l=!1,f=void 0;try{for(var p,h=Object.keys(r)[Symbol.iterator]();!(g=(p=h.next()).done);g=!0){var d=p.value;if(n[d]&&n[d]!==t)throw new RangeError("Object "+d+" has multiple parents");n[d]||(n[d]=t)}}catch(m){l=!0,f=m}finally{try{!g&&h.return&&h.return()}finally{if(l)throw f}}}function O(t,e){if(t&&t[l]!==e)throw new RangeError("cloneMapObject ID mismatch: "+t[l]+" !== "+e);var r=s(t),n=s(t?t[f]:void 0);return Object.defineProperty(r,f,{value:n}),Object.defineProperty(r,l,{value:e}),r}function j(t,e,r,n){r[t.obj]||(r[t.obj]=O(e[t.obj],t.obj));var o=r[t.obj],i=o[f],a={},s={};if("create"===t.action);else if("set"===t.action){if(a=w(o,t.key),o[t.key]=S(t,e,r),t.conflicts){i[t.key]={};var c=!0,u=!1,g=void 0;try{for(var l,p=t.conflicts[Symbol.iterator]();!(c=(l=p.next()).done);c=!0){var h=l.value;i[t.key][h.actor]=S(h,e,r)}}catch(d){u=!0,g=d}finally{try{!c&&p.return&&p.return()}finally{if(u)throw g}}Object.freeze(i[t.key])}else delete i[t.key];s=w(o,t.key)}else{if("remove"!==t.action)throw new RangeError("Unknown action type: "+t.action);a=w(o,t.key),delete o[t.key],delete i[t.key]}E(t.obj,a,s,n)}function I(t,e,r){r[t]||(r[t]=O(e[t],t));var n=r[t],o=!0,c=!1,u=void 0;try{for(var p,h=Object.keys(n)[Symbol.iterator]();!(o=(p=h.next()).done);o=!0){var d=p.value,m=n[d];a(m)&&r[m[l]]&&(n[d]=r[m[l]]);var y=n[f][d]||{},v=null,_=!0,b=!1,S=void 0;try{for(var w,E=Object.keys(y)[Symbol.iterator]();!(_=(w=E.next()).done);_=!0){var j=w.value;m=y[j],a(m)&&r[m[l]]&&(v||(v=s(y),n[f][d]=v),v[j]=r[m[l]])}}catch(I){b=!0,S=I}finally{try{!_&&E.return&&E.return()}finally{if(b)throw S}}v&&e[i][g].freeze&&Object.freeze(v)}}catch(I){c=!0,u=I}finally{try{!o&&h.return&&h.return()}finally{if(c)throw u}}}function T(t,e,r,n){r[t.obj]||(r[t.obj]=e[t.obj]?e[t.obj]._clone():_(t.obj));var o=r[t.obj],i={},s={};if("create"===t.action);else if("set"===t.action){var c=o.byId(t.key);a(c)&&(i[c[l]]=!0),t.link?(o._set(t.key,r[t.value]||e[t.value]),s[t.value]=!0):o._set(t.key,t.value)}else{if("remove"!==t.action)throw new RangeError("Unknown action type: "+t.action);var u=o.byId(t.key);a(u)&&(i[u[l]]=!0),o.remove(t.key)}E(t.obj,i,s,n)}function A(t,e,r){r[t]||(r[t]=e[t]._clone());var n=r[t],o=!0,i=!1,s=void 0;try{for(var c,u=Object.keys(n.entries)[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var g=c.value,f=n.byId(g);a(f)&&r[f[l]]&&n._set(g,r[f[l]])}}catch(p){i=!0,s=p}finally{try{!o&&u.return&&u.return()}finally{if(i)throw s}}}function k(t,e){if(t&&t[l]!==e)throw new RangeError("cloneListObject ID mismatch: "+t[l]+" !== "+e);var r=t?t.slice():[],n=t&&t[f]?t[f].slice():[],o=t&&t[p]?t[p].slice():[],i=t&&t[h]?t[h]:0;return Object.defineProperty(r,l,{value:e}),Object.defineProperty(r,f,{value:n}),Object.defineProperty(r,p,{value:o}),Object.defineProperty(r,h,{value:i,writable:!0}),r}function x(t,e,r,n){r[t.obj]||(r[t.obj]=k(e[t.obj],t.obj));var o=r[t.obj],i=o[f],a=o[p],s=null,u=null;if(["insert","set"].includes(t.action)&&(s=S(t,e,r),t.conflicts)){u={};var g=!0,l=!1,d=void 0;try{for(var m,y=t.conflicts[Symbol.iterator]();!(g=(m=y.next()).done);g=!0){var v=m.value;u[v.actor]=S(v,e,r)}}catch(O){l=!0,d=O}finally{try{!g&&y.return&&y.return()}finally{if(l)throw d}}Object.freeze(u)}var _={},b={};if("create"===t.action);else if("insert"===t.action)o[h]=Math.max(o[h],c(t.elemId).counter),o.splice(t.index,0,s),i.splice(t.index,0,u),a.splice(t.index,0,t.elemId),b=w(o,t.index);else if("set"===t.action)_=w(o,t.index),o[t.index]=s,i[t.index]=u,b=w(o,t.index);else if("remove"===t.action)_=w(o,t.index),o.splice(t.index,1),i.splice(t.index,1),a.splice(t.index,1);else{if("maxElem"!==t.action)throw new RangeError("Unknown action type: "+t.action);o[h]=Math.max(o[h],t.value)}E(t.obj,_,b,n)}function C(t,e,r){r[t]||(r[t]=k(e[t],t));for(var n=r[t],o=0;o<n.length;o++){var c=n[o];a(c)&&r[c[l]]&&(n[o]=r[c[l]]);var u=n[f][o]||{},p=null,h=!0,d=!1,m=void 0;try{for(var y,v=Object.keys(u)[Symbol.iterator]();!(h=(y=v.next()).done);h=!0){var _=y.value;c=u[_],a(c)&&r[c[l]]&&(p||(p=s(u),n[f][o]=p),p[_]=r[c[l]])}}catch(b){d=!0,m=b}finally{try{!h&&v.return&&v.return()}finally{if(d)throw m}}p&&e[i][g].freeze&&Object.freeze(p)}}function M(t,e,r,o,i){var a=t[e].obj;if(!i[a])if(o[a]){var s=o[a].elems.slice(),u=o[a][h];i[a]=m(a,s,u)}else i[a]=m(a,[],0);for(var g=i[a].elems,l=i[a][h],f=-1,p=void 0,d=void 0;e<=r;){var y=t[e];if("create"===y.action);else if("insert"===y.action){f<0&&(f=y.index,p=0,d=[]),l=Math.max(l,c(y.elemId).counter);var v=S(y,o,i);d.push({elemId:y.elemId,value:v,conflicts:y.conflicts}),e!==r&&"insert"===t[e+1].action&&t[e+1].index===y.index+1||(g.splice.apply(g,[f,p].concat(n(d))),f=-1)}else if("set"===y.action)g[y.index]={elemId:g[y.index].elemId,value:S(y,o,i),conflicts:y.conflicts};else if("remove"===y.action)f<0&&(f=y.index,p=0,d=[]),p+=1,e!==r&&["insert","remove"].includes(t[e+1].action)&&t[e+1].index===y.index||(g.splice(f,p),f=-1);else{if("maxElem"!==y.action)throw new RangeError("Unknown action type: "+y.action);l=Math.max(l,y.value)}e+=1}i[a]=m(a,g,l)}t.exports={applyDiffs:function(t,e,r,n){for(var o=0,i=0;i<t.length;i++){var a=t[i];if("map"===a.type)j(a,e,r,n),o=i+1;else if("table"===a.type)T(a,e,r,n),o=i+1;else if("list"===a.type)x(a,e,r,n),o=i+1;else{if("text"!==a.type)throw new TypeError("Unknown object type: "+a.type);i!==t.length-1&&t[i+1].obj===a.obj||(M(t,o,i,e,r),o=i+1)}}},updateParentObjects:function(t,e,r){for(var n=e;Object.keys(n).length>0;){var o={},i=!0,a=!1,s=void 0;try{for(var c,u=Object.keys(n)[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var g=r[c.value];g&&(o[g]=!0)}}catch(y){a=!0,s=y}finally{try{!i&&u.return&&u.return()}finally{if(a)throw s}}n=o;var l=!0,f=!1,p=void 0;try{for(var h,d=Object.keys(o)[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var m=h.value;Array.isArray(e[m]||t[m])?C(m,t,e):(e[m]||t[m])instanceof v?A(m,t,e):I(m,t,e)}}catch(y){f=!0,p=y}finally{try{!l&&d.return&&d.return()}finally{if(f)throw p}}}},cloneRootObject:function(t){if(t[l]!==i)throw new RangeError("Not the root object: "+t[l]);return O(t,i)}}},"./frontend/constants.js":function(t,e,r){"use strict";var n=Symbol("_options"),o=Symbol("_cache"),i=Symbol("_inbound"),a=Symbol("_state"),s=Symbol("_objectId"),c=Symbol("_conflicts"),u=Symbol("_change"),g=Symbol("_elemIds"),l=Symbol("_maxElem");t.exports={OPTIONS:n,CACHE:o,INBOUND:i,STATE:a,OBJECT_ID:s,CONFLICTS:c,CHANGE:u,ELEM_IDS:g,MAX_ELEM:l}},"./frontend/context.js":function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();var i=r("./frontend/constants.js"),a=i.CACHE,s=i.INBOUND,c=i.OBJECT_ID,u=i.CONFLICTS,g=i.MAX_ELEM,l=r("./frontend/apply_patch.js").applyDiffs,f=r("./frontend/text.js"),p=f.Text,h=f.getElemId,d=r("./frontend/table.js").Table,m=r("./frontend/counter.js"),y=m.Counter,v=m.getWriteableCounter,_=r("./src/common.js"),b=_.isObject,S=_.copyObject,w=r("./src/uuid.js"),E=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.actorId=r,this.cache=e[a],this.updated={},this.inbound=S(e[s]),this.ops=[],this.diffs=[]}return o(t,[{key:"addOp",value:function(t){this.ops.push(t)}},{key:"apply",value:function(t){this.diffs.push(t),l([t],this.cache,this.updated,this.inbound)}},{key:"getObject",value:function(t){var e=this.updated[t]||this.cache[t];if(!e)throw new RangeError("Target object does not exist: "+t);return e}},{key:"getObjectField",value:function(t,e){if(["string","number"].includes(void 0===e?"undefined":n(e))){var r=this.getObject(t);return r[e]instanceof y?v(r[e].value,this,t,e):b(r[e])?this.instantiateObject(r[e][c]):r[e]}}},{key:"createNestedObjects",value:function(t){if("string"==typeof t[c])throw new TypeError("Cannot assign an object that already belongs to an Automerge document. See https://github.com/automerge/automerge#making-fine-grained-changes");var e=w();if(t instanceof p){this.apply({action:"create",type:"text",obj:e}),this.addOp({action:"makeText",obj:e}),t.length>0&&this.splice(e,0,0,[].concat(function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}(t)));var r=this.getObject(e);t[c]=e,t.elems=r.elems,t[g]=r.maxElem,t.context=this}else if(t instanceof d){if(t.count>0)throw new RangeError("Assigning a non-empty Table object is not supported");this.apply({action:"create",type:"table",obj:e}),this.addOp({action:"makeTable",obj:e})}else if(Array.isArray(t))this.apply({action:"create",type:"list",obj:e}),this.addOp({action:"makeList",obj:e}),this.splice(e,0,0,t);else{this.apply({action:"create",type:"map",obj:e}),this.addOp({action:"makeMap",obj:e});var n=!0,o=!1,i=void 0;try{for(var a,s=Object.keys(t)[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;this.setMapKey(e,"map",u,t[u])}}catch(l){o=!0,i=l}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}}return e}},{key:"setValue",value:function(t,e,r){if(!["object","boolean","number","string"].includes(void 0===r?"undefined":n(r)))throw new TypeError("Unsupported type of value: "+(void 0===r?"undefined":n(r)));if(b(r)){if(r instanceof Date){var o=r.getTime();return this.addOp({action:"set",obj:t,key:e,value:o,datatype:"timestamp"}),{value:o,datatype:"timestamp"}}if(r instanceof y)return this.addOp({action:"set",obj:t,key:e,value:r.value,datatype:"counter"}),{value:r.value,datatype:"counter"};var i=this.createNestedObjects(r);return this.addOp({action:"link",obj:t,key:e,value:i}),{value:i,link:!0}}return this.addOp({action:"set",obj:t,key:e,value:r}),{value:r}}},{key:"setMapKey",value:function(t,e,r,o){if("string"!=typeof r)throw new RangeError("The key of a map entry must be a string, not "+(void 0===r?"undefined":n(r)));if(""===r)throw new RangeError("The key of a map entry must not be an empty string");var i=this.getObject(t);if(i[r]instanceof y)throw new RangeError("Cannot overwrite a Counter object; use .increment() or .decrement() to change its value.");if(i[r]!==o||i[u][r]||void 0===o){var a=this.setValue(t,r,o);this.apply(Object.assign({action:"set",type:e,obj:t,key:r},a))}}},{key:"deleteMapKey",value:function(t,e){void 0!==this.getObject(t)[e]&&(this.apply({action:"remove",type:"map",obj:t,key:e}),this.addOp({action:"del",obj:t,key:e}))}},{key:"insertListItem",value:function(t,e,r){var n=this.getObject(t);if(e<0||e>n.length)throw new RangeError("List index "+e+" is out of bounds for list of length "+n.length);var o=n[g]+1,i=n instanceof p?"text":"list",a=0===e?"_head":h(n,e-1),s=this.actorId+":"+o;this.addOp({action:"ins",obj:t,key:a,elem:o});var c=this.setValue(t,s,r);this.apply(Object.assign({action:"insert",type:i,obj:t,index:e,elemId:s},c)),this.getObject(t)[g]=o}},{key:"setListIndex",value:function(t,e,r){var n=this.getObject(t);if(e!==n.length){if(e<0||e>n.length)throw new RangeError("List index "+e+" is out of bounds for list of length "+n.length);if(n[e]instanceof y)throw new RangeError("Cannot overwrite a Counter object; use .increment() or .decrement() to change its value.");if(n[e]!==r||n[u][e]||void 0===r){var o=h(n,e),i=n instanceof p?"text":"list",a=this.setValue(t,o,r);this.apply(Object.assign({action:"set",type:i,obj:t,index:e},a))}}else this.insertListItem(t,e,r)}},{key:"splice",value:function(t,e,r,n){var o=this.getObject(t),i=o instanceof p?"text":"list";if(r>0){if(e<0||e>o.length-r)throw new RangeError(r+" deletions starting at index "+e+" are out of bounds for list of length "+o.length);for(var a=0;a<r;a++)this.addOp({action:"del",obj:t,key:h(o,e)}),this.apply({action:"remove",type:i,obj:t,index:e}),0===a&&(o=this.getObject(t))}for(var s=0;s<n.length;s++)this.insertListItem(t,e+s,n[s])}},{key:"addTableRow",value:function(t,e){if(!b(e)||Array.isArray(e))throw new TypeError("A table row must be an object");if(e[c])throw new TypeError("Cannot reuse an existing object as table row");if(e.id)throw new TypeError('A table row must not have an "id" property; it is generated automatically');var r=this.createNestedObjects(e);return this.apply({action:"set",type:"table",obj:t,key:r,value:r,link:!0}),this.addOp({action:"link",obj:t,key:r,value:r}),r}},{key:"deleteTableRow",value:function(t,e){this.apply({action:"remove",type:"table",obj:t,key:e}),this.addOp({action:"del",obj:t,key:e})}},{key:"increment",value:function(t,e,r){var n=this.getObject(t);if(!(n[e]instanceof y))throw new TypeError("Only counter values can be incremented");var o=n[e].value+r;if(Array.isArray(n)||n instanceof p){var i=h(n,e),a=n instanceof p?"text":"list";this.addOp({action:"inc",obj:t,key:i,value:r}),this.apply({action:"set",obj:t,type:a,index:e,value:o,datatype:"counter"})}else this.addOp({action:"inc",obj:t,key:e,value:r}),this.apply({action:"set",obj:t,type:"map",key:e,value:o,datatype:"counter"})}}]),t}();t.exports={Context:E}},"./frontend/counter.js":function(t,e,r){"use strict";var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(e){o(this,t),this.value=e||0,Object.freeze(this)}return n(t,[{key:"valueOf",value:function(){return this.value}},{key:"toString",value:function(){return this.valueOf().toString()}},{key:"toJSON",value:function(){return this.value}}]),t}(),a=function(t){function e(){return o(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i),n(e,[{key:"increment",value:function(t){return t="number"==typeof t?t:1,this.context.increment(this.objectId,this.key,t),this.value+=t,this.value}},{key:"decrement",value:function(t){return this.increment("number"==typeof t?-t:-1)}}]),e}();t.exports={Counter:i,getWriteableCounter:function(t,e,r,n){var o=Object.create(a.prototype);return o.value=t,o.context=e,o.objectId=r,o.key=n,o}}},"./frontend/index.js":function(t,e,r){"use strict";var n=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(c){o=!0,i=c}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var i=r("./frontend/constants.js"),a=i.OPTIONS,s=i.CACHE,c=i.INBOUND,u=i.STATE,g=i.OBJECT_ID,l=i.CONFLICTS,f=i.CHANGE,p=i.ELEM_IDS,h=r("./src/common.js"),d=h.ROOT_ID,m=h.isObject,y=h.copyObject,v=r("./src/uuid.js"),_=r("./frontend/apply_patch.js"),b=_.applyDiffs,S=_.updateParentObjects,w=_.cloneRootObject,E=r("./frontend/proxies.js").rootObjectProxy,O=r("./frontend/context.js").Context,j=r("./frontend/text.js").Text,I=r("./frontend/table.js").Table,T=r("./frontend/counter.js").Counter;function A(t,e,r,n){var o=e[d];if(o||(o=w(t[s][d]),e[d]=o),Object.defineProperty(o,a,{value:t[a]}),Object.defineProperty(o,s,{value:e}),Object.defineProperty(o,c,{value:r}),Object.defineProperty(o,u,{value:n}),t[a].freeze){var i=!0,g=!1,f=void 0;try{for(var p,h=Object.keys(e)[Symbol.iterator]();!(i=(p=h.next()).done);i=!0){var m=p.value;e[m]instanceof I?e[m]._freeze():(Object.freeze(e[m]),Object.freeze(e[m][l]))}}catch(O){g=!0,f=O}finally{try{!i&&h.return&&h.return()}finally{if(g)throw f}}}var y=!0,v=!1,_=void 0;try{for(var b,S=Object.keys(t[s])[Symbol.iterator]();!(y=(b=S.next()).done);y=!0){var E=b.value;e[E]||(e[E]=t[s][E])}}catch(O){v=!0,_=O}finally{try{!y&&S.return&&S.return()}finally{if(v)throw _}}return t[a].freeze&&(Object.freeze(e),Object.freeze(r)),o}function k(t,e,r,i){var s=R(t);if(!s)throw new Error("Actor ID must be initialized with setActorId() before making a change");var c=y(t[u]);c.seq+=1;var g=y(c.deps);delete g[s];var l={requestType:e,actor:s,seq:c.seq,deps:g};if(i&&void 0!==i.message&&(l.message=i.message),i&&!1===i.undoable&&(l.undoable=!1),r&&(l.ops=function(t){for(var e={},r=[],n=t.length-1;n>=0;n--){var i=t[n],a=i.obj,s=i.key,c=i.action;["set","del","link","inc"].includes(c)?e[a]?e[a][s]?"inc"===e[a][s].action&&["set","inc"].includes(c)&&(e[a][s].action=c,e[a][s].value+=i.value):(e[a][s]=i,r.push(i)):(e[a]=o({},s,i),r.push(i)):r.push(i)}return r.reverse()}(r.ops)),t[a].backend){var f=t[a].backend.applyLocalChange(c.backendState,l),p=n(f,2),h=p[0],d=p[1];return c.backendState=h,c.requests=[],[x(t,d,c,!0),l]}r||(r=new O(t,s));var m=y(l);return m.before=t,m.diffs=r.diffs,c.requests=c.requests.slice(),c.requests.push(m),[A(t,r.updated,r.inbound,c),l]}function x(t,e,r,n){var o=R(t),i=y(t[c]),a={};if(b(e.diffs,t[s],a,i),S(t[s],a,i),n){var u=e.clock?e.clock[o]:void 0;u&&u>r.seq&&(r.seq=u),r.deps=e.deps,r.canUndo=e.canUndo,r.canRedo=e.canRedo}return A(t,a,i,r)}function C(t,e){var r=[],n=!0,o=!1,i=void 0;try{t:for(var a,s=t.diffs[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=a.value;c=y(c);var u=!0,g=!1,l=void 0;try{for(var f,p=e.diffs[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value;if(c.obj===h.obj&&"list"===c.type&&["insert","set","remove"].includes(c.action)&&("insert"===h.action&&h.index<=c.index&&(c.index+=1),"remove"===h.action&&h.index<c.index&&(c.index-=1),"remove"===h.action&&h.index===c.index&&("set"===c.action&&(c.action="insert"),"remove"===c.action)))continue t}}catch(d){g=!0,l=d}finally{try{!u&&p.return&&p.return()}finally{if(g)throw l}}r.push(c)}}catch(d){o=!0,i=d}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}t.diffs=r}function M(t){if("string"==typeof t)t={actorId:t};else if(void 0===t)t={};else if(!m(t))throw new TypeError("Unsupported value for init() options: "+t);void 0!==t.actorId||t.deferActorId||(t.actorId=v());var e={},r=o({},d,e),n={seq:0,requests:[],deps:{},canUndo:!1,canRedo:!1};return t.backend&&(n.backendState=t.backend.init()),Object.defineProperty(e,g,{value:d}),Object.defineProperty(e,a,{value:Object.freeze(t)}),Object.defineProperty(e,l,{value:Object.freeze({})}),Object.defineProperty(e,s,{value:Object.freeze(r)}),Object.defineProperty(e,c,{value:Object.freeze({})}),Object.defineProperty(e,u,{value:Object.freeze(n)}),Object.freeze(e)}function L(t,e,r){if(t[g]!==d)throw new TypeError("The first argument to Automerge.change must be the document root");if(t[f])throw new TypeError("Calls to Automerge.change cannot be nested");if("function"==typeof e&&void 0===r){var n=[r,e];e=n[0],r=n[1]}if("string"==typeof e&&(e={message:e}),void 0!==e&&!m(e))throw new TypeError("Unsupported type of options");var o=R(t);if(!o)throw new Error("Actor ID must be initialized with setActorId() before making a change");var i=new O(t,o);return r(E(i)),0===Object.keys(i.updated).length?[t,null]:(S(t[s],i.updated,i.inbound),k(t,"change",i,e))}function D(t){return t[u].requests.some(function(t){return["undo","redo"].includes(t.requestType)})}function R(t){return t[u].actorId||t[a].actorId}t.exports={init:M,from:function(t,e){return L(M(e),"Initialization",function(e){return Object.assign(e,t)})},change:L,emptyChange:function(t,e){if("string"==typeof e&&(e={message:e}),void 0!==e&&!m(e))throw new TypeError("Unsupported type of options");var r=R(t);if(!r)throw new Error("Actor ID must be initialized with setActorId() before making a change");return k(t,"change",new O(t,r),e)},applyPatch:function(t,e){var r=y(t[u]),n=void 0;if(r.requests.length>0)if(n=r.requests[0].before,e.actor===R(t)&&void 0!==e.seq){if(r.requests[0].seq!==e.seq)throw new RangeError("Mismatched sequence number: patch "+e.seq+" does not match next request "+r.requests[0].seq);r.requests=r.requests.slice(1).map(y)}else r.requests=r.requests.slice().map(y);else n=t,r.requests=[];if(t[a].backend){if(!e.state)throw new RangeError("When an immediate backend is used, a patch must contain the new backend state");return r.backendState=e.state,r.requests=[],x(t,e,r,!0)}var o=x(n,e,r,!0),i=!0,s=!1,c=void 0;try{for(var g,l=r.requests[Symbol.iterator]();!(i=(g=l.next()).done);i=!0){var f=g.value;f.before=o,C(f,e),o=x(f.before,f,r,!1)}}catch(p){s=!0,c=p}finally{try{!i&&l.return&&l.return()}finally{if(s)throw c}}return o},canUndo:function(t){return!!t[u].canUndo&&!D(t)},undo:function(t,e){if("string"==typeof e&&(e={message:e}),void 0!==e&&!m(e))throw new TypeError("Unsupported type of options");if(!t[u].canUndo)throw new Error("Cannot undo: there is nothing to be undone");if(D(t))throw new Error("Can only have one undo in flight at any one time");return k(t,"undo",null,e)},canRedo:function(t){return!!t[u].canRedo&&!D(t)},redo:function(t,e){if("string"==typeof e&&(e={message:e}),void 0!==e&&!m(e))throw new TypeError("Unsupported type of options");if(!t[u].canRedo)throw new Error("Cannot redo: there is no prior undo");if(D(t))throw new Error("Can only have one redo in flight at any one time");return k(t,"redo",null,e)},getObjectId:function(t){return t[g]},getObjectById:function(t,e){var r=t[f];return r?r.instantiateObject(e):t[s][e]},getActorId:R,setActorId:function(t,e){var r=Object.assign({},t[u],{actorId:e});return A(t,{},t[c],r)},getConflicts:function(t,e){return t[l][e]},getBackendState:function(t){return t[u].backendState},getElementIds:function(t){return t[p]},Text:j,Table:I,Counter:T}},"./frontend/proxies.js":function(t,e,r){"use strict";var n=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(c){o=!0,i=c}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=r("./src/common.js").ROOT_ID,i=r("./frontend/constants.js"),a=i.OBJECT_ID,s=i.CHANGE,c=i.STATE,u=r("./frontend/text.js").Text,g=r("./frontend/table.js").Table;function l(t){if("string"==typeof t&&/^[0-9]+$/.test(t)&&(t=parseInt(t)),"number"!=typeof t)throw new TypeError("A list index must be a number, but you passed "+JSON.stringify(t));if(t<0||isNaN(t)||t===1/0||t===-1/0)throw new RangeError("A list index must be positive, but you passed "+t);return t}var f={get:function(t,e){var r=t.context,n=t.objectId;return e===a?n:e===s?r:e===c?{actorId:r.actorId}:r.getObjectField(n,e)},set:function(t,e,r){var n=t.context,o=t.objectId,i=t.readonly;if(Array.isArray(i)&&i.indexOf(e)>=0)throw new RangeError('Object property "'+e+'" cannot be modified');return n.setMapKey(o,"map",e,r),!0},deleteProperty:function(t,e){var r=t.context,n=t.objectId,o=t.readonly;if(Array.isArray(o)&&o.indexOf(e)>=0)throw new RangeError('Object property "'+e+'" cannot be modified');return r.deleteMapKey(n,e),!0},has:function(t,e){var r=t.context,n=t.objectId;return[a,s].includes(e)||e in r.getObject(n)},getOwnPropertyDescriptor:function(t,e){var r=t.context,n=t.objectId;if(e in r.getObject(n))return{configurable:!0,enumerable:!0,value:r.getObjectField(n,e)}},ownKeys:function(t){var e=t.context,r=t.objectId;return Object.keys(e.getObject(r))}},p={get:function(t,e){var r=n(t,2),o=r[0],i=r[1];return e===Symbol.iterator?o.getObject(i)[Symbol.iterator]:e===a?i:e===s?o:"length"===e?o.getObject(i).length:"string"==typeof e&&/^[0-9]+$/.test(e)?o.getObjectField(i,l(e)):function(t,e){for(var r={deleteAt:function(r,n){return t.splice(e,l(r),n||1,[]),this},fill:function(r,n,o){for(var i=t.getObject(e),a=l(n||0);a<l(o||i.length);a++)t.setListIndex(e,a,r);return this},indexOf:function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=r[a];if(o){for(var i=t.getObject(e),s=n;s<i.length;s++)if(i[s][a]===o)return s;return-1}return t.getObject(e).indexOf(r,n)},insertAt:function(r){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return t.splice(e,l(r),0,o),this},pop:function(){var r=t.getObject(e);if(0!=r.length){var n=t.getObjectField(e,r.length-1);return t.splice(e,r.length-1,1,[]),n}},push:function(){for(var r=t.getObject(e),n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];return t.splice(e,r.length,0,o),t.getObject(e).length},shift:function(){if(0!=t.getObject(e).length){var r=t.getObjectField(e,0);return t.splice(e,0,1,[]),r}},splice:function(r,n){var o=t.getObject(e);r=l(r),(void 0===n||n>o.length-r)&&(n=o.length-r);for(var i=[],a=0;a<n;a++)i.push(t.getObjectField(e,r+a));for(var s=arguments.length,c=Array(s>2?s-2:0),u=2;u<s;u++)c[u-2]=arguments[u];return t.splice(e,r,n,c),i},unshift:function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return t.splice(e,0,0,n),t.getObject(e).length}},n=function(n){var o=t.getObject(e);r[n]=function(){return o[n]()}},o=["entries","keys","values"],i=0;i<o.length;i++)n(o[i]);for(var s=function(n){r[n]=function(){for(var r,o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];var s=t.getObject(e).map(function(r,n){return t.getObjectField(e,n)});return(r=s[n]).call.apply(r,[s].concat(i))}},c=["concat","every","filter","find","findIndex","forEach","includes","join","lastIndexOf","map","reduce","reduceRight","slice","some","toLocaleString","toString"],u=0;u<c.length;u++)s(c[u]);return r}(o,i)[e]},set:function(t,e,r){var o=n(t,2),i=o[0],a=o[1];return i.setListIndex(a,l(e),r),!0},deleteProperty:function(t,e){var r=n(t,2),o=r[0],i=r[1];return o.splice(i,l(e),1,[]),!0},has:function(t,e){var r=n(t,2),o=r[0],i=r[1];return"string"==typeof e&&/^[0-9]+$/.test(e)?l(e)<o.getObject(i).length:["length",a,s].includes(e)},getOwnPropertyDescriptor:function(t,e){var r=n(t,2),o=r[0],i=r[1],s=o.getObject(i);if("length"===e)return{writable:!0,value:s.length};if(e===a)return{configurable:!1,enumerable:!1,value:i};if("string"==typeof e&&/^[0-9]+$/.test(e)){var c=l(e);if(c<s.length)return{configurable:!0,enumerable:!0,value:o.getObjectField(i,c)}}},ownKeys:function(t){var e=n(t,2),r=e[0],o=e[1],i=r.getObject(o),a=["length"],s=!0,c=!1,u=void 0;try{for(var g,l=Object.keys(i)[Symbol.iterator]();!(s=(g=l.next()).done);s=!0){var f=g.value;a.push(f)}}catch(p){c=!0,u=p}finally{try{!s&&l.return&&l.return()}finally{if(c)throw u}}return a}};function h(t,e,r){return new Proxy({context:t,objectId:e,readonly:r},f)}function d(t,e){var r=this.getObject(t);return Array.isArray(r)?function(t,e){return new Proxy([t,e],p)}(this,t):r instanceof u||r instanceof g?r.getWriteable(this):h(this,t,e)}t.exports={rootObjectProxy:function(t){return t.instantiateObject=d,h(t,o)}}},"./frontend/table.js":function(t,e,r){"use strict";var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r("./frontend/constants.js"),a=i.OBJECT_ID,s=i.CONFLICTS,c=r("./src/common.js"),u=c.isObject,g=c.copyObject;function l(t,e,r){var n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=a.value;if(e[c]!==r[c]){if("number"==typeof e[c]&&"number"==typeof r[c])return e[c]-r[c];var u=""+e[c],g=""+r[c];if(u!==g)return u<g?-1:1}}}catch(l){o=!0,i=l}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return 0}var f=function(){function t(){o(this,t),this.entries=Object.freeze({}),Object.freeze(this)}return n(t,[{key:"byId",value:function(t){return this.entries[t]}},{key:"filter",value:function(t,e){return this.rows.filter(t,e)}},{key:"find",value:function(t,e){return this.rows.find(t,e)}},{key:"map",value:function(t,e){return this.rows.map(t,e)}},{key:"sort",value:function(t){if("function"==typeof t)return this.rows.sort(t);if("string"==typeof t)return this.rows.sort(function(e,r){return l([t],e,r)});if(Array.isArray(t))return this.rows.sort(function(e,r){return l(t,e,r)});if(void 0===t)return this.rows.sort(function(t,e){return l(["id"],t,e)});throw new TypeError("Unsupported sorting argument: "+t)}},{key:Symbol.iterator,value:function(){var t=this.rows,e=-1;return{next:function(){return(e+=1)<t.length?{done:!1,value:t[e]}:{done:!0}}}}},{key:"_clone",value:function(){if(!this[a])throw new RangeError("clone() requires the objectId to be set");return h(this[a],g(this.entries))}},{key:"_set",value:function(t,e){if(Object.isFrozen(this.entries))throw new Error("A table can only be modified in a change function");u(e)&&!Array.isArray(e)&&Object.defineProperty(e,"id",{value:t,enumerable:!0}),this.entries[t]=e}},{key:"remove",value:function(t){if(Object.isFrozen(this.entries))throw new Error("A table can only be modified in a change function");delete this.entries[t]}},{key:"_freeze",value:function(){Object.freeze(this.entries),Object.freeze(this)}},{key:"getWriteable",value:function(t){if(!this[a])throw new RangeError("getWriteable() requires the objectId to be set");var e=Object.create(p.prototype);return e[a]=this[a],e.context=t,e.entries=this.entries,e}},{key:"toJSON",value:function(){var t={},e=!0,r=!1,n=void 0;try{for(var o,i=this.ids[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;t[a]=this.byId(a)}}catch(s){r=!0,n=s}finally{try{!e&&i.return&&i.return()}finally{if(r)throw n}}return t}},{key:"ids",get:function(){var t=this;return Object.keys(this.entries).filter(function(e){var r=t.entries[e];return u(r)&&r.id===e})}},{key:"count",get:function(){return this.ids.length}},{key:"rows",get:function(){var t=this;return this.ids.map(function(e){return t.byId(e)})}}]),t}(),p=function(t){function e(){return o(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,f),n(e,[{key:"byId",value:function(t){if(u(this.entries[t])&&this.entries[t].id===t)return this.context.instantiateObject(t,["id"])}},{key:"add",value:function(t){return this.context.addTableRow(this[a],t)}},{key:"remove",value:function(t){if(!u(this.entries[t])||this.entries[t].id!==t)throw new RangeError("There is no row with ID "+t+" in this table");this.context.deleteTableRow(this[a],t)}}]),e}();function h(t,e){var r=Object.create(f.prototype);return r[a]=t,r[s]=Object.freeze({}),r.entries=e||{},r}t.exports={Table:f,instantiateTable:h}},"./frontend/text.js":function(t,e,r){"use strict";var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function o(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}for(var i=r("./frontend/constants.js"),a=i.OBJECT_ID,s=i.ELEM_IDS,c=i.MAX_ELEM,u=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof e)return p(void 0,e.split("").map(function(t){return{value:t}}),void 0);if(Array.isArray(e))return p(void 0,e.map(function(t){return{value:t}}),void 0);if(void 0===e)return p(void 0,[],0);throw new TypeError("Unsupported initial value for Text: "+e)}return n(t,[{key:"get",value:function(t){return this.elems[t].value}},{key:"getElemId",value:function(t){return this.elems[t].elemId}},{key:Symbol.iterator,value:function(){var t=this.elems,e=-1;return{next:function(){return(e+=1)<t.length?{done:!1,value:t[e].value}:{done:!0}}}}},{key:"toString",value:function(){var t="",e=!0,r=!1,n=void 0;try{for(var o,i=this.elems[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;"string"==typeof a.value&&(t+=a.value)}}catch(s){r=!0,n=s}finally{try{!e&&i.return&&i.return()}finally{if(r)throw n}}return t}},{key:"toSpans",value:function(){var t=[],e="",r=!0,n=!1,o=void 0;try{for(var i,a=this.elems[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var s=i.value;"string"==typeof s.value?e+=s.value:(e.length>0&&(t.push(e),e=""),t.push(s.value))}}catch(c){n=!0,o=c}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}return e.length>0&&t.push(e),t}},{key:"toJSON",value:function(){return this.toString()}},{key:"getWriteable",value:function(t){if(!this[a])throw new RangeError("getWriteable() requires the objectId to be set");var e=p(this[a],this.elems,this[c]);return e.context=t,e}},{key:"set",value:function(t,e){if(this.context)this.context.setListIndex(this[a],t,e);else{if(this[a])throw new TypeError("Automerge.Text object cannot be modified outside of a change block");this.elems[t].value=e}return this}},{key:"insertAt",value:function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(this.context)this.context.splice(this[a],t,0,r);else{if(this[a])throw new TypeError("Automerge.Text object cannot be modified outside of a change block");var i;(i=this.elems).splice.apply(i,[t,0].concat(o(r.map(function(t){return{value:t}}))))}return this}},{key:"deleteAt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.context)this.context.splice(this[a],t,e,[]);else{if(this[a])throw new TypeError("Automerge.Text object cannot be modified outside of a change block");this.elems.splice(t,e)}return this}},{key:"length",get:function(){return this.elems.length}}]),t}(),g=function(t){u.prototype[t]=function(){for(var e,r=[].concat(o(this)),n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=r[t]).call.apply(e,[r].concat(i))}},l=["concat","every","filter","find","findIndex","forEach","includes","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toLocaleString"],f=0;f<l.length;f++){g(l[f])}function p(t,e,r){var n=Object.create(u.prototype);return n[a]=t,n.elems=e,n[c]=r,n}t.exports={Text:u,getElemId:function(t,e){return t instanceof u?t.getElemId(e):t[s][e]},instantiateText:p}},"./node_modules/immutable/dist/immutable.js":function(t,e,r){t.exports=function(){"use strict";var t=Array.prototype.slice;function e(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function r(t){return a(t)?t:K(t)}function n(t){return s(t)?t:W(t)}function o(t){return c(t)?t:G(t)}function i(t){return a(t)&&!u(t)?t:J(t)}function a(t){return!(!t||!t[l])}function s(t){return!(!t||!t[f])}function c(t){return!(!t||!t[p])}function u(t){return s(t)||c(t)}function g(t){return!(!t||!t[h])}e(n,r),e(o,r),e(i,r),r.isIterable=a,r.isKeyed=s,r.isIndexed=c,r.isAssociative=u,r.isOrdered=g,r.Keyed=n,r.Indexed=o,r.Set=i;var l="@@__IMMUTABLE_ITERABLE__@@",f="@@__IMMUTABLE_KEYED__@@",p="@@__IMMUTABLE_INDEXED__@@",h="@@__IMMUTABLE_ORDERED__@@",d=5,m=1<<d,y=m-1,v={},_={value:!1},b={value:!1};function S(t){return t.value=!1,t}function w(t){t&&(t.value=!0)}function E(){}function O(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=new Array(r),o=0;o<r;o++)n[o]=t[o+e];return n}function j(t){return void 0===t.size&&(t.size=t.__iterate(T)),t.size}function I(t,e){if("number"!=typeof e){var r=e>>>0;if(""+r!==e||4294967295===r)return NaN;e=r}return e<0?j(t)+e:e}function T(){return!0}function A(t,e,r){return(0===t||void 0!==r&&t<=-r)&&(void 0===e||void 0!==r&&e>=r)}function k(t,e){return C(t,e,0)}function x(t,e){return C(t,e,e)}function C(t,e,r){return void 0===t?r:t<0?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}var M=0,L=1,D=2,R="function"==typeof Symbol&&Symbol.iterator,q="@@iterator",N=R||q;function U(t){this.next=t}function P(t,e,r,n){var o=0===t?e:1===t?r:[e,r];return n?n.value=o:n={value:o,done:!1},n}function B(){return{value:void 0,done:!0}}function z(t){return!!V(t)}function H(t){return t&&"function"==typeof t.next}function $(t){var e=V(t);return e&&e.call(t)}function V(t){var e=t&&(R&&t[R]||t[q]);if("function"==typeof e)return e}function F(t){return t&&"number"==typeof t.length}function K(t){return null==t?it():a(t)?t.toSeq():function(t){var e=ct(t)||"object"==typeof t&&new et(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}(t)}function W(t){return null==t?it().toKeyedSeq():a(t)?s(t)?t.toSeq():t.fromEntrySeq():at(t)}function G(t){return null==t?it():a(t)?s(t)?t.entrySeq():t.toIndexedSeq():st(t)}function J(t){return(null==t?it():a(t)?s(t)?t.entrySeq():t:st(t)).toSetSeq()}U.prototype.toString=function(){return"[Iterator]"},U.KEYS=M,U.VALUES=L,U.ENTRIES=D,U.prototype.inspect=U.prototype.toSource=function(){return this.toString()},U.prototype[N]=function(){return this},e(K,r),K.of=function(){return K(arguments)},K.prototype.toSeq=function(){return this},K.prototype.toString=function(){return this.__toString("Seq {","}")},K.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},K.prototype.__iterate=function(t,e){return ut(this,t,e,!0)},K.prototype.__iterator=function(t,e){return gt(this,t,e,!0)},e(W,K),W.prototype.toKeyedSeq=function(){return this},e(G,K),G.of=function(){return G(arguments)},G.prototype.toIndexedSeq=function(){return this},G.prototype.toString=function(){return this.__toString("Seq [","]")},G.prototype.__iterate=function(t,e){return ut(this,t,e,!1)},G.prototype.__iterator=function(t,e){return gt(this,t,e,!1)},e(J,K),J.of=function(){return J(arguments)},J.prototype.toSetSeq=function(){return this},K.isSeq=ot,K.Keyed=W,K.Set=J,K.Indexed=G;var Y,X,Z,Q="@@__IMMUTABLE_SEQ__@@";function tt(t){this._array=t,this.size=t.length}function et(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function rt(t){this._iterable=t,this.size=t.length||t.size}function nt(t){this._iterator=t,this._iteratorCache=[]}function ot(t){return!(!t||!t[Q])}function it(){return Y||(Y=new tt([]))}function at(t){var e=Array.isArray(t)?new tt(t).fromEntrySeq():H(t)?new nt(t).fromEntrySeq():z(t)?new rt(t).fromEntrySeq():"object"==typeof t?new et(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function st(t){var e=ct(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function ct(t){return F(t)?new tt(t):H(t)?new nt(t):z(t)?new rt(t):void 0}function ut(t,e,r,n){var o=t._cache;if(o){for(var i=o.length-1,a=0;a<=i;a++){var s=o[r?i-a:a];if(!1===e(s[1],n?s[0]:a,t))return a+1}return a}return t.__iterateUncached(e,r)}function gt(t,e,r,n){var o=t._cache;if(o){var i=o.length-1,a=0;return new U(function(){var t=o[r?i-a:a];return a++>i?{value:void 0,done:!0}:P(e,n?t[0]:a-1,t[1])})}return t.__iteratorUncached(e,r)}function lt(t,e){return e?function t(e,r,n,o){return Array.isArray(r)?e.call(o,n,G(r).map(function(n,o){return t(e,n,o,r)})):pt(r)?e.call(o,n,W(r).map(function(n,o){return t(e,n,o,r)})):r}(e,t,"",{"":t}):ft(t)}function ft(t){return Array.isArray(t)?G(t).map(ft).toList():pt(t)?W(t).map(ft).toMap():t}function pt(t){return t&&(t.constructor===Object||void 0===t.constructor)}function ht(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if(t=t.valueOf(),e=e.valueOf(),t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!("function"!=typeof t.equals||"function"!=typeof e.equals||!t.equals(e))}function dt(t,e){if(t===e)return!0;if(!a(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||s(t)!==s(e)||c(t)!==c(e)||g(t)!==g(e))return!1;if(0===t.size&&0===e.size)return!0;var r=!u(t);if(g(t)){var n=t.entries();return e.every(function(t,e){var o=n.next().value;return o&&ht(o[1],t)&&(r||ht(o[0],e))})&&n.next().done}var o=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{o=!0;var i=t;t=e,e=i}var l=!0,f=e.__iterate(function(e,n){if(r?!t.has(e):o?!ht(e,t.get(n,v)):!ht(t.get(n,v),e))return l=!1,!1});return l&&t.size===f}function mt(t,e){if(!(this instanceof mt))return new mt(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(X)return X;X=this}}function yt(t,e){if(!t)throw new Error(e)}function vt(t,e,r){if(!(this instanceof vt))return new vt(t,e,r);if(yt(0!==r,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),r=void 0===r?1:Math.abs(r),e<t&&(r=-r),this._start=t,this._end=e,this._step=r,this.size=Math.max(0,Math.ceil((e-t)/r-1)+1),0===this.size){if(Z)return Z;Z=this}}function _t(){throw TypeError("Abstract")}function bt(){}function St(){}function wt(){}K.prototype[Q]=!0,e(tt,G),tt.prototype.get=function(t,e){return this.has(t)?this._array[I(this,t)]:e},tt.prototype.__iterate=function(t,e){for(var r=this._array,n=r.length-1,o=0;o<=n;o++)if(!1===t(r[e?n-o:o],o,this))return o+1;return o},tt.prototype.__iterator=function(t,e){var r=this._array,n=r.length-1,o=0;return new U(function(){return o>n?{value:void 0,done:!0}:P(t,o,r[e?n-o++:o++])})},e(et,W),et.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},et.prototype.has=function(t){return this._object.hasOwnProperty(t)},et.prototype.__iterate=function(t,e){for(var r=this._object,n=this._keys,o=n.length-1,i=0;i<=o;i++){var a=n[e?o-i:i];if(!1===t(r[a],a,this))return i+1}return i},et.prototype.__iterator=function(t,e){var r=this._object,n=this._keys,o=n.length-1,i=0;return new U(function(){var a=n[e?o-i:i];return i++>o?{value:void 0,done:!0}:P(t,a,r[a])})},et.prototype[h]=!0,e(rt,G),rt.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var r=this._iterable,n=$(r),o=0;if(H(n))for(var i;!(i=n.next()).done&&!1!==t(i.value,o++,this););return o},rt.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=this._iterable,n=$(r);if(!H(n))return new U(B);var o=0;return new U(function(){var e=n.next();return e.done?e:P(t,o++,e.value)})},e(nt,G),nt.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var r,n=this._iterator,o=this._iteratorCache,i=0;i<o.length;)if(!1===t(o[i],i++,this))return i;for(;!(r=n.next()).done;){var a=r.value;if(o[i]=a,!1===t(a,i++,this))break}return i},nt.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=this._iterator,n=this._iteratorCache,o=0;return new U(function(){if(o>=n.length){var e=r.next();if(e.done)return e;n[o]=e.value}return P(t,o,n[o++])})},e(mt,G),mt.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},mt.prototype.get=function(t,e){return this.has(t)?this._value:e},mt.prototype.includes=function(t){return ht(this._value,t)},mt.prototype.slice=function(t,e){var r=this.size;return A(t,e,r)?this:new mt(this._value,x(e,r)-k(t,r))},mt.prototype.reverse=function(){return this},mt.prototype.indexOf=function(t){return ht(this._value,t)?0:-1},mt.prototype.lastIndexOf=function(t){return ht(this._value,t)?this.size:-1},mt.prototype.__iterate=function(t,e){for(var r=0;r<this.size;r++)if(!1===t(this._value,r,this))return r+1;return r},mt.prototype.__iterator=function(t,e){var r=this,n=0;return new U(function(){return n<r.size?P(t,n++,r._value):{value:void 0,done:!0}})},mt.prototype.equals=function(t){return t instanceof mt?ht(this._value,t._value):dt(t)},e(vt,G),vt.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},vt.prototype.get=function(t,e){return this.has(t)?this._start+I(this,t)*this._step:e},vt.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},vt.prototype.slice=function(t,e){return A(t,e,this.size)?this:(t=k(t,this.size),(e=x(e,this.size))<=t?new vt(0,0):new vt(this.get(t,this._end),this.get(e,this._end),this._step))},vt.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var r=e/this._step;if(r>=0&&r<this.size)return r}return-1},vt.prototype.lastIndexOf=function(t){return this.indexOf(t)},vt.prototype.__iterate=function(t,e){for(var r=this.size-1,n=this._step,o=e?this._start+r*n:this._start,i=0;i<=r;i++){if(!1===t(o,i,this))return i+1;o+=e?-n:n}return i},vt.prototype.__iterator=function(t,e){var r=this.size-1,n=this._step,o=e?this._start+r*n:this._start,i=0;return new U(function(){var a=o;return o+=e?-n:n,i>r?{value:void 0,done:!0}:P(t,i++,a)})},vt.prototype.equals=function(t){return t instanceof vt?this._start===t._start&&this._end===t._end&&this._step===t._step:dt(this,t)},e(_t,r),e(bt,_t),e(St,_t),e(wt,_t),_t.Keyed=bt,_t.Indexed=St,_t.Set=wt;var Et="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var r=65535&(t|=0),n=65535&(e|=0);return r*n+((t>>>16)*n+r*(e>>>16)<<16>>>0)|0};function Ot(t){return t>>>1&1073741824|3221225471&t}function jt(t){if(!1===t||null==t)return 0;if("function"==typeof t.valueOf&&(!1===(t=t.valueOf())||null==t))return 0;if(!0===t)return 1;var e,r,n=typeof t;if("number"===n){if(t!=t||t===1/0)return 0;var o=0|t;for(o!==t&&(o^=4294967295*t);t>4294967295;)o^=t/=4294967295;return Ot(o)}if("string"===n)return t.length>Lt?(void 0===(r=qt[e=t])&&(r=It(e),Rt===Dt&&(Rt=0,qt={}),Rt++,qt[e]=r),r):It(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===n)return function(t){var e;if(xt&&void 0!==(e=Tt.get(t)))return e;if(void 0!==(e=t[Mt]))return e;if(!kt){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Mt]))return e;if(void 0!==(e=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}if(e=++Ct,1073741824&Ct&&(Ct=0),xt)Tt.set(t,e);else{if(void 0!==At&&!1===At(t))throw new Error("Non-extensible objects are not allowed as keys.");if(kt)Object.defineProperty(t,Mt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Mt]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Mt]=e}}return e}(t);if("function"==typeof t.toString)return It(t.toString());throw new Error("Value type "+n+" cannot be hashed.")}function It(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return Ot(e)}var Tt,At=Object.isExtensible,kt=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),xt="function"==typeof WeakMap;xt&&(Tt=new WeakMap);var Ct=0,Mt="__immutablehash__";"function"==typeof Symbol&&(Mt=Symbol(Mt));var Lt=16,Dt=255,Rt=0,qt={};function Nt(t){yt(t!==1/0,"Cannot perform this action with an infinite size.")}function Ut(t){return null==t?Zt():Pt(t)&&!g(t)?t:Zt().withMutations(function(e){var r=n(t);Nt(r.size),r.forEach(function(t,r){return e.set(r,t)})})}function Pt(t){return!(!t||!t[zt])}e(Ut,bt),Ut.of=function(){var e=t.call(arguments,0);return Zt().withMutations(function(t){for(var r=0;r<e.length;r+=2){if(r+1>=e.length)throw new Error("Missing value for key: "+e[r]);t.set(e[r],e[r+1])}})},Ut.prototype.toString=function(){return this.__toString("Map {","}")},Ut.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},Ut.prototype.set=function(t,e){return Qt(this,t,e)},Ut.prototype.setIn=function(t,e){return this.updateIn(t,v,function(){return e})},Ut.prototype.remove=function(t){return Qt(this,t,v)},Ut.prototype.deleteIn=function(t){return this.updateIn(t,function(){return v})},Ut.prototype.update=function(t,e,r){return 1===arguments.length?t(this):this.updateIn([t],e,r)},Ut.prototype.updateIn=function(t,e,r){r||(r=e,e=void 0);var n=function t(e,r,n,o){var i=e===v,a=r.next();if(a.done){var s=i?n:e,c=o(s);return c===s?e:c}yt(i||e&&e.set,"invalid keyPath");var u=a.value,g=i?v:e.get(u,v),l=t(g,r,n,o);return l===g?e:l===v?e.remove(u):(i?Zt():e).set(u,l)}(this,rr(t),e,r);return n===v?void 0:n},Ut.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Zt()},Ut.prototype.merge=function(){return ne(this,void 0,arguments)},Ut.prototype.mergeWith=function(e){var r=t.call(arguments,1);return ne(this,e,r)},Ut.prototype.mergeIn=function(e){var r=t.call(arguments,1);return this.updateIn(e,Zt(),function(t){return"function"==typeof t.merge?t.merge.apply(t,r):r[r.length-1]})},Ut.prototype.mergeDeep=function(){return ne(this,oe,arguments)},Ut.prototype.mergeDeepWith=function(e){var r=t.call(arguments,1);return ne(this,ie(e),r)},Ut.prototype.mergeDeepIn=function(e){var r=t.call(arguments,1);return this.updateIn(e,Zt(),function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,r):r[r.length-1]})},Ut.prototype.sort=function(t){return ke(Fe(this,t))},Ut.prototype.sortBy=function(t,e){return ke(Fe(this,e,t))},Ut.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},Ut.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new E)},Ut.prototype.asImmutable=function(){return this.__ensureOwner()},Ut.prototype.wasAltered=function(){return this.__altered},Ut.prototype.__iterator=function(t,e){return new Gt(this,t,e)},Ut.prototype.__iterate=function(t,e){var r=this,n=0;return this._root&&this._root.iterate(function(e){return n++,t(e[1],e[0],r)},e),n},Ut.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Xt(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Ut.isMap=Pt;var Bt,zt="@@__IMMUTABLE_MAP__@@",Ht=Ut.prototype;function $t(t,e){this.ownerID=t,this.entries=e}function Vt(t,e,r){this.ownerID=t,this.bitmap=e,this.nodes=r}function Ft(t,e,r){this.ownerID=t,this.count=e,this.nodes=r}function Kt(t,e,r){this.ownerID=t,this.keyHash=e,this.entries=r}function Wt(t,e,r){this.ownerID=t,this.keyHash=e,this.entry=r}function Gt(t,e,r){this._type=e,this._reverse=r,this._stack=t._root&&Yt(t._root)}function Jt(t,e){return P(t,e[0],e[1])}function Yt(t,e){return{node:t,index:0,__prev:e}}function Xt(t,e,r,n){var o=Object.create(Ht);return o.size=t,o._root=e,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}function Zt(){return Bt||(Bt=Xt(0))}function Qt(t,e,r){var n,o;if(t._root){var i=S(_),a=S(b);if(n=te(t._root,t.__ownerID,0,void 0,e,r,i,a),!a.value)return t;o=t.size+(i.value?r===v?-1:1:0)}else{if(r===v)return t;o=1,n=new $t(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=o,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?Xt(o,n):Zt()}function te(t,e,r,n,o,i,a,s){return t?t.update(e,r,n,o,i,a,s):i===v?t:(w(s),w(a),new Wt(e,n,[o,i]))}function ee(t){return t.constructor===Wt||t.constructor===Kt}function re(t,e,r,n,o){if(t.keyHash===n)return new Kt(e,n,[t.entry,o]);var i,a=(0===r?t.keyHash:t.keyHash>>>r)&y,s=(0===r?n:n>>>r)&y,c=a===s?[re(t,e,r+d,n,o)]:(i=new Wt(e,n,o),a<s?[t,i]:[i,t]);return new Vt(e,1<<a|1<<s,c)}function ne(t,e,r){for(var o=[],i=0;i<r.length;i++){var s=r[i],c=n(s);a(s)||(c=c.map(function(t){return lt(t)})),o.push(c)}return ae(t,e,o)}function oe(t,e,r){return t&&t.mergeDeep&&a(e)?t.mergeDeep(e):ht(t,e)?t:e}function ie(t){return function(e,r,n){if(e&&e.mergeDeepWith&&a(r))return e.mergeDeepWith(t,r);var o=t(e,r,n);return ht(e,o)?e:o}}function ae(t,e,r){return 0===(r=r.filter(function(t){return 0!==t.size})).length?t:0!==t.size||t.__ownerID||1!==r.length?t.withMutations(function(t){for(var n=e?function(r,n){t.update(n,v,function(t){return t===v?r:e(t,r,n)})}:function(e,r){t.set(r,e)},o=0;o<r.length;o++)r[o].forEach(n)}):t.constructor(r[0])}function se(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function ce(t,e,r,n){var o=n?t:O(t);return o[e]=r,o}Ht[zt]=!0,Ht.delete=Ht.remove,Ht.removeIn=Ht.deleteIn,$t.prototype.get=function(t,e,r,n){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(ht(r,o[i][0]))return o[i][1];return n},$t.prototype.update=function(t,e,r,n,o,i,a){for(var s=o===v,c=this.entries,u=0,g=c.length;u<g&&!ht(n,c[u][0]);u++);var l=u<g;if(l?c[u][1]===o:s)return this;if(w(a),(s||!l)&&w(i),!s||1!==c.length){if(!l&&!s&&c.length>=ue)return function(t,e,r,n){t||(t=new E);for(var o=new Wt(t,jt(r),[r,n]),i=0;i<e.length;i++){var a=e[i];o=o.update(t,0,void 0,a[0],a[1])}return o}(t,c,n,o);var f=t&&t===this.ownerID,p=f?c:O(c);return l?s?u===g-1?p.pop():p[u]=p.pop():p[u]=[n,o]:p.push([n,o]),f?(this.entries=p,this):new $t(t,p)}},Vt.prototype.get=function(t,e,r,n){void 0===e&&(e=jt(r));var o=1<<((0===t?e:e>>>t)&y),i=this.bitmap;return 0==(i&o)?n:this.nodes[se(i&o-1)].get(t+d,e,r,n)},Vt.prototype.update=function(t,e,r,n,o,i,a){void 0===r&&(r=jt(n));var s=(0===e?r:r>>>e)&y,c=1<<s,u=this.bitmap,g=0!=(u&c);if(!g&&o===v)return this;var l=se(u&c-1),f=this.nodes,p=g?f[l]:void 0,h=te(p,t,e+d,r,n,o,i,a);if(h===p)return this;if(!g&&h&&f.length>=ge)return function(t,e,r,n,o){for(var i=0,a=new Array(m),s=0;0!==r;s++,r>>>=1)a[s]=1&r?e[i++]:void 0;return a[n]=o,new Ft(t,i+1,a)}(t,f,u,s,h);if(g&&!h&&2===f.length&&ee(f[1^l]))return f[1^l];if(g&&h&&1===f.length&&ee(h))return h;var _=t&&t===this.ownerID,b=g?h?u:u^c:u|c,S=g?h?ce(f,l,h,_):function(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var o=new Array(n),i=0,a=0;a<n;a++)a===e&&(i=1),o[a]=t[a+i];return o}(f,l,_):function(t,e,r,n){var o=t.length+1;if(n&&e+1===o)return t[e]=r,t;for(var i=new Array(o),a=0,s=0;s<o;s++)s===e?(i[s]=r,a=-1):i[s]=t[s+a];return i}(f,l,h,_);return _?(this.bitmap=b,this.nodes=S,this):new Vt(t,b,S)},Ft.prototype.get=function(t,e,r,n){void 0===e&&(e=jt(r));var o=(0===t?e:e>>>t)&y,i=this.nodes[o];return i?i.get(t+d,e,r,n):n},Ft.prototype.update=function(t,e,r,n,o,i,a){void 0===r&&(r=jt(n));var s=(0===e?r:r>>>e)&y,c=o===v,u=this.nodes,g=u[s];if(c&&!g)return this;var l=te(g,t,e+d,r,n,o,i,a);if(l===g)return this;var f=this.count;if(g){if(!l&&--f<le)return function(t,e,r,n){for(var o=0,i=0,a=new Array(r),s=0,c=1,u=e.length;s<u;s++,c<<=1){var g=e[s];void 0!==g&&s!==n&&(o|=c,a[i++]=g)}return new Vt(t,o,a)}(t,u,f,s)}else f++;var p=t&&t===this.ownerID,h=ce(u,s,l,p);return p?(this.count=f,this.nodes=h,this):new Ft(t,f,h)},Kt.prototype.get=function(t,e,r,n){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(ht(r,o[i][0]))return o[i][1];return n},Kt.prototype.update=function(t,e,r,n,o,i,a){void 0===r&&(r=jt(n));var s=o===v;if(r!==this.keyHash)return s?this:(w(a),w(i),re(this,t,e,r,[n,o]));for(var c=this.entries,u=0,g=c.length;u<g&&!ht(n,c[u][0]);u++);var l=u<g;if(l?c[u][1]===o:s)return this;if(w(a),(s||!l)&&w(i),s&&2===g)return new Wt(t,this.keyHash,c[1^u]);var f=t&&t===this.ownerID,p=f?c:O(c);return l?s?u===g-1?p.pop():p[u]=p.pop():p[u]=[n,o]:p.push([n,o]),f?(this.entries=p,this):new Kt(t,this.keyHash,p)},Wt.prototype.get=function(t,e,r,n){return ht(r,this.entry[0])?this.entry[1]:n},Wt.prototype.update=function(t,e,r,n,o,i,a){var s=o===v,c=ht(n,this.entry[0]);return(c?o===this.entry[1]:s)?this:(w(a),s?void w(i):c?t&&t===this.ownerID?(this.entry[1]=o,this):new Wt(t,this.keyHash,[n,o]):(w(i),re(this,t,e,jt(n),[n,o])))},$t.prototype.iterate=Kt.prototype.iterate=function(t,e){for(var r=this.entries,n=0,o=r.length-1;n<=o;n++)if(!1===t(r[e?o-n:n]))return!1},Vt.prototype.iterate=Ft.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,o=r.length-1;n<=o;n++){var i=r[e?o-n:n];if(i&&!1===i.iterate(t,e))return!1}},Wt.prototype.iterate=function(t,e){return t(this.entry)},e(Gt,U),Gt.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var r,n=e.node,o=e.index++;if(n.entry){if(0===o)return Jt(t,n.entry)}else if(n.entries){if(r=n.entries.length-1,o<=r)return Jt(t,n.entries[this._reverse?r-o:o])}else if(r=n.nodes.length-1,o<=r){var i=n.nodes[this._reverse?r-o:o];if(i){if(i.entry)return Jt(t,i.entry);e=this._stack=Yt(i,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}};var ue=m/4,ge=m/2,le=m/4;function fe(t){var e=we();if(null==t)return e;if(pe(t))return t;var r=o(t),n=r.size;return 0===n?e:(Nt(n),n>0&&n<m?Se(0,n,d,null,new me(r.toArray())):e.withMutations(function(t){t.setSize(n),r.forEach(function(e,r){return t.set(r,e)})}))}function pe(t){return!(!t||!t[he])}e(fe,St),fe.of=function(){return this(arguments)},fe.prototype.toString=function(){return this.__toString("List [","]")},fe.prototype.get=function(t,e){if((t=I(this,t))>=0&&t<this.size){var r=je(this,t+=this._origin);return r&&r.array[t&y]}return e},fe.prototype.set=function(t,e){return function(t,e,r){if((e=I(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations(function(t){e<0?Ie(t,e).set(0,r):Ie(t,0,e+1).set(e,r)});e+=t._origin;var n=t._tail,o=t._root,i=S(b);return e>=Ae(t._capacity)?n=Ee(n,t.__ownerID,0,e,r,i):o=Ee(o,t.__ownerID,t._level,e,r,i),i.value?t.__ownerID?(t._root=o,t._tail=n,t.__hash=void 0,t.__altered=!0,t):Se(t._origin,t._capacity,t._level,o,n):t}(this,t,e)},fe.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},fe.prototype.insert=function(t,e){return this.splice(t,0,e)},fe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=d,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):we()},fe.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(r){Ie(r,0,e+t.length);for(var n=0;n<t.length;n++)r.set(e+n,t[n])})},fe.prototype.pop=function(){return Ie(this,0,-1)},fe.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){Ie(e,-t.length);for(var r=0;r<t.length;r++)e.set(r,t[r])})},fe.prototype.shift=function(){return Ie(this,1)},fe.prototype.merge=function(){return Te(this,void 0,arguments)},fe.prototype.mergeWith=function(e){var r=t.call(arguments,1);return Te(this,e,r)},fe.prototype.mergeDeep=function(){return Te(this,oe,arguments)},fe.prototype.mergeDeepWith=function(e){var r=t.call(arguments,1);return Te(this,ie(e),r)},fe.prototype.setSize=function(t){return Ie(this,0,t)},fe.prototype.slice=function(t,e){var r=this.size;return A(t,e,r)?this:Ie(this,k(t,r),x(e,r))},fe.prototype.__iterator=function(t,e){var r=0,n=be(this,e);return new U(function(){var e=n();return e===_e?{value:void 0,done:!0}:P(t,r++,e)})},fe.prototype.__iterate=function(t,e){for(var r,n=0,o=be(this,e);(r=o())!==_e&&!1!==t(r,n++,this););return n},fe.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Se(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},fe.isList=pe;var he="@@__IMMUTABLE_LIST__@@",de=fe.prototype;function me(t,e){this.array=t,this.ownerID=e}de[he]=!0,de.delete=de.remove,de.setIn=Ht.setIn,de.deleteIn=de.removeIn=Ht.removeIn,de.update=Ht.update,de.updateIn=Ht.updateIn,de.mergeIn=Ht.mergeIn,de.mergeDeepIn=Ht.mergeDeepIn,de.withMutations=Ht.withMutations,de.asMutable=Ht.asMutable,de.asImmutable=Ht.asImmutable,de.wasAltered=Ht.wasAltered,me.prototype.removeBefore=function(t,e,r){if(r===e?1<<e:0===this.array.length)return this;var n=r>>>e&y;if(n>=this.array.length)return new me([],t);var o,i=0===n;if(e>0){var a=this.array[n];if((o=a&&a.removeBefore(t,e-d,r))===a&&i)return this}if(i&&!o)return this;var s=Oe(this,t);if(!i)for(var c=0;c<n;c++)s.array[c]=void 0;return o&&(s.array[n]=o),s},me.prototype.removeAfter=function(t,e,r){if(r===(e?1<<e:0)||0===this.array.length)return this;var n,o=r-1>>>e&y;if(o>=this.array.length)return this;if(e>0){var i=this.array[o];if((n=i&&i.removeAfter(t,e-d,r))===i&&o===this.array.length-1)return this}var a=Oe(this,t);return a.array.splice(o+1),n&&(a.array[o]=n),a};var ye,ve,_e={};function be(t,e){var r=t._origin,n=t._capacity,o=Ae(n),i=t._tail;return a(t._root,t._level,0);function a(t,s,c){return 0===s?function(t,a){var s=a===o?i&&i.array:t&&t.array,c=a>r?0:r-a,u=n-a;return u>m&&(u=m),function(){if(c===u)return _e;var t=e?--u:c++;return s&&s[t]}}(t,c):function(t,o,i){var s,c=t&&t.array,u=i>r?0:r-i>>o,g=1+(n-i>>o);return g>m&&(g=m),function(){for(;;){if(s){var t=s();if(t!==_e)return t;s=null}if(u===g)return _e;var r=e?--g:u++;s=a(c&&c[r],o-d,i+(r<<o))}}}(t,s,c)}}function Se(t,e,r,n,o,i,a){var s=Object.create(de);return s.size=e-t,s._origin=t,s._capacity=e,s._level=r,s._root=n,s._tail=o,s.__ownerID=i,s.__hash=a,s.__altered=!1,s}function we(){return ye||(ye=Se(0,0,d))}function Ee(t,e,r,n,o,i){var a,s=n>>>r&y,c=t&&s<t.array.length;if(!c&&void 0===o)return t;if(r>0){var u=t&&t.array[s],g=Ee(u,e,r-d,n,o,i);return g===u?t:((a=Oe(t,e)).array[s]=g,a)}return c&&t.array[s]===o?t:(w(i),a=Oe(t,e),void 0===o&&s===a.array.length-1?a.array.pop():a.array[s]=o,a)}function Oe(t,e){return e&&t&&e===t.ownerID?t:new me(t?t.array.slice():[],e)}function je(t,e){if(e>=Ae(t._capacity))return t._tail;if(e<1<<t._level+d){for(var r=t._root,n=t._level;r&&n>0;)r=r.array[e>>>n&y],n-=d;return r}}function Ie(t,e,r){void 0!==e&&(e|=0),void 0!==r&&(r|=0);var n=t.__ownerID||new E,o=t._origin,i=t._capacity,a=o+e,s=void 0===r?i:r<0?i+r:o+r;if(a===o&&s===i)return t;if(a>=s)return t.clear();for(var c=t._level,u=t._root,g=0;a+g<0;)u=new me(u&&u.array.length?[void 0,u]:[],n),g+=1<<(c+=d);g&&(a+=g,o+=g,s+=g,i+=g);for(var l=Ae(i),f=Ae(s);f>=1<<c+d;)u=new me(u&&u.array.length?[u]:[],n),c+=d;var p=t._tail,h=f<l?je(t,s-1):f>l?new me([],n):p;if(p&&f>l&&a<i&&p.array.length){for(var m=u=Oe(u,n),v=c;v>d;v-=d){var _=l>>>v&y;m=m.array[_]=Oe(m.array[_],n)}m.array[l>>>d&y]=p}if(s<i&&(h=h&&h.removeAfter(n,0,s)),a>=f)a-=f,s-=f,c=d,u=null,h=h&&h.removeBefore(n,0,a);else if(a>o||f<l){for(g=0;u;){var b=a>>>c&y;if(b!==f>>>c&y)break;b&&(g+=(1<<c)*b),c-=d,u=u.array[b]}u&&a>o&&(u=u.removeBefore(n,c,a-g)),u&&f<l&&(u=u.removeAfter(n,c,f-g)),g&&(a-=g,s-=g)}return t.__ownerID?(t.size=s-a,t._origin=a,t._capacity=s,t._level=c,t._root=u,t._tail=h,t.__hash=void 0,t.__altered=!0,t):Se(a,s,c,u,h)}function Te(t,e,r){for(var n=[],i=0,s=0;s<r.length;s++){var c=r[s],u=o(c);u.size>i&&(i=u.size),a(c)||(u=u.map(function(t){return lt(t)})),n.push(u)}return i>t.size&&(t=t.setSize(i)),ae(t,e,n)}function Ae(t){return t<m?0:t-1>>>d<<d}function ke(t){return null==t?Me():xe(t)?t:Me().withMutations(function(e){var r=n(t);Nt(r.size),r.forEach(function(t,r){return e.set(r,t)})})}function xe(t){return Pt(t)&&g(t)}function Ce(t,e,r,n){var o=Object.create(ke.prototype);return o.size=t?t.size:0,o._map=t,o._list=e,o.__ownerID=r,o.__hash=n,o}function Me(){return ve||(ve=Ce(Zt(),we()))}function Le(t,e,r){var n,o,i=t._map,a=t._list,s=i.get(e),c=void 0!==s;if(r===v){if(!c)return t;a.size>=m&&a.size>=2*i.size?(o=a.filter(function(t,e){return void 0!==t&&s!==e}),n=o.toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(n.__ownerID=o.__ownerID=t.__ownerID)):(n=i.remove(e),o=s===a.size-1?a.pop():a.set(s,void 0))}else if(c){if(r===a.get(s)[1])return t;n=i,o=a.set(s,[e,r])}else n=i.set(e,a.size),o=a.set(a.size,[e,r]);return t.__ownerID?(t.size=n.size,t._map=n,t._list=o,t.__hash=void 0,t):Ce(n,o)}function De(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function Re(t){this._iter=t,this.size=t.size}function qe(t){this._iter=t,this.size=t.size}function Ne(t){this._iter=t,this.size=t.size}function Ue(t){var e=Qe(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=tr,e.__iterateUncached=function(e,r){var n=this;return t.__iterate(function(t,r){return!1!==e(r,t,n)},r)},e.__iteratorUncached=function(e,r){if(e===D){var n=t.__iterator(e,r);return new U(function(){var t=n.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(e===L?M:L,r)},e}function Pe(t,e,r){var n=Qe(t);return n.size=t.size,n.has=function(e){return t.has(e)},n.get=function(n,o){var i=t.get(n,v);return i===v?o:e.call(r,i,n,t)},n.__iterateUncached=function(n,o){var i=this;return t.__iterate(function(t,o,a){return!1!==n(e.call(r,t,o,a),o,i)},o)},n.__iteratorUncached=function(n,o){var i=t.__iterator(D,o);return new U(function(){var o=i.next();if(o.done)return o;var a=o.value,s=a[0];return P(n,s,e.call(r,a[1],s,t),o)})},n}function Be(t,e){var r=Qe(t);return r._iter=t,r.size=t.size,r.reverse=function(){return t},t.flip&&(r.flip=function(){var e=Ue(t);return e.reverse=function(){return t.flip()},e}),r.get=function(r,n){return t.get(e?r:-1-r,n)},r.has=function(r){return t.has(e?r:-1-r)},r.includes=function(e){return t.includes(e)},r.cacheResult=tr,r.__iterate=function(e,r){var n=this;return t.__iterate(function(t,r){return e(t,r,n)},!r)},r.__iterator=function(e,r){return t.__iterator(e,!r)},r}function ze(t,e,r,n){var o=Qe(t);return n&&(o.has=function(n){var o=t.get(n,v);return o!==v&&!!e.call(r,o,n,t)},o.get=function(n,o){var i=t.get(n,v);return i!==v&&e.call(r,i,n,t)?i:o}),o.__iterateUncached=function(o,i){var a=this,s=0;return t.__iterate(function(t,i,c){if(e.call(r,t,i,c))return s++,o(t,n?i:s-1,a)},i),s},o.__iteratorUncached=function(o,i){var a=t.__iterator(D,i),s=0;return new U(function(){for(;;){var i=a.next();if(i.done)return i;var c=i.value,u=c[0],g=c[1];if(e.call(r,g,u,t))return P(o,n?u:s++,g,i)}})},o}function He(t,e,r,n){var o=t.size;if(void 0!==e&&(e|=0),void 0!==r&&(r===1/0?r=o:r|=0),A(e,r,o))return t;var i=k(e,o),a=x(r,o);if(i!=i||a!=a)return He(t.toSeq().cacheResult(),e,r,n);var s,c=a-i;c==c&&(s=c<0?0:c);var u=Qe(t);return u.size=0===s?s:t.size&&s||void 0,!n&&ot(t)&&s>=0&&(u.get=function(e,r){return(e=I(this,e))>=0&&e<s?t.get(e+i,r):r}),u.__iterateUncached=function(e,r){var o=this;if(0===s)return 0;if(r)return this.cacheResult().__iterate(e,r);var a=0,c=!0,u=0;return t.__iterate(function(t,r){if(!c||!(c=a++<i))return u++,!1!==e(t,n?r:u-1,o)&&u!==s}),u},u.__iteratorUncached=function(e,r){if(0!==s&&r)return this.cacheResult().__iterator(e,r);var o=0!==s&&t.__iterator(e,r),a=0,c=0;return new U(function(){for(;a++<i;)o.next();if(++c>s)return{value:void 0,done:!0};var t=o.next();return n||e===L?t:P(e,c-1,e===M?void 0:t.value[1],t)})},u}function $e(t,e,r,n){var o=Qe(t);return o.__iterateUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterate(o,i);var s=!0,c=0;return t.__iterate(function(t,i,u){if(!s||!(s=e.call(r,t,i,u)))return c++,o(t,n?i:c-1,a)}),c},o.__iteratorUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterator(o,i);var s=t.__iterator(D,i),c=!0,u=0;return new U(function(){var t,i,g;do{if((t=s.next()).done)return n||o===L?t:P(o,u++,o===M?void 0:t.value[1],t);var l=t.value;i=l[0],g=l[1],c&&(c=e.call(r,g,i,a))}while(c);return o===D?t:P(o,i,g,t)})},o}function Ve(t,e,r){var n=Qe(t);return n.__iterateUncached=function(n,o){var i=0,s=!1;return function t(c,u){var g=this;c.__iterate(function(o,c){return(!e||u<e)&&a(o)?t(o,u+1):!1===n(o,r?c:i++,g)&&(s=!0),!s},o)}(t,0),i},n.__iteratorUncached=function(n,o){var i=t.__iterator(n,o),s=[],c=0;return new U(function(){for(;i;){var t=i.next();if(!1===t.done){var u=t.value;if(n===D&&(u=u[1]),e&&!(s.length<e)||!a(u))return r?t:P(n,c++,u,t);s.push(i),i=u.__iterator(n,o)}else i=s.pop()}return{value:void 0,done:!0}})},n}function Fe(t,e,r){e||(e=er);var n=s(t),o=0,i=t.toSeq().map(function(e,n){return[n,e,o++,r?r(e,n,t):e]}).toArray();return i.sort(function(t,r){return e(t[3],r[3])||t[2]-r[2]}).forEach(n?function(t,e){i[e].length=2}:function(t,e){i[e]=t[1]}),n?W(i):c(t)?G(i):J(i)}function Ke(t,e,r){if(e||(e=er),r){var n=t.toSeq().map(function(e,n){return[e,r(e,n,t)]}).reduce(function(t,r){return We(e,t[1],r[1])?r:t});return n&&n[0]}return t.reduce(function(t,r){return We(e,t,r)?r:t})}function We(t,e,r){var n=t(r,e);return 0===n&&r!==e&&(null==r||r!=r)||n>0}function Ge(t,e,n){var o=Qe(t);return o.size=new tt(n).map(function(t){return t.size}).min(),o.__iterate=function(t,e){for(var r,n=this.__iterator(L,e),o=0;!(r=n.next()).done&&!1!==t(r.value,o++,this););return o},o.__iteratorUncached=function(t,o){var i=n.map(function(t){return t=r(t),$(o?t.reverse():t)}),a=0,s=!1;return new U(function(){var r;return s||(r=i.map(function(t){return t.next()}),s=r.some(function(t){return t.done})),s?{value:void 0,done:!0}:P(t,a++,e.apply(null,r.map(function(t){return t.value})))})},o}function Je(t,e){return ot(t)?e:t.constructor(e)}function Ye(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Xe(t){return Nt(t.size),j(t)}function Ze(t){return s(t)?n:c(t)?o:i}function Qe(t){return Object.create((s(t)?W:c(t)?G:J).prototype)}function tr(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):K.prototype.cacheResult.call(this)}function er(t,e){return t>e?1:t<e?-1:0}function rr(t){var e=$(t);if(!e){if(!F(t))throw new TypeError("Expected iterable or array-like: "+t);e=$(r(t))}return e}function nr(t,e){var r,n=function(i){if(i instanceof n)return i;if(!(this instanceof n))return new n(i);if(!r){r=!0;var a=Object.keys(t);!function(t,e){try{e.forEach(function(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){yt(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}.bind(void 0,t))}catch(r){}}(o,a),o.size=a.length,o._name=e,o._keys=a,o._defaultValues=t}this._map=Ut(i)},o=n.prototype=Object.create(or);return o.constructor=n,n}e(ke,Ut),ke.of=function(){return this(arguments)},ke.prototype.toString=function(){return this.__toString("OrderedMap {","}")},ke.prototype.get=function(t,e){var r=this._map.get(t);return void 0!==r?this._list.get(r)[1]:e},ke.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Me()},ke.prototype.set=function(t,e){return Le(this,t,e)},ke.prototype.remove=function(t){return Le(this,t,v)},ke.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},ke.prototype.__iterate=function(t,e){var r=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],r)},e)},ke.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},ke.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),r=this._list.__ensureOwner(t);return t?Ce(e,r,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=r,this)},ke.isOrderedMap=xe,ke.prototype[h]=!0,ke.prototype.delete=ke.prototype.remove,e(De,W),De.prototype.get=function(t,e){return this._iter.get(t,e)},De.prototype.has=function(t){return this._iter.has(t)},De.prototype.valueSeq=function(){return this._iter.valueSeq()},De.prototype.reverse=function(){var t=this,e=Be(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},De.prototype.map=function(t,e){var r=this,n=Pe(this,t,e);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(t,e)}),n},De.prototype.__iterate=function(t,e){var r,n=this;return this._iter.__iterate(this._useKeys?function(e,r){return t(e,r,n)}:(r=e?Xe(this):0,function(o){return t(o,e?--r:r++,n)}),e)},De.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var r=this._iter.__iterator(L,e),n=e?Xe(this):0;return new U(function(){var o=r.next();return o.done?o:P(t,e?--n:n++,o.value,o)})},De.prototype[h]=!0,e(Re,G),Re.prototype.includes=function(t){return this._iter.includes(t)},Re.prototype.__iterate=function(t,e){var r=this,n=0;return this._iter.__iterate(function(e){return t(e,n++,r)},e)},Re.prototype.__iterator=function(t,e){var r=this._iter.__iterator(L,e),n=0;return new U(function(){var e=r.next();return e.done?e:P(t,n++,e.value,e)})},e(qe,J),qe.prototype.has=function(t){return this._iter.includes(t)},qe.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate(function(e){return t(e,e,r)},e)},qe.prototype.__iterator=function(t,e){var r=this._iter.__iterator(L,e);return new U(function(){var e=r.next();return e.done?e:P(t,e.value,e.value,e)})},e(Ne,W),Ne.prototype.entrySeq=function(){return this._iter.toSeq()},Ne.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate(function(e){if(e){Ye(e);var n=a(e);return t(n?e.get(1):e[1],n?e.get(0):e[0],r)}},e)},Ne.prototype.__iterator=function(t,e){var r=this._iter.__iterator(L,e);return new U(function(){for(;;){var e=r.next();if(e.done)return e;var n=e.value;if(n){Ye(n);var o=a(n);return P(t,o?n.get(0):n[0],o?n.get(1):n[1],e)}}})},Re.prototype.cacheResult=De.prototype.cacheResult=qe.prototype.cacheResult=Ne.prototype.cacheResult=tr,e(nr,bt),nr.prototype.toString=function(){return this.__toString(ar(this)+" {","}")},nr.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},nr.prototype.get=function(t,e){if(!this.has(t))return e;var r=this._defaultValues[t];return this._map?this._map.get(t,r):r},nr.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=ir(this,Zt()))},nr.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+ar(this));if(this._map&&!this._map.has(t)){var r=this._defaultValues[t];if(e===r)return this}var n=this._map&&this._map.set(t,e);return this.__ownerID||n===this._map?this:ir(this,n)},nr.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:ir(this,e)},nr.prototype.wasAltered=function(){return this._map.wasAltered()},nr.prototype.__iterator=function(t,e){var r=this;return n(this._defaultValues).map(function(t,e){return r.get(e)}).__iterator(t,e)},nr.prototype.__iterate=function(t,e){var r=this;return n(this._defaultValues).map(function(t,e){return r.get(e)}).__iterate(t,e)},nr.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?ir(this,e,t):(this.__ownerID=t,this._map=e,this)};var or=nr.prototype;function ir(t,e,r){var n=Object.create(Object.getPrototypeOf(t));return n._map=e,n.__ownerID=r,n}function ar(t){return t._name||t.constructor.name||"Record"}function sr(t){return null==t?hr():cr(t)&&!g(t)?t:hr().withMutations(function(e){var r=i(t);Nt(r.size),r.forEach(function(t){return e.add(t)})})}function cr(t){return!(!t||!t[gr])}or.delete=or.remove,or.deleteIn=or.removeIn=Ht.removeIn,or.merge=Ht.merge,or.mergeWith=Ht.mergeWith,or.mergeIn=Ht.mergeIn,or.mergeDeep=Ht.mergeDeep,or.mergeDeepWith=Ht.mergeDeepWith,or.mergeDeepIn=Ht.mergeDeepIn,or.setIn=Ht.setIn,or.update=Ht.update,or.updateIn=Ht.updateIn,or.withMutations=Ht.withMutations,or.asMutable=Ht.asMutable,or.asImmutable=Ht.asImmutable,e(sr,wt),sr.of=function(){return this(arguments)},sr.fromKeys=function(t){return this(n(t).keySeq())},sr.prototype.toString=function(){return this.__toString("Set {","}")},sr.prototype.has=function(t){return this._map.has(t)},sr.prototype.add=function(t){return fr(this,this._map.set(t,!0))},sr.prototype.remove=function(t){return fr(this,this._map.remove(t))},sr.prototype.clear=function(){return fr(this,this._map.clear())},sr.prototype.union=function(){var e=t.call(arguments,0);return 0===(e=e.filter(function(t){return 0!==t.size})).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations(function(t){for(var r=0;r<e.length;r++)i(e[r]).forEach(function(e){return t.add(e)})}):this.constructor(e[0])},sr.prototype.intersect=function(){var e=t.call(arguments,0);if(0===e.length)return this;e=e.map(function(t){return i(t)});var r=this;return this.withMutations(function(t){r.forEach(function(r){e.every(function(t){return t.includes(r)})||t.remove(r)})})},sr.prototype.subtract=function(){var e=t.call(arguments,0);if(0===e.length)return this;e=e.map(function(t){return i(t)});var r=this;return this.withMutations(function(t){r.forEach(function(r){e.some(function(t){return t.includes(r)})&&t.remove(r)})})},sr.prototype.merge=function(){return this.union.apply(this,arguments)},sr.prototype.mergeWith=function(e){var r=t.call(arguments,1);return this.union.apply(this,r)},sr.prototype.sort=function(t){return dr(Fe(this,t))},sr.prototype.sortBy=function(t,e){return dr(Fe(this,e,t))},sr.prototype.wasAltered=function(){return this._map.wasAltered()},sr.prototype.__iterate=function(t,e){var r=this;return this._map.__iterate(function(e,n){return t(n,n,r)},e)},sr.prototype.__iterator=function(t,e){return this._map.map(function(t,e){return e}).__iterator(t,e)},sr.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},sr.isSet=cr;var ur,gr="@@__IMMUTABLE_SET__@@",lr=sr.prototype;function fr(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function pr(t,e){var r=Object.create(lr);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function hr(){return ur||(ur=pr(Zt()))}function dr(t){return null==t?br():mr(t)?t:br().withMutations(function(e){var r=i(t);Nt(r.size),r.forEach(function(t){return e.add(t)})})}function mr(t){return cr(t)&&g(t)}lr[gr]=!0,lr.delete=lr.remove,lr.mergeDeep=lr.merge,lr.mergeDeepWith=lr.mergeWith,lr.withMutations=Ht.withMutations,lr.asMutable=Ht.asMutable,lr.asImmutable=Ht.asImmutable,lr.__empty=hr,lr.__make=pr,e(dr,sr),dr.of=function(){return this(arguments)},dr.fromKeys=function(t){return this(n(t).keySeq())},dr.prototype.toString=function(){return this.__toString("OrderedSet {","}")},dr.isOrderedSet=mr;var yr,vr=dr.prototype;function _r(t,e){var r=Object.create(vr);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function br(){return yr||(yr=_r(Me()))}function Sr(t){return null==t?Tr():wr(t)?t:Tr().unshiftAll(t)}function wr(t){return!(!t||!t[Or])}vr[h]=!0,vr.__empty=br,vr.__make=_r,e(Sr,St),Sr.of=function(){return this(arguments)},Sr.prototype.toString=function(){return this.__toString("Stack [","]")},Sr.prototype.get=function(t,e){var r=this._head;for(t=I(this,t);r&&t--;)r=r.next;return r?r.value:e},Sr.prototype.peek=function(){return this._head&&this._head.value},Sr.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,r=arguments.length-1;r>=0;r--)e={value:arguments[r],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):Ir(t,e)},Sr.prototype.pushAll=function(t){if(0===(t=o(t)).size)return this;Nt(t.size);var e=this.size,r=this._head;return t.reverse().forEach(function(t){e++,r={value:t,next:r}}),this.__ownerID?(this.size=e,this._head=r,this.__hash=void 0,this.__altered=!0,this):Ir(e,r)},Sr.prototype.pop=function(){return this.slice(1)},Sr.prototype.unshift=function(){return this.push.apply(this,arguments)},Sr.prototype.unshiftAll=function(t){return this.pushAll(t)},Sr.prototype.shift=function(){return this.pop.apply(this,arguments)},Sr.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Tr()},Sr.prototype.slice=function(t,e){if(A(t,e,this.size))return this;var r=k(t,this.size),n=x(e,this.size);if(n!==this.size)return St.prototype.slice.call(this,t,e);for(var o=this.size-r,i=this._head;r--;)i=i.next;return this.__ownerID?(this.size=o,this._head=i,this.__hash=void 0,this.__altered=!0,this):Ir(o,i)},Sr.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ir(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Sr.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var r=0,n=this._head;n&&!1!==t(n.value,r++,this);)n=n.next;return r},Sr.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var r=0,n=this._head;return new U(function(){if(n){var e=n.value;return n=n.next,P(t,r++,e)}return{value:void 0,done:!0}})},Sr.isStack=wr;var Er,Or="@@__IMMUTABLE_STACK__@@",jr=Sr.prototype;function Ir(t,e,r,n){var o=Object.create(jr);return o.size=t,o._head=e,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}function Tr(){return Er||(Er=Ir(0))}function Ar(t,e){var r=function(r){t.prototype[r]=e[r]};return Object.keys(e).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r),t}jr[Or]=!0,jr.withMutations=Ht.withMutations,jr.asMutable=Ht.asMutable,jr.asImmutable=Ht.asImmutable,jr.wasAltered=Ht.wasAltered,r.Iterator=U,Ar(r,{toArray:function(){Nt(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate(function(e,r){t[r]=e}),t},toIndexedSeq:function(){return new Re(this)},toJS:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJS?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new De(this,!0)},toMap:function(){return Ut(this.toKeyedSeq())},toObject:function(){Nt(this.size);var t={};return this.__iterate(function(e,r){t[r]=e}),t},toOrderedMap:function(){return ke(this.toKeyedSeq())},toOrderedSet:function(){return dr(s(this)?this.valueSeq():this)},toSet:function(){return sr(s(this)?this.valueSeq():this)},toSetSeq:function(){return new qe(this)},toSeq:function(){return c(this)?this.toIndexedSeq():s(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Sr(s(this)?this.valueSeq():this)},toList:function(){return fe(s(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){var e=t.call(arguments,0);return Je(this,function(t,e){var r=s(t),o=[t].concat(e).map(function(t){return a(t)?r&&(t=n(t)):t=r?at(t):st(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===o.length)return t;if(1===o.length){var i=o[0];if(i===t||r&&s(i)||c(t)&&c(i))return i}var u=new tt(o);return r?u=u.toKeyedSeq():c(t)||(u=u.toSetSeq()),(u=u.flatten(!0)).size=o.reduce(function(t,e){if(void 0!==t){var r=e.size;if(void 0!==r)return t+r}},0),u}(this,e))},includes:function(t){return this.some(function(e){return ht(e,t)})},entries:function(){return this.__iterator(D)},every:function(t,e){Nt(this.size);var r=!0;return this.__iterate(function(n,o,i){if(!t.call(e,n,o,i))return r=!1,!1}),r},filter:function(t,e){return Je(this,ze(this,t,e,!0))},find:function(t,e,r){var n=this.findEntry(t,e);return n?n[1]:r},forEach:function(t,e){return Nt(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){Nt(this.size),t=void 0!==t?""+t:",";var e="",r=!0;return this.__iterate(function(n){r?r=!1:e+=t,e+=null!=n?n.toString():""}),e},keys:function(){return this.__iterator(M)},map:function(t,e){return Je(this,Pe(this,t,e))},reduce:function(t,e,r){var n,o;return Nt(this.size),arguments.length<2?o=!0:n=e,this.__iterate(function(e,i,a){o?(o=!1,n=e):n=t.call(r,n,e,i,a)}),n},reduceRight:function(t,e,r){var n=this.toKeyedSeq().reverse();return n.reduce.apply(n,arguments)},reverse:function(){return Je(this,Be(this,!0))},slice:function(t,e){return Je(this,He(this,t,e,!0))},some:function(t,e){return!this.every(Lr(t),e)},sort:function(t){return Je(this,Fe(this,t))},values:function(){return this.__iterator(L)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return j(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(t,e,r){var n=Ut().asMutable();return t.__iterate(function(o,i){n.update(e.call(r,o,i,t),0,function(t){return t+1})}),n.asImmutable()}(this,t,e)},equals:function(t){return dt(this,t)},entrySeq:function(){var t=this;if(t._cache)return new tt(t._cache);var e=t.toSeq().map(Mr).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Lr(t),e)},findEntry:function(t,e,r){var n=r;return this.__iterate(function(r,o,i){if(t.call(e,r,o,i))return n=[o,r],!1}),n},findKey:function(t,e){var r=this.findEntry(t,e);return r&&r[0]},findLast:function(t,e,r){return this.toKeyedSeq().reverse().find(t,e,r)},findLastEntry:function(t,e,r){return this.toKeyedSeq().reverse().findEntry(t,e,r)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(T)},flatMap:function(t,e){return Je(this,function(t,e,r){var n=Ze(t);return t.toSeq().map(function(o,i){return n(e.call(r,o,i,t))}).flatten(!0)}(this,t,e))},flatten:function(t){return Je(this,Ve(this,t,!0))},fromEntrySeq:function(){return new Ne(this)},get:function(t,e){return this.find(function(e,r){return ht(r,t)},void 0,e)},getIn:function(t,e){for(var r,n=this,o=rr(t);!(r=o.next()).done;){var i=r.value;if((n=n&&n.get?n.get(i,v):v)===v)return e}return n},groupBy:function(t,e){return function(t,e,r){var n=s(t),o=(g(t)?ke():Ut()).asMutable();t.__iterate(function(i,a){o.update(e.call(r,i,a,t),function(t){return(t=t||[]).push(n?[a,i]:i),t})});var i=Ze(t);return o.map(function(e){return Je(t,i(e))})}(this,t,e)},has:function(t){return this.get(t,v)!==v},hasIn:function(t){return this.getIn(t,v)!==v},isSubset:function(t){return t="function"==typeof t.includes?t:r(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:r(t)).isSubset(this)},keyOf:function(t){return this.findKey(function(e){return ht(e,t)})},keySeq:function(){return this.toSeq().map(Cr).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return Ke(this,t)},maxBy:function(t,e){return Ke(this,e,t)},min:function(t){return Ke(this,t?Dr(t):Nr)},minBy:function(t,e){return Ke(this,e?Dr(e):Nr,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return Je(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return Je(this,$e(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Lr(t),e)},sortBy:function(t,e){return Je(this,Fe(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return Je(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return Je(this,function(t,e,r){var n=Qe(t);return n.__iterateUncached=function(n,o){var i=this;if(o)return this.cacheResult().__iterate(n,o);var a=0;return t.__iterate(function(t,o,s){return e.call(r,t,o,s)&&++a&&n(t,o,i)}),a},n.__iteratorUncached=function(n,o){var i=this;if(o)return this.cacheResult().__iterator(n,o);var a=t.__iterator(D,o),s=!0;return new U(function(){if(!s)return{value:void 0,done:!0};var t=a.next();if(t.done)return t;var o=t.value,c=o[0],u=o[1];return e.call(r,u,c,i)?n===D?t:P(n,c,u,t):(s=!1,{value:void 0,done:!0})})},n}(this,t,e))},takeUntil:function(t,e){return this.takeWhile(Lr(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=g(t),r=s(t),n=e?1:0;return function(t,e){return e=Et(e,3432918353),e=Et(e<<15|e>>>-15,461845907),e=Et(e<<13|e>>>-13,5),e=Et((e=(e+3864292196|0)^t)^e>>>16,2246822507),e=Ot((e=Et(e^e>>>13,3266489909))^e>>>16)}(t.__iterate(r?e?function(t,e){n=31*n+Ur(jt(t),jt(e))|0}:function(t,e){n=n+Ur(jt(t),jt(e))|0}:e?function(t){n=31*n+jt(t)|0}:function(t){n=n+jt(t)|0}),n)}(this))}});var kr=r.prototype;kr[l]=!0,kr[N]=kr.values,kr.__toJS=kr.toArray,kr.__toStringMapper=Rr,kr.inspect=kr.toSource=function(){return this.toString()},kr.chain=kr.flatMap,kr.contains=kr.includes,Ar(n,{flip:function(){return Je(this,Ue(this))},mapEntries:function(t,e){var r=this,n=0;return Je(this,this.toSeq().map(function(o,i){return t.call(e,[i,o],n++,r)}).fromEntrySeq())},mapKeys:function(t,e){var r=this;return Je(this,this.toSeq().flip().map(function(n,o){return t.call(e,n,o,r)}).flip())}});var xr=n.prototype;function Cr(t,e){return e}function Mr(t,e){return[e,t]}function Lr(t){return function(){return!t.apply(this,arguments)}}function Dr(t){return function(){return-t.apply(this,arguments)}}function Rr(t){return"string"==typeof t?JSON.stringify(t):String(t)}function qr(){return O(arguments)}function Nr(t,e){return t<e?1:t>e?-1:0}function Ur(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}return xr[f]=!0,xr[N]=kr.entries,xr.__toJS=kr.toObject,xr.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+Rr(t)},Ar(o,{toKeyedSeq:function(){return new De(this,!1)},filter:function(t,e){return Je(this,ze(this,t,e,!1))},findIndex:function(t,e){var r=this.findEntry(t,e);return r?r[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return Je(this,Be(this,!1))},slice:function(t,e){return Je(this,He(this,t,e,!1))},splice:function(t,e){var r=arguments.length;if(e=Math.max(0|e,0),0===r||2===r&&!e)return this;t=k(t,t<0?this.count():this.size);var n=this.slice(0,t);return Je(this,1===r?n:n.concat(O(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var r=this.findLastEntry(t,e);return r?r[0]:-1},first:function(){return this.get(0)},flatten:function(t){return Je(this,Ve(this,t,!1))},get:function(t,e){return(t=I(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find(function(e,r){return r===t},void 0,e)},has:function(t){return(t=I(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return Je(this,function(t,e){var r=Qe(t);return r.size=t.size&&2*t.size-1,r.__iterateUncached=function(r,n){var o=this,i=0;return t.__iterate(function(t,n){return(!i||!1!==r(e,i++,o))&&!1!==r(t,i++,o)},n),i},r.__iteratorUncached=function(r,n){var o,i=t.__iterator(L,n),a=0;return new U(function(){return(!o||a%2)&&(o=i.next()).done?o:a%2?P(r,a++,e):P(r,a++,o.value,o)})},r}(this,t))},interleave:function(){var t=[this].concat(O(arguments)),e=Ge(this.toSeq(),G.of,t),r=e.flatten(!0);return e.size&&(r.size=e.size*t.length),Je(this,r)},keySeq:function(){return vt(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return Je(this,$e(this,t,e,!1))},zip:function(){return Je(this,Ge(this,qr,[this].concat(O(arguments))))},zipWith:function(t){var e=O(arguments);return e[0]=this,Je(this,Ge(this,t,e))}}),o.prototype[p]=!0,o.prototype[h]=!0,Ar(i,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=kr.includes,i.prototype.contains=i.prototype.includes,Ar(W,n.prototype),Ar(G,o.prototype),Ar(J,i.prototype),Ar(bt,n.prototype),Ar(St,o.prototype),Ar(wt,i.prototype),{Iterable:r,Seq:K,Collection:_t,Map:Ut,OrderedMap:ke,List:fe,Stack:Sr,Set:sr,OrderedSet:dr,Record:nr,Range:vt,Repeat:mt,is:ht,fromJS:lt}}()},"./node_modules/transit-immutable-js/index.js":function(t,e,r){var n=r("./node_modules/transit-js/transit.js"),o=r("./node_modules/immutable/dist/immutable.js");function i(t,e,r){var n={iM:function(t){for(var e=o.Map().asMutable(),r=0;r<t.length;r+=2)e=e.set(t[r],t[r+1]);return e.asImmutable()},iOM:function(t){for(var e=o.OrderedMap().asMutable(),r=0;r<t.length;r+=2)e=e.set(t[r],t[r+1]);return e.asImmutable()},iL:function(t){return o.List(t)},iS:function(t){return o.Set(t)},iOS:function(t){return o.OrderedSet(t)},iR:function(t){var n=e[t.n];return n?new n(t.v):r(t.n,t.v)}};return t.forEach(function(t){n[t.tag]=t.read}),n}function a(t,e,r){function i(t){var e=0;r&&(t=t.filter(r));var n=new Array(2*t.size);return t.forEach(function(t,r){n[e++]=r,n[e++]=t}),n}var a=n.map([o.Map,n.makeWriteHandler({tag:function(){return"iM"},rep:i}),o.OrderedMap,n.makeWriteHandler({tag:function(){return"iOM"},rep:i}),o.List,n.makeWriteHandler({tag:function(){return"iL"},rep:function(t){return r&&(t=t.filter(r)),t.toArray()}}),o.Set,n.makeWriteHandler({tag:function(){return"iS"},rep:function(t){return r&&(t=t.filter(r)),t.toArray()}}),o.OrderedSet,n.makeWriteHandler({tag:function(){return"iOS"},rep:function(t){return r&&(t=t.filter(r)),t.toArray()}}),Function,n.makeWriteHandler({tag:function(){return"_"},rep:function(){return null}}),"default",n.makeWriteHandler({tag:function(){return"iM"},rep:function(t){if(!("toMap"in t)){var e="Error serializing unrecognized object "+t.toString();throw new Error(e)}return i(t.toMap())}})]);return Object.keys(e).forEach(function(t){a.set(e[t],function(t){return n.makeWriteHandler({tag:function(){return"iR"},rep:function(e){return{n:t,v:e.toObject()}}})}(t))}),t.forEach(function(t){a.set(t.class,n.makeWriteHandler({tag:function(){return t.tag},rep:t.write}))}),a}function s(t,e){var r=JSON.stringify(t);throw new Error(e.replace("%j",r))}function c(t){throw new Error("Tried to deserialize Record type named `"+t+"`, but no type with that name was passed to withRecords()")}function u(t){var e=t.records||{},r=t.filter||!1,n=t.missingRecordHandler||c,o=t.extras||[];return{read:i(o,e,n),write:a(o,e,r),withExtraHandlers:function(t){return function(t){Array.isArray(t)||s(t,"Expected array of handlers, got %j"),t.forEach(function(t){"string"!=typeof t.tag&&s(t,"Expected %j to have property 'tag' which is a string"),"function"!=typeof t.class&&s(t,"Expected %j to have property 'class' which is a constructor function"),"function"!=typeof t.write&&s(t,"Expected %j to have property 'write' which is a function"),"function"!=typeof t.read&&s(t,"Expected %j to have property 'write' which is a function")})}(t),u({extras:o.concat(t),records:e,filter:r,missingRecordHandler:n})},withFilter:function(t){return u({extras:o,records:e,filter:t,missingRecordHandler:n})},withRecords:function(t,e){var n=function(t){var e={};return t.forEach(function(t){var r,n=new t({}),o=(r=n)._name||r.constructor.name||"Record";if(!o||"Record"===o)throw new Error("Cannot (de)serialize Record() without a name");if(e[o])throw new Error("There's already a constructor for a Record named "+o);e[o]=t}),e}(t);return u({extras:o,records:n,filter:r,missingRecordHandler:e})}}}t.exports=function t(e){var r=function(t){return n.reader("json",{mapBuilder:{init:function(){return{}},add:function(t,e,r){return t[e]=r,t},finalize:function(t){return t}},handlers:t})}(e.read),o=function(t){return n.writer("json",{handlers:t})}(e.write);return{toJSON:function(t){return o.write(t)},fromJSON:function(t){return r.read(t)},withExtraHandlers:function(r){return t(e.withExtraHandlers(r))},withFilter:function(r){return t(e.withFilter(r))},withRecords:function(r,n){return t(e.withRecords(r,n))}}}(u({})),t.exports.handlers=u({})},"./node_modules/transit-js/transit.js":function(module,exports,__webpack_require__){(function(global){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.checkStringArgs=function(t,e,r){if(null==t)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return t+""},$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,r){t!=Array.prototype&&t!=Object.prototype&&(t[e]=r.value)},$jscomp.getGlobal=function(t){return"undefined"!=typeof window&&window===t?t:void 0!==global&&null!=global?global:t},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(t,e,r,n){if(e){for(r=$jscomp.global,t=t.split("."),n=0;n<t.length-1;n++){var o=t[n];o in r||(r[o]={}),r=r[o]}(e=e(n=r[t=t[t.length-1]]))!=n&&null!=e&&$jscomp.defineProperty(r,t,{configurable:!0,writable:!0,value:e})}},$jscomp.polyfill("String.prototype.repeat",function(t){return t||function(t){var e=$jscomp.checkStringArgs(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var r="";t;)1&t&&(r+=e),(t>>>=1)&&(e+=e);return r}},"es6-impl","es3"),$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.symbolCounter_=0,$jscomp.Symbol=function(t){return $jscomp.SYMBOL_PREFIX+(t||"")+$jscomp.symbolCounter_++},$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var t=$jscomp.global.Symbol.iterator;t||(t=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&$jscomp.defineProperty(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}}),$jscomp.initSymbolIterator=function(){}},$jscomp.arrayIterator=function(t){var e=0;return $jscomp.iteratorPrototype(function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}})},$jscomp.iteratorPrototype=function(t){return $jscomp.initSymbolIterator(),(t={next:t})[$jscomp.global.Symbol.iterator]=function(){return this},t},$jscomp.iteratorFromArray=function(t,e){$jscomp.initSymbolIterator(),t instanceof String&&(t+="");var r=0,n={next:function(){if(r<t.length){var o=r++;return{value:e(o,t[o]),done:!1}}return n.next=function(){return{done:!0,value:void 0}},n.next()}};return n[Symbol.iterator]=function(){return n},n},$jscomp.polyfill("Array.prototype.entries",function(t){return t||function(){return $jscomp.iteratorFromArray(this,function(t,e){return[t,e]})}},"es6-impl","es3"),$jscomp.polyfill("Array.prototype.keys",function(t){return t||function(){return $jscomp.iteratorFromArray(this,function(t){return t})}},"es6-impl","es3"),$jscomp.polyfill("Array.prototype.values",function(t){return t||function(){return $jscomp.iteratorFromArray(this,function(t,e){return e})}},"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=this,goog.isDef=function(t){return void 0!==t},goog.exportPath_=function(t,e,r){t=t.split("."),r=r||goog.global,t[0]in r||!r.execScript||r.execScript("var "+t[0]);for(var n;t.length&&(n=t.shift());)!t.length&&goog.isDef(e)?r[n]=e:r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}},goog.define=function(t,e){var r=e;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,t)?r=goog.global.CLOSURE_UNCOMPILED_DEFINES[t]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,t)&&(r=goog.global.CLOSURE_DEFINES[t])),goog.exportPath_(t,r)},goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(t){if(goog.isInModuleLoader_())throw Error("goog.provide can not be used within a goog.module.");if(!COMPILED&&goog.isProvided_(t))throw Error('Namespace "'+t+'" already declared.');goog.constructNamespace_(t)},goog.constructNamespace_=function(t,e){if(!COMPILED){delete goog.implicitNamespaces_[t];for(var r=t;(r=r.substring(0,r.lastIndexOf(".")))&&!goog.getObjectByName(r);)goog.implicitNamespaces_[r]=!0}goog.exportPath_(t,e)},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(t){if(!goog.isString(t)||!t||-1==t.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+t+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=t,!COMPILED){if(goog.isProvided_(t))throw Error('Namespace "'+t+'" already declared.');delete goog.implicitNamespaces_[t]}},goog.module.get=function(t){return goog.module.getInternal_(t)},goog.module.getInternal_=function(t){if(!COMPILED){if(t in goog.loadedModules_)return goog.loadedModules_[t];if(!goog.implicitNamespaces_[t])return null!=(t=goog.getObjectByName(t))?t:null}return null},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.setTestOnly=function(t){if(goog.DISALLOW_TEST_ONLY_CODE)throw t=t||"",Error("Importing test-only code into non-debug environment"+(t?": "+t:"."))},goog.forwardDeclare=function(t){},COMPILED||(goog.isProvided_=function(t){return t in goog.loadedModules_||!goog.implicitNamespaces_[t]&&goog.isDefAndNotNull(goog.getObjectByName(t))},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(t,e){for(var r,n=t.split("."),o=e||goog.global;r=n.shift();){if(!goog.isDefAndNotNull(o[r]))return null;o=o[r]}return o},goog.globalize=function(t,e){var r,n=e||goog.global;for(r in t)n[r]=t[r]},goog.addDependency=function(t,e,r,n){if(goog.DEPENDENCIES_ENABLED){var o;t=t.replace(/\\/g,"/");var i=goog.dependencies_;n&&"boolean"!=typeof n||(n=n?{module:"goog"}:{});for(var a=0;o=e[a];a++)i.nameToPath[o]=t,i.loadFlags[t]=n;for(n=0;e=r[n];n++)t in i.requires||(i.requires[t]={}),i.requires[t][e]=!0}},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(t){goog.global.console&&goog.global.console.error(t)},goog.require=function(t){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(t),goog.isProvided_(t)){if(goog.isInModuleLoader_())return goog.module.getInternal_(t)}else if(goog.ENABLE_DEBUG_LOADER){var e=goog.getPathFromDeps_(t);if(!e)throw t="goog.require could not find: "+t,goog.logToConsole_(t),Error(t);goog.writeScripts_(e)}return null}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(t){t.instance_=void 0,t.getInstance=function(){return t.instance_?t.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=t),t.instance_=new t)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.TRANSPILE="detect",goog.TRANSPILER="transpile.js",goog.DEPENDENCIES_ENABLED&&(goog.dependencies_={loadFlags:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var t=goog.global.document;return null!=t&&"write"in t},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH))goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var t=goog.global.document.getElementsByTagName("SCRIPT"),e=t.length-1;0<=e;--e){var r=t[e].src,n=-1==(n=r.lastIndexOf("?"))?r.length:n;if("base.js"==r.substr(n-7,7)){goog.basePath=r.substr(0,n-7);break}}},goog.importScript_=function(t,e){(goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_)(t,e)&&(goog.dependencies_.written[t]=!0)},goog.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.oldIeWaiting_=!1,goog.importProcessedScript_=function(t,e,r){goog.importScript_("",'goog.retrieveAndExec_("'+t+'", '+e+", "+r+");")},goog.queuedModules_=[],goog.wrapModule_=function(t,e){return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(e+"\n//# sourceURL="+t+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+e+"\n;return exports});\n//# sourceURL="+t+"\n"},goog.loadQueuedModules_=function(){var t=goog.queuedModules_.length;if(0<t){var e=goog.queuedModules_;goog.queuedModules_=[];for(var r=0;r<t;r++)goog.maybeProcessDeferredPath_(e[r])}goog.oldIeWaiting_=!1},goog.maybeProcessDeferredDep_=function(t){goog.isDeferredModule_(t)&&goog.allDepsAreAvailable_(t)&&(t=goog.getPathFromDeps_(t),goog.maybeProcessDeferredPath_(goog.basePath+t))},goog.isDeferredModule_=function(t){var e=(t=goog.getPathFromDeps_(t))&&goog.dependencies_.loadFlags[t]||{},r=e.lang||"es3";return!(!t||"goog"!=e.module&&!goog.needsTranspile_(r))&&goog.basePath+t in goog.dependencies_.deferred},goog.allDepsAreAvailable_=function(t){if((t=goog.getPathFromDeps_(t))&&t in goog.dependencies_.requires)for(var e in goog.dependencies_.requires[t])if(!goog.isProvided_(e)&&!goog.isDeferredModule_(e))return!1;return!0},goog.maybeProcessDeferredPath_=function(t){if(t in goog.dependencies_.deferred){var e=goog.dependencies_.deferred[t];delete goog.dependencies_.deferred[t],goog.globalEval(e)}},goog.loadModuleFromUrl=function(t){goog.retrieveAndExec_(t,!0,!1)},goog.writeScriptSrcNode_=function(t){goog.global.document.write('<script type="text/javascript" src="'+t+'"><\/script>')},goog.appendScriptSrcNode_=function(t){var e=goog.global.document,r=e.createElement("script");r.type="text/javascript",r.src=t,r.defer=!1,r.async=!1,e.head.appendChild(r)},goog.writeScriptTag_=function(t,e){if(goog.inHtmlDocument_()){var r=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&"complete"==r.readyState){if(/\bdeps.js$/.test(t))return!1;throw Error('Cannot write "'+t+'" after document load')}if(void 0===e)if(goog.IS_OLD_IE_){goog.oldIeWaiting_=!0;var n=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ";r.write('<script type="text/javascript" src="'+t+'"'+n+"><\/script>")}else goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING?goog.appendScriptSrcNode_(t):goog.writeScriptSrcNode_(t);else r.write('<script type="text/javascript">'+goog.protectScriptTag_(e)+"<\/script>");return!0}return!1},goog.protectScriptTag_=function(t){return t.replace(/<\/(SCRIPT)/gi,"\\x3c/$1")},goog.needsTranspile_=function(t){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1;if(goog.requiresTranspilation_||(goog.requiresTranspilation_=goog.createRequiresTranspilation_()),t in goog.requiresTranspilation_)return goog.requiresTranspilation_[t];throw Error("Unknown language mode: "+t)},goog.requiresTranspilation_=null,goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(t,e){return"complete"==t.readyState&&goog.lastNonModuleScriptIndex_==e&&goog.loadQueuedModules_(),!0},goog.writeScripts_=function(t){var e=[],r={},n=goog.dependencies_;!function t(o){if(!(o in n.written||o in n.visited)){if(n.visited[o]=!0,o in n.requires)for(var i in n.requires[o])if(!goog.isProvided_(i)){if(!(i in n.nameToPath))throw Error("Undefined nameToPath for "+i);t(n.nameToPath[i])}o in r||(r[o]=!0,e.push(o))}}(t);for(var o=0;o<e.length;o++)t=e[o],goog.dependencies_.written[t]=!0;var i=goog.moduleLoaderState_;for(goog.moduleLoaderState_=null,o=0;o<e.length;o++){if(!(t=e[o]))throw goog.moduleLoaderState_=i,Error("Undefined script input");var a=n.loadFlags[t]||{},s=goog.needsTranspile_(a.lang||"es3");"goog"==a.module||s?goog.importProcessedScript_(goog.basePath+t,"goog"==a.module,s):goog.importScript_(goog.basePath+t)}goog.moduleLoaderState_=i},goog.getPathFromDeps_=function(t){return t in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[t]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")),goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(null==goog.hasBadLetScoping){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(b){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(t){return"(function(){"+t+"\n;})();\n"},goog.loadModule=function(t){var e=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:void 0,declareLegacyNamespace:!1},goog.isFunction(t))var r=t.call(void 0,{});else{if(!goog.isString(t))throw Error("Invalid module definition");goog.useSafari10Workaround()&&(t=goog.workaroundSafari10EvalBug(t)),r=goog.loadModuleFromSource_.call(void 0,t)}var n=goog.moduleLoaderState_.moduleName;if(!goog.isString(n)||!n)throw Error('Invalid module name "'+n+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(n,r):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof r&&null!=r&&Object.seal(r),goog.loadedModules_[n]=r}finally{goog.moduleLoaderState_=e}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(t){t=t.split("/");for(var e=0;e<t.length;)"."==t[e]?t.splice(e,1):e&&".."==t[e]&&t[e-1]&&".."!=t[e-1]?t.splice(--e,2):e++;return t.join("/")},goog.loadFileSync_=function(t){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(t);try{var e=new goog.global.XMLHttpRequest;return e.open("get",t,!1),e.send(),0==e.status||200==e.status?e.responseText:null}catch(r){return null}},goog.retrieveAndExec_=function(t,e,r){if(!COMPILED){var n=t;t=goog.normalizePath_(t);var o=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,i=goog.loadFileSync_(t);if(null==i)throw Error('Load of "'+t+'" failed');r&&(i=goog.transpile_.call(goog.global,i,t)),i=e?goog.wrapModule_(t,i):i+"\n//# sourceURL="+t,goog.IS_OLD_IE_&&goog.oldIeWaiting_?(goog.dependencies_.deferred[n]=i,goog.queuedModules_.push(n)):o(t,i)}},goog.transpile_=function(a,b){var c=goog.global.$jscomp;c||(goog.global.$jscomp=c={});var d=c.transpile;if(!d){var e=goog.basePath+goog.TRANSPILER,f=goog.loadFileSync_(e);if(f){if(eval(f+"\n//# sourceURL="+e),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,c=goog.global.$jscomp,d=c.transpile}}return d||(d=c.transpile=function(t,e){return goog.logToConsole_(e+" requires transpilation but no transpiler was found."),t}),d(a,b)},goog.typeOf=function(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var r=Object.prototype.toString.call(t);if("[object Window]"==r)return"object";if("[object Array]"==r||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==r||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e},goog.isNull=function(t){return null===t},goog.isDefAndNotNull=function(t){return null!=t},goog.isArray=function(t){return"array"==goog.typeOf(t)},goog.isArrayLike=function(t){var e=goog.typeOf(t);return"array"==e||"object"==e&&"number"==typeof t.length},goog.isDateLike=function(t){return goog.isObject(t)&&"function"==typeof t.getFullYear},goog.isString=function(t){return"string"==typeof t},goog.isBoolean=function(t){return"boolean"==typeof t},goog.isNumber=function(t){return"number"==typeof t},goog.isFunction=function(t){return"function"==goog.typeOf(t)},goog.isObject=function(t){var e=typeof t;return"object"==e&&null!=t||"function"==e},goog.getUid=function(t){return t[goog.UID_PROPERTY_]||(t[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(t){return!!t[goog.UID_PROPERTY_]},goog.removeUid=function(t){null!==t&&"removeAttribute"in t&&t.removeAttribute(goog.UID_PROPERTY_);try{delete t[goog.UID_PROPERTY_]}catch(e){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(t){if("object"==(r=goog.typeOf(t))||"array"==r){if(t.clone)return t.clone();var e,r="array"==r?[]:{};for(e in t)r[e]=goog.cloneObject(t[e]);return r}return t},goog.bindNative_=function(t,e,r){return t.call.apply(t.bind,arguments)},goog.bindJs_=function(t,e,r){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),t.apply(e,r)}}return function(){return t.apply(e,arguments)}},goog.bind=function(t,e,r){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(t,e){var r=Array.prototype.slice.call(arguments,1);return function(){var e=r.slice();return e.push.apply(e,arguments),t.apply(this,e)}},goog.mixin=function(t,e){for(var r in e)t[r]=e[r]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(t){if(goog.global.execScript)goog.global.execScript(t,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_)if(goog.global.eval("var _evalTest_ = 1;"),void 0!==goog.global._evalTest_){try{delete goog.global._evalTest_}catch(n){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1;if(goog.evalWorksForGlobals_)goog.global.eval(t);else{var e=goog.global.document,r=e.createElement("SCRIPT");r.type="text/javascript",r.defer=!1,r.appendChild(e.createTextNode(t)),e.body.appendChild(r),e.body.removeChild(r)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(t,e){if("."==String(t).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+t);var r=function(t){return goog.cssNameMapping_[t]||t},n=function(t){t=t.split("-");for(var e=[],n=0;n<t.length;n++)e.push(r(t[n]));return e.join("-")};n=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?r:n:function(t){return t},n=e?t+"-"+n(e):n(t);return goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(n):n},goog.setCssNameMapping=function(t,e){goog.cssNameMapping_=t,goog.cssNameMappingStyle_=e},!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(t,e){return e&&(t=t.replace(/\{\$([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),t},goog.getMsgWithFallback=function(t,e){return t},goog.exportSymbol=function(t,e,r){goog.exportPath_(t,e,r)},goog.exportProperty=function(t,e,r){t[e]=r},goog.inherits=function(t,e){function r(){}r.prototype=e.prototype,t.superClass_=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.base=function(t,r,n){for(var o=Array(arguments.length-2),i=2;i<arguments.length;i++)o[i-2]=arguments[i];return e.prototype[r].apply(t,o)}},goog.base=function(t,e,r){var n=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!n)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(n.superClass_){for(var o=Array(arguments.length-1),i=1;i<arguments.length;i++)o[i-1]=arguments[i];return n.superClass_.constructor.apply(t,o)}for(o=Array(arguments.length-2),i=2;i<arguments.length;i++)o[i-2]=arguments[i];i=!1;for(var a=t.constructor;a;a=a.superClass_&&a.superClass_.constructor)if(a.prototype[e]===n)i=!0;else if(i)return a.prototype[e].apply(t,o);if(t[e]===n)return t.constructor.prototype[e].apply(t,o);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(t){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a goog.module.");t.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(t,e){var r=e.constructor,n=e.statics;return r&&r!=Object.prototype.constructor||(r=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),r=goog.defineClass.createSealingConstructor_(r,t),t&&goog.inherits(r,t),delete e.constructor,delete e.statics,goog.defineClass.applyProperties_(r.prototype,e),null!=n&&(n instanceof Function?n(r):goog.defineClass.applyProperties_(r,n)),r},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(t,e){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return t;var r=!goog.defineClass.isUnsealable_(e),n=function(){var e=t.apply(this,arguments)||this;return e[goog.UID_PROPERTY_]=e[goog.UID_PROPERTY_],this.constructor===n&&r&&Object.seal instanceof Function&&Object.seal(e),e};return n},goog.defineClass.isUnsealable_=function(t){return t&&t.prototype&&t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);for(var n=0;n<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;n++)r=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[n],Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},goog.tagUnsealableClass=function(t){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.createRequiresTranspilation_=function(){function a(t,e){d?c[t]=!0:e()?c[t]=!1:d=c[t]=!0}function b(a){try{return!!eval(a)}catch(g){return!1}}var c={es3:!1},d=!1,e=goog.global.navigator&&goog.global.navigator.userAgent?goog.global.navigator.userAgent:"";return a("es5",function(){return b("[1,].length==1")}),a("es6",function(){var t=e.match(/Edge\/(\d+)(\.\d)*/i);return!(t&&15>Number(t[1]))&&b('(()=>{"use strict";class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()')}),a("es6-impl",function(){return!0}),a("es7",function(){return b("2 ** 2 == 4")}),a("es8",function(){return b("async () => 1, true")}),c},goog.debug={},goog.debug.Error=function(t){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.string={},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:""},goog.string.startsWith=function(t,e){return 0==t.lastIndexOf(e,0)},goog.string.endsWith=function(t,e){var r=t.length-e.length;return 0<=r&&t.indexOf(e,r)==r},goog.string.caseInsensitiveStartsWith=function(t,e){return 0==goog.string.caseInsensitiveCompare(e,t.substr(0,e.length))},goog.string.caseInsensitiveEndsWith=function(t,e){return 0==goog.string.caseInsensitiveCompare(e,t.substr(t.length-e.length,e.length))},goog.string.caseInsensitiveEquals=function(t,e){return t.toLowerCase()==e.toLowerCase()},goog.string.subs=function(t,e){for(var r=t.split("%s"),n="",o=Array.prototype.slice.call(arguments,1);o.length&&1<r.length;)n+=r.shift()+o.shift();return n+r.join("%s")},goog.string.collapseWhitespace=function(t){return t.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=function(t){return/^[\s\xa0]*$/.test(t)},goog.string.isEmptyString=function(t){return 0==t.length},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(t){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(t))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(t){return!/[^\t\n\r ]/.test(t)},goog.string.isAlpha=function(t){return!/[^a-zA-Z]/.test(t)},goog.string.isNumeric=function(t){return!/[^0-9]/.test(t)},goog.string.isAlphaNumeric=function(t){return!/[^a-zA-Z0-9]/.test(t)},goog.string.isSpace=function(t){return" "==t},goog.string.isUnicodeChar=function(t){return 1==t.length&&" "<=t&&"~">=t||""<=t&&"">=t},goog.string.stripNewlines=function(t){return t.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(t){return t.replace(/(\r\n|\r|\n)/g,"\n")},goog.string.normalizeWhitespace=function(t){return t.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(t){return t.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(t){return t.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},goog.string.trimLeft=function(t){return t.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(t){return t.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=function(t,e){var r=String(t).toLowerCase(),n=String(e).toLowerCase();return r<n?-1:r==n?0:1},goog.string.numberAwareCompare_=function(t,e,r){if(t==e)return 0;if(!t)return-1;if(!e)return 1;for(var n=t.toLowerCase().match(r),o=e.toLowerCase().match(r),i=Math.min(n.length,o.length),a=0;a<i;a++){r=n[a];var s=o[a];if(r!=s)return t=parseInt(r,10),!isNaN(t)&&(e=parseInt(s,10),!isNaN(e)&&t-e)?t-e:r<s?-1:1}return n.length!=o.length?n.length-o.length:t<e?-1:1},goog.string.intAwareCompare=function(t,e){return goog.string.numberAwareCompare_(t,e,/\d+|\D+/g)},goog.string.floatAwareCompare=function(t,e){return goog.string.numberAwareCompare_(t,e,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(t){return encodeURIComponent(String(t))},goog.string.urlDecode=function(t){return decodeURIComponent(t.replace(/\+/g," "))},goog.string.newLineToBr=function(t,e){return t.replace(/(\r\n|\r|\n)/g,e?"<br />":"<br>")},goog.string.htmlEscape=function(t,e){if(e)t=t.replace(goog.string.AMP_RE_,"&amp;").replace(goog.string.LT_RE_,"&lt;").replace(goog.string.GT_RE_,"&gt;").replace(goog.string.QUOT_RE_,"&quot;").replace(goog.string.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.NULL_RE_,"&#0;"),goog.string.DETECT_DOUBLE_ESCAPING&&(t=t.replace(goog.string.E_RE_,"&#101;"));else{if(!goog.string.ALL_RE_.test(t))return t;-1!=t.indexOf("&")&&(t=t.replace(goog.string.AMP_RE_,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(goog.string.LT_RE_,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(goog.string.GT_RE_,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(goog.string.QUOT_RE_,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(goog.string.SINGLE_QUOTE_RE_,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(goog.string.NULL_RE_,"&#0;")),goog.string.DETECT_DOUBLE_ESCAPING&&-1!=t.indexOf("e")&&(t=t.replace(goog.string.E_RE_,"&#101;"))}return t},goog.string.AMP_RE_=/&/g,goog.string.LT_RE_=/</g,goog.string.GT_RE_=/>/g,goog.string.QUOT_RE_=/"/g,goog.string.SINGLE_QUOTE_RE_=/'/g,goog.string.NULL_RE_=/\x00/g,goog.string.E_RE_=/e/g,goog.string.ALL_RE_=goog.string.DETECT_DOUBLE_ESCAPING?/[\x00&<>"'e]/:/[\x00&<>"']/,goog.string.unescapeEntities=function(t){return goog.string.contains(t,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(t):goog.string.unescapePureXmlEntities_(t):t},goog.string.unescapeEntitiesWithDocument=function(t,e){return goog.string.contains(t,"&")?goog.string.unescapeEntitiesUsingDom_(t,e):t},goog.string.unescapeEntitiesUsingDom_=function(t,e){var r={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},n=e?e.createElement("div"):goog.global.document.createElement("div");return t.replace(goog.string.HTML_ENTITY_PATTERN_,function(t,e){var o=r[t];if(o)return o;if("#"==e.charAt(0)){var i=Number("0"+e.substr(1));isNaN(i)||(o=String.fromCharCode(i))}return o||(n.innerHTML=t+" ",o=n.firstChild.nodeValue.slice(0,-1)),r[t]=o})},goog.string.unescapePureXmlEntities_=function(t){return t.replace(/&([^;]+);/g,function(t,e){switch(e){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:if("#"==e.charAt(0)){var r=Number("0"+e.substr(1));if(!isNaN(r))return String.fromCharCode(r)}return t}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(t,e){return goog.string.newLineToBr(t.replace(/  /g," &#160;"),e)},goog.string.preserveSpaces=function(t){return t.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(t,e){for(var r=e.length,n=0;n<r;n++){var o=1==r?e:e.charAt(n);if(t.charAt(0)==o&&t.charAt(t.length-1)==o)return t.substring(1,t.length-1)}return t},goog.string.truncate=function(t,e,r){return r&&(t=goog.string.unescapeEntities(t)),t.length>e&&(t=t.substring(0,e-3)+"..."),r&&(t=goog.string.htmlEscape(t)),t},goog.string.truncateMiddle=function(t,e,r,n){if(r&&(t=goog.string.unescapeEntities(t)),n&&t.length>e){n>e&&(n=e);var o=t.length-n;t=t.substring(0,e-n)+"..."+t.substring(o)}else t.length>e&&(n=Math.floor(e/2),o=t.length-n,t=t.substring(0,n+e%2)+"..."+t.substring(o));return r&&(t=goog.string.htmlEscape(t)),t},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"<"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(t){t=String(t);for(var e=['"'],r=0;r<t.length;r++){var n=t.charAt(r),o=n.charCodeAt(0);e[r+1]=goog.string.specialEscapeChars_[n]||(31<o&&127>o?n:goog.string.escapeChar(n))}return e.push('"'),e.join("")},goog.string.escapeString=function(t){for(var e=[],r=0;r<t.length;r++)e[r]=goog.string.escapeChar(t.charAt(r));return e.join("")},goog.string.escapeChar=function(t){if(t in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[t];if(t in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[t]=goog.string.specialEscapeChars_[t];var e=t.charCodeAt(0);if(31<e&&127>e)var r=t;else 256>e?(r="\\x",(16>e||256<e)&&(r+="0")):(r="\\u",4096>e&&(r+="0")),r+=e.toString(16).toUpperCase();return goog.string.jsEscapeCache_[t]=r},goog.string.contains=function(t,e){return-1!=t.indexOf(e)},goog.string.caseInsensitiveContains=function(t,e){return goog.string.contains(t.toLowerCase(),e.toLowerCase())},goog.string.countOf=function(t,e){return t&&e?t.split(e).length-1:0},goog.string.removeAt=function(t,e,r){var n=t;return 0<=e&&e<t.length&&0<r&&(n=t.substr(0,e)+t.substr(e+r,t.length-e-r)),n},goog.string.remove=function(t,e){return t.replace(e,"")},goog.string.removeAll=function(t,e){var r=new RegExp(goog.string.regExpEscape(e),"g");return t.replace(r,"")},goog.string.replaceAll=function(t,e,r){return e=new RegExp(goog.string.regExpEscape(e),"g"),t.replace(e,r.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(t){return String(t).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(t,e){return t.repeat(e)}:function(t,e){return Array(e+1).join(t)},goog.string.padNumber=function(t,e,r){return-1==(r=(t=goog.isDef(r)?t.toFixed(r):String(t)).indexOf("."))&&(r=t.length),goog.string.repeat("0",Math.max(0,e-r))+t},goog.string.makeSafe=function(t){return null==t?"":String(t)},goog.string.buildString=function(t){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=function(t,e){for(var r=0,n=goog.string.trim(String(t)).split("."),o=goog.string.trim(String(e)).split("."),i=Math.max(n.length,o.length),a=0;0==r&&a<i;a++){var s=n[a]||"",c=o[a]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==s[0].length&&0==c[0].length)break;r=0==s[1].length?0:parseInt(s[1],10);var u=0==c[1].length?0:parseInt(c[1],10);r=goog.string.compareElements_(r,u)||goog.string.compareElements_(0==s[2].length,0==c[2].length)||goog.string.compareElements_(s[2],c[2]),s=s[3],c=c[3]}while(0==r)}return r},goog.string.compareElements_=function(t,e){return t<e?-1:t>e?1:0},goog.string.hashCode=function(t){for(var e=0,r=0;r<t.length;++r)e=31*e+t.charCodeAt(r)>>>0;return e},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(t){var e=Number(t);return 0==e&&goog.string.isEmptyOrWhitespace(t)?NaN:e},goog.string.isLowerCamelCase=function(t){return/^[a-z]+([A-Z][a-z]*)*$/.test(t)},goog.string.isUpperCamelCase=function(t){return/^([A-Z][a-z]*)+$/.test(t)},goog.string.toCamelCase=function(t){return String(t).replace(/\-([a-z])/g,function(t,e){return e.toUpperCase()})},goog.string.toSelectorCase=function(t){return String(t).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(t,e){var r=goog.isString(e)?goog.string.regExpEscape(e):"\\s";return t.replace(new RegExp("(^"+(r?"|["+r+"]+":"")+")([a-z])","g"),function(t,e,r){return e+r.toUpperCase()})},goog.string.capitalize=function(t){return String(t.charAt(0)).toUpperCase()+String(t.substr(1)).toLowerCase()},goog.string.parseInt=function(t){return isFinite(t)&&(t=String(t)),goog.isString(t)?/^\s*-?0x/i.test(t)?parseInt(t,16):parseInt(t,10):NaN},goog.string.splitLimit=function(t,e,r){t=t.split(e);for(var n=[];0<r&&t.length;)n.push(t.shift()),r--;return t.length&&n.push(t.join(e)),n},goog.string.lastComponent=function(t,e){if(!e)return t;"string"==typeof e&&(e=[e]);for(var r=-1,n=0;n<e.length;n++)if(""!=e[n]){var o=t.lastIndexOf(e[n]);o>r&&(r=o)}return-1==r?t:t.slice(r+1)},goog.string.editDistance=function(t,e){var r=[],n=[];if(t==e)return 0;if(!t.length||!e.length)return Math.max(t.length,e.length);for(var o=0;o<e.length+1;o++)r[o]=o;for(o=0;o<t.length;o++){n[0]=o+1;for(var i=0;i<e.length;i++)n[i+1]=Math.min(n[i]+1,r[i+1]+1,r[i]+Number(t[o]!=e[i]));for(i=0;i<r.length;i++)r[i]=n[i]}return n[e.length]},goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(t,e){e.unshift(t),goog.debug.Error.call(this,goog.string.subs.apply(null,e)),e.shift(),this.messagePattern=t},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(t){throw t},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.doAssertFailure_=function(t,e,r,n){var o="Assertion failed";if(r){o+=": "+r;var i=n}else t&&(o+=": "+t,i=e);t=new goog.asserts.AssertionError(""+o,i||[]),goog.asserts.errorHandler_(t)},goog.asserts.setErrorHandler=function(t){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=t)},goog.asserts.assert=function(t,e,r){return goog.asserts.ENABLE_ASSERTS&&!t&&goog.asserts.doAssertFailure_("",null,e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.fail=function(t,e){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(t,e,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(t)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertString=function(t,e,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isString(t)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertFunction=function(t,e,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(t)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertObject=function(t,e,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(t)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertArray=function(t,e,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(t)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertBoolean=function(t,e,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(t)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertElement=function(t,e,r){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(t)&&t.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertInstanceof=function(t,e,r,n){return!goog.asserts.ENABLE_ASSERTS||t instanceof e||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(e),goog.asserts.getType_(t)],r,Array.prototype.slice.call(arguments,3)),t},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var t in Object.prototype)goog.asserts.fail(t+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(t){return t instanceof Function?t.displayName||t.name||"unknown type name":t instanceof Object?t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t):null===t?"null":typeof t},goog.object={},goog.object.is=function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e},goog.object.forEach=function(t,e,r){for(var n in t)e.call(r,t[n],n,t)},goog.object.filter=function(t,e,r){var n,o={};for(n in t)e.call(r,t[n],n,t)&&(o[n]=t[n]);return o},goog.object.map=function(t,e,r){var n,o={};for(n in t)o[n]=e.call(r,t[n],n,t);return o},goog.object.some=function(t,e,r){for(var n in t)if(e.call(r,t[n],n,t))return!0;return!1},goog.object.every=function(t,e,r){for(var n in t)if(!e.call(r,t[n],n,t))return!1;return!0},goog.object.getCount=function(t){var e,r=0;for(e in t)r++;return r},goog.object.getAnyKey=function(t){for(var e in t)return e},goog.object.getAnyValue=function(t){for(var e in t)return t[e]},goog.object.contains=function(t,e){return goog.object.containsValue(t,e)},goog.object.getValues=function(t){var e,r=[],n=0;for(e in t)r[n++]=t[e];return r},goog.object.getKeys=function(t){var e,r=[],n=0;for(e in t)r[n++]=e;return r},goog.object.getValueByKeys=function(t,e){for(var r=(n=goog.isArrayLike(e))?e:arguments,n=n?0:1;n<r.length&&(t=t[r[n]],goog.isDef(t));n++);return t},goog.object.containsKey=function(t,e){return null!==t&&e in t},goog.object.containsValue=function(t,e){for(var r in t)if(t[r]==e)return!0;return!1},goog.object.findKey=function(t,e,r){for(var n in t)if(e.call(r,t[n],n,t))return n},goog.object.findValue=function(t,e,r){return(e=goog.object.findKey(t,e,r))&&t[e]},goog.object.isEmpty=function(t){for(var e in t)return!1;return!0},goog.object.clear=function(t){for(var e in t)delete t[e]},goog.object.remove=function(t,e){var r;return(r=e in t)&&delete t[e],r},goog.object.add=function(t,e,r){if(null!==t&&e in t)throw Error('The object already contains the key "'+e+'"');goog.object.set(t,e,r)},goog.object.get=function(t,e,r){return null!==t&&e in t?t[e]:r},goog.object.set=function(t,e,r){t[e]=r},goog.object.setIfUndefined=function(t,e,r){return e in t?t[e]:t[e]=r},goog.object.setWithReturnValueIfNotSet=function(t,e,r){return e in t?t[e]:(r=r(),t[e]=r)},goog.object.equals=function(t,e){for(var r in t)if(!(r in e)||t[r]!==e[r])return!1;for(r in e)if(!(r in t))return!1;return!0},goog.object.clone=function(t){var e,r={};for(e in t)r[e]=t[e];return r},goog.object.unsafeClone=function(t){if("object"==(r=goog.typeOf(t))||"array"==r){if(goog.isFunction(t.clone))return t.clone();var e,r="array"==r?[]:{};for(e in t)r[e]=goog.object.unsafeClone(t[e]);return r}return t},goog.object.transpose=function(t){var e,r={};for(e in t)r[t[e]]=e;return r},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(t,e){for(var r,n,o=1;o<arguments.length;o++){for(r in n=arguments[o])t[r]=n[r];for(var i=0;i<goog.object.PROTOTYPE_FIELDS_.length;i++)r=goog.object.PROTOTYPE_FIELDS_[i],Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}},goog.object.create=function(t){var e=arguments.length;if(1==e&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(e%2)throw Error("Uneven number of arguments");for(var r={},n=0;n<e;n+=2)r[arguments[n]]=arguments[n+1];return r},goog.object.createSet=function(t){var e=arguments.length;if(1==e&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var r={},n=0;n<e;n++)r[arguments[n]]=!0;return r},goog.object.createImmutableView=function(t){var e=t;return Object.isFrozen&&!Object.isFrozen(t)&&(e=Object.create(t),Object.freeze(e)),e},goog.object.isImmutableView=function(t){return!!Object.isFrozen&&Object.isFrozen(t)},goog.object.getAllPropertyNames=function(t,e,r){if(!t)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(t);for(var n={};t&&(t!==Object.prototype||e)&&(t!==Function.prototype||r);){for(var o=Object.getOwnPropertyNames(t),i=0;i<o.length;i++)n[o[i]]=!0;t=Object.getPrototypeOf(t)}return goog.object.getKeys(n)},goog.reflect={},goog.reflect.object=function(t,e){return e},goog.reflect.objectProperty=function(t,e){return t},goog.reflect.sinkValue=function(t){return goog.reflect.sinkValue[" "](t),t},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(t,e){try{return goog.reflect.sinkValue(t[e]),!0}catch(r){}return!1},goog.reflect.cache=function(t,e,r,n){return n=n?n(e):e,Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=r(e)},goog.math={},goog.math.Long=function(t,e){this.low_=0|t,this.high_=0|e},goog.math.Long.IntCache_={},goog.math.Long.valueCache_={},goog.math.Long.getCachedIntValue_=function(t){return goog.reflect.cache(goog.math.Long.IntCache_,t,function(t){return new goog.math.Long(t,0>t?-1:0)})},goog.math.Long.MAX_VALUE_FOR_RADIX_="  111111111111111111111111111111111111111111111111111111111111111 2021110011022210012102010021220101220221 13333333333333333333333333333333 1104332401304422434310311212 1540241003031030222122211 22341010611245052052300 777777777777777777777 67404283172107811827 9223372036854775807 1728002635214590697 41a792678515120367 10b269549075433c37 4340724c6c71dc7a7 160e2ad3246366807 7fffffffffffffff 33d3d8307b214008 16agh595df825fa7 ba643dci0ffeehh 5cbfjia3fh26ja7 2heiciiie82dh97 1adaibb21dckfa7 i6k448cf4192c2 acd772jnc9l0l7 64ie1focnn5g77 3igoecjbmca687 27c48l5b37oaop 1bk39f3ah3dmq7 q1se8f0m04isb hajppbc1fc207 bm03i95hia437 7vvvvvvvvvvvv 5hg4ck9jd4u37 3tdtk1v8j6tpp 2pijmikexrxp7 1y2p0ij32e8e7".split(" "),goog.math.Long.MIN_VALUE_FOR_RADIX_="  -1000000000000000000000000000000000000000000000000000000000000000 -2021110011022210012102010021220101220222 -20000000000000000000000000000000 -1104332401304422434310311213 -1540241003031030222122212 -22341010611245052052301 -1000000000000000000000 -67404283172107811828 -9223372036854775808 -1728002635214590698 -41a792678515120368 -10b269549075433c38 -4340724c6c71dc7a8 -160e2ad3246366808 -8000000000000000 -33d3d8307b214009 -16agh595df825fa8 -ba643dci0ffeehi -5cbfjia3fh26ja8 -2heiciiie82dh98 -1adaibb21dckfa8 -i6k448cf4192c3 -acd772jnc9l0l8 -64ie1focnn5g78 -3igoecjbmca688 -27c48l5b37oaoq -1bk39f3ah3dmq8 -q1se8f0m04isc -hajppbc1fc208 -bm03i95hia438 -8000000000000 -5hg4ck9jd4u38 -3tdtk1v8j6tpq -2pijmikexrxp8 -1y2p0ij32e8e8".split(" "),goog.math.Long.fromInt=function(t){var e=0|t;return goog.asserts.assert(t===e,"value should be a 32-bit integer"),-128<=e&&128>e?goog.math.Long.getCachedIntValue_(e):new goog.math.Long(e,0>e?-1:0)},goog.math.Long.fromNumber=function(t){return isNaN(t)?goog.math.Long.getZero():t<=-goog.math.Long.TWO_PWR_63_DBL_?goog.math.Long.getMinValue():t+1>=goog.math.Long.TWO_PWR_63_DBL_?goog.math.Long.getMaxValue():0>t?goog.math.Long.fromNumber(-t).negate():new goog.math.Long(t%goog.math.Long.TWO_PWR_32_DBL_|0,t/goog.math.Long.TWO_PWR_32_DBL_|0)},goog.math.Long.fromBits=function(t,e){return new goog.math.Long(t,e)},goog.math.Long.fromString=function(t,e){if(0==t.length)throw Error("number format error: empty string");var r=e||10;if(2>r||36<r)throw Error("radix out of range: "+r);if("-"==t.charAt(0))return goog.math.Long.fromString(t.substring(1),r).negate();if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character: '+t);for(var n=goog.math.Long.fromNumber(Math.pow(r,8)),o=goog.math.Long.getZero(),i=0;i<t.length;i+=8){var a=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+a),r);8>a?(a=goog.math.Long.fromNumber(Math.pow(r,a)),o=o.multiply(a).add(goog.math.Long.fromNumber(s))):o=(o=o.multiply(n)).add(goog.math.Long.fromNumber(s))}return o},goog.math.Long.isStringInRange=function(t,e){var r=e||10;if(2>r||36<r)throw Error("radix out of range: "+r);return r="-"==t.charAt(0)?goog.math.Long.MIN_VALUE_FOR_RADIX_[r]:goog.math.Long.MAX_VALUE_FOR_RADIX_[r],t.length<r.length||t.length==r.length&&t<=r},goog.math.Long.TWO_PWR_16_DBL_=65536,goog.math.Long.TWO_PWR_32_DBL_=goog.math.Long.TWO_PWR_16_DBL_*goog.math.Long.TWO_PWR_16_DBL_,goog.math.Long.TWO_PWR_64_DBL_=goog.math.Long.TWO_PWR_32_DBL_*goog.math.Long.TWO_PWR_32_DBL_,goog.math.Long.TWO_PWR_63_DBL_=goog.math.Long.TWO_PWR_64_DBL_/2,goog.math.Long.getZero=function(){return goog.math.Long.getCachedIntValue_(0)},goog.math.Long.getOne=function(){return goog.math.Long.getCachedIntValue_(1)},goog.math.Long.getNegOne=function(){return goog.math.Long.getCachedIntValue_(-1)},goog.math.Long.getMaxValue=function(){return goog.reflect.cache(goog.math.Long.valueCache_,goog.math.Long.ValueCacheId_.MAX_VALUE,function(){return goog.math.Long.fromBits(-1,2147483647)})},goog.math.Long.getMinValue=function(){return goog.reflect.cache(goog.math.Long.valueCache_,goog.math.Long.ValueCacheId_.MIN_VALUE,function(){return goog.math.Long.fromBits(0,-2147483648)})},goog.math.Long.getTwoPwr24=function(){return goog.reflect.cache(goog.math.Long.valueCache_,goog.math.Long.ValueCacheId_.TWO_PWR_24,function(){return goog.math.Long.fromInt(16777216)})},goog.math.Long.prototype.toInt=function(){return this.low_},goog.math.Long.prototype.toNumber=function(){return this.high_*goog.math.Long.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()},goog.math.Long.prototype.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(this.isZero())return"0";if(this.isNegative()){if(this.equals(goog.math.Long.getMinValue())){var e=goog.math.Long.fromNumber(t),r=this.div(e);return e=r.multiply(e).subtract(this),r.toString(t)+e.toInt().toString(t)}return"-"+this.negate().toString(t)}r=goog.math.Long.fromNumber(Math.pow(t,6)),e=this;for(var n="";;){var o=e.div(r),i=(e.subtract(o.multiply(r)).toInt()>>>0).toString(t);if((e=o).isZero())return i+n;for(;6>i.length;)i="0"+i;n=""+i+n}},goog.math.Long.prototype.getHighBits=function(){return this.high_},goog.math.Long.prototype.getLowBits=function(){return this.low_},goog.math.Long.prototype.getLowBitsUnsigned=function(){return 0<=this.low_?this.low_:goog.math.Long.TWO_PWR_32_DBL_+this.low_},goog.math.Long.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(goog.math.Long.getMinValue())?64:this.negate().getNumBitsAbs();for(var t=0!=this.high_?this.high_:this.low_,e=31;0<e&&0==(t&1<<e);e--);return 0!=this.high_?e+33:e+1},goog.math.Long.prototype.isZero=function(){return 0==this.high_&&0==this.low_},goog.math.Long.prototype.isNegative=function(){return 0>this.high_},goog.math.Long.prototype.isOdd=function(){return 1==(1&this.low_)},goog.math.Long.prototype.equals=function(t){return this.high_==t.high_&&this.low_==t.low_},goog.math.Long.prototype.notEquals=function(t){return this.high_!=t.high_||this.low_!=t.low_},goog.math.Long.prototype.lessThan=function(t){return 0>this.compare(t)},goog.math.Long.prototype.lessThanOrEqual=function(t){return 0>=this.compare(t)},goog.math.Long.prototype.greaterThan=function(t){return 0<this.compare(t)},goog.math.Long.prototype.greaterThanOrEqual=function(t){return 0<=this.compare(t)},goog.math.Long.prototype.compare=function(t){if(this.equals(t))return 0;var e=this.isNegative(),r=t.isNegative();return e&&!r?-1:!e&&r?1:this.subtract(t).isNegative()?-1:1},goog.math.Long.prototype.negate=function(){return this.equals(goog.math.Long.getMinValue())?goog.math.Long.getMinValue():this.not().add(goog.math.Long.getOne())},goog.math.Long.prototype.add=function(t){var e=this.high_>>>16,r=65535&this.high_,n=this.low_>>>16,o=t.high_>>>16,i=65535&t.high_,a=t.low_>>>16;return n=0+((a=0+((t=(65535&this.low_)+(65535&t.low_)+0)>>>16)+(n+a))>>>16),e=0+((n+=r+i)>>>16)+(e+o)&65535,goog.math.Long.fromBits((65535&a)<<16|65535&t,e<<16|65535&n)},goog.math.Long.prototype.subtract=function(t){return this.add(t.negate())},goog.math.Long.prototype.multiply=function(t){if(this.isZero()||t.isZero())return goog.math.Long.getZero();if(this.equals(goog.math.Long.getMinValue()))return t.isOdd()?goog.math.Long.getMinValue():goog.math.Long.getZero();if(t.equals(goog.math.Long.getMinValue()))return this.isOdd()?goog.math.Long.getMinValue():goog.math.Long.getZero();if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(goog.math.Long.getTwoPwr24())&&t.lessThan(goog.math.Long.getTwoPwr24()))return goog.math.Long.fromNumber(this.toNumber()*t.toNumber());var e=this.high_>>>16,r=65535&this.high_,n=this.low_>>>16,o=65535&this.low_,i=t.high_>>>16,a=65535&t.high_,s=t.low_>>>16,c=0+o*(t=65535&t.low_),u=0+(c>>>16)+n*t,g=0+(u>>>16);g+=(u=(65535&u)+o*s)>>>16;var l=0+((g+=r*t)>>>16);return l=(l+=(g=(65535&g)+n*s)>>>16)+((g=(65535&g)+o*a)>>>16)+(e*t+r*s+n*a+o*i)&65535,goog.math.Long.fromBits((65535&u)<<16|65535&c,l<<16|65535&g)},goog.math.Long.prototype.div=function(t){if(t.isZero())throw Error("division by zero");if(this.isZero())return goog.math.Long.getZero();if(this.equals(goog.math.Long.getMinValue())){if(t.equals(goog.math.Long.getOne())||t.equals(goog.math.Long.getNegOne()))return goog.math.Long.getMinValue();if(t.equals(goog.math.Long.getMinValue()))return goog.math.Long.getOne();var e=this.shiftRight(1);if((e=e.div(t).shiftLeft(1)).equals(goog.math.Long.getZero()))return t.isNegative()?goog.math.Long.getOne():goog.math.Long.getNegOne();var r=this.subtract(t.multiply(e));return e.add(r.div(t))}if(t.equals(goog.math.Long.getMinValue()))return goog.math.Long.getZero();if(this.isNegative())return t.isNegative()?this.negate().div(t.negate()):this.negate().div(t).negate();if(t.isNegative())return this.div(t.negate()).negate();var n=goog.math.Long.getZero();for(r=this;r.greaterThanOrEqual(t);){e=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));for(var o=48>=(o=Math.ceil(Math.log(e)/Math.LN2))?1:Math.pow(2,o-48),i=goog.math.Long.fromNumber(e),a=i.multiply(t);a.isNegative()||a.greaterThan(r);)e-=o,a=(i=goog.math.Long.fromNumber(e)).multiply(t);i.isZero()&&(i=goog.math.Long.getOne()),n=n.add(i),r=r.subtract(a)}return n},goog.math.Long.prototype.modulo=function(t){return this.subtract(this.div(t).multiply(t))},goog.math.Long.prototype.not=function(){return goog.math.Long.fromBits(~this.low_,~this.high_)},goog.math.Long.prototype.and=function(t){return goog.math.Long.fromBits(this.low_&t.low_,this.high_&t.high_)},goog.math.Long.prototype.or=function(t){return goog.math.Long.fromBits(this.low_|t.low_,this.high_|t.high_)},goog.math.Long.prototype.xor=function(t){return goog.math.Long.fromBits(this.low_^t.low_,this.high_^t.high_)},goog.math.Long.prototype.shiftLeft=function(t){if(0==(t&=63))return this;var e=this.low_;return 32>t?goog.math.Long.fromBits(e<<t,this.high_<<t|e>>>32-t):goog.math.Long.fromBits(0,e<<t-32)},goog.math.Long.prototype.shiftRight=function(t){if(0==(t&=63))return this;var e=this.high_;return 32>t?goog.math.Long.fromBits(this.low_>>>t|e<<32-t,e>>t):goog.math.Long.fromBits(e>>t-32,0<=e?0:-1)},goog.math.Long.prototype.shiftRightUnsigned=function(t){if(0==(t&=63))return this;var e=this.high_;return 32>t?goog.math.Long.fromBits(this.low_>>>t|e<<32-t,e>>>t):32==t?goog.math.Long.fromBits(e,0):goog.math.Long.fromBits(e>>>t-32,0)},goog.math.Long.ValueCacheId_={MAX_VALUE:1,MIN_VALUE:2,TWO_PWR_24:6};var com={cognitect:{}};com.cognitect.transit={},com.cognitect.transit.delimiters={},com.cognitect.transit.delimiters.ESC="~",com.cognitect.transit.delimiters.TAG="#",com.cognitect.transit.delimiters.SUB="^",com.cognitect.transit.delimiters.RES="`",com.cognitect.transit.delimiters.ESC_TAG="~#",com.cognitect.transit.caching={},com.cognitect.transit.caching.MIN_SIZE_CACHEABLE=3,com.cognitect.transit.caching.BASE_CHAR_IDX=48,com.cognitect.transit.caching.CACHE_CODE_DIGITS=44,com.cognitect.transit.caching.MAX_CACHE_ENTRIES=com.cognitect.transit.caching.CACHE_CODE_DIGITS*com.cognitect.transit.caching.CACHE_CODE_DIGITS,com.cognitect.transit.caching.MAX_CACHE_SIZE=4096,com.cognitect.transit.caching.isCacheable=function(t,e){if(t.length>com.cognitect.transit.caching.MIN_SIZE_CACHEABLE){if(e)return!0;var r=t.charAt(0),n=t.charAt(1);return r===com.cognitect.transit.delimiters.ESC&&(":"===n||"$"===n||"#"===n)}return!1},com.cognitect.transit.caching.idxToCode=function(t){var e=Math.floor(t/com.cognitect.transit.caching.CACHE_CODE_DIGITS);return t=String.fromCharCode(t%com.cognitect.transit.caching.CACHE_CODE_DIGITS+com.cognitect.transit.caching.BASE_CHAR_IDX),0===e?com.cognitect.transit.delimiters.SUB+t:com.cognitect.transit.delimiters.SUB+String.fromCharCode(e+com.cognitect.transit.caching.BASE_CHAR_IDX)+t},com.cognitect.transit.caching.WriteCache=function(){this.cacheSize=this.gen=this.idx=0,this.cache={}},com.cognitect.transit.caching.WriteCache.prototype.write=function(t,e){if(com.cognitect.transit.caching.isCacheable(t,e)){this.cacheSize===com.cognitect.transit.caching.MAX_CACHE_SIZE?(this.clear(),this.gen=0,this.cache={}):this.idx===com.cognitect.transit.caching.MAX_CACHE_ENTRIES&&this.clear();var r=this.cache[t];return null==r?(this.cache[t]=[com.cognitect.transit.caching.idxToCode(this.idx),this.gen],this.idx++,t):r[1]!=this.gen?(r[1]=this.gen,r[0]=com.cognitect.transit.caching.idxToCode(this.idx),this.idx++,t):r[0]}return t},com.cognitect.transit.caching.WriteCache.prototype.clear=function(){this.idx=0,this.gen++},com.cognitect.transit.caching.writeCache=function(){return new com.cognitect.transit.caching.WriteCache},com.cognitect.transit.caching.isCacheCode=function(t){return t.charAt(0)===com.cognitect.transit.delimiters.SUB&&" "!==t.charAt(1)},com.cognitect.transit.caching.codeToIdx=function(t){return 2===t.length?t.charCodeAt(1)-com.cognitect.transit.caching.BASE_CHAR_IDX:(t.charCodeAt(1)-com.cognitect.transit.caching.BASE_CHAR_IDX)*com.cognitect.transit.caching.CACHE_CODE_DIGITS+(t=t.charCodeAt(2)-com.cognitect.transit.caching.BASE_CHAR_IDX)},com.cognitect.transit.caching.ReadCache=function(){this.idx=0,this.cache=[]},com.cognitect.transit.caching.ReadCache.prototype.write=function(t,e){return this.idx==com.cognitect.transit.caching.MAX_CACHE_ENTRIES&&(this.idx=0),this.cache[this.idx]=t,this.idx++,t},com.cognitect.transit.caching.ReadCache.prototype.read=function(t,e){return this.cache[com.cognitect.transit.caching.codeToIdx(t)]},com.cognitect.transit.caching.ReadCache.prototype.clear=function(){this.idx=0},com.cognitect.transit.caching.readCache=function(){return new com.cognitect.transit.caching.ReadCache},com.cognitect.transit.util={},com.cognitect.transit.util.objectKeys=void 0!==Object.keys?function(t){return Object.keys(t)}:function(t){return goog.object.getKeys(t)},com.cognitect.transit.util.isArray=void 0!==Array.isArray?function(t){return Array.isArray(t)}:function(t){return"array"===goog.typeOf(t)},com.cognitect.transit.util.chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",com.cognitect.transit.util.randInt=function(t){return Math.round(Math.random()*t)},com.cognitect.transit.util.randHex=function(){return com.cognitect.transit.util.randInt(15).toString(16)},com.cognitect.transit.util.randomUUID=function(){var t=(8|3&com.cognitect.transit.util.randInt(14)).toString(16);return com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+"-"+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+"-4"+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+"-"+t+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+"-"+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()},com.cognitect.transit.util.btoa=function(t){if("undefined"!=typeof btoa)return btoa(t);t=String(t);for(var e,r,n=0,o=com.cognitect.transit.util.chars,i="";t.charAt(0|n)||(o="=",n%1);i+=o.charAt(63&e>>8-n%1*8)){if(255<(r=t.charCodeAt(n+=.75)))throw Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");e=e<<8|r}return i},com.cognitect.transit.util.atob=function(t){if("undefined"!=typeof atob)return atob(t);if(1==(t=String(t).replace(/=+$/,"")).length%4)throw Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var e,r,n=0,o=0,i="";r=t.charAt(o++);~r&&(e=n%4?64*e+r:r,n++%4)?i+=String.fromCharCode(255&e>>(-2*n&6)):0)r=com.cognitect.transit.util.chars.indexOf(r);return i},com.cognitect.transit.util.Uint8ToBase64=function(t){for(var e,r=0,n=t.length,o="";r<n;)e=t.subarray(r,Math.min(r+32768,n)),o+=String.fromCharCode.apply(null,e),r+=32768;return com.cognitect.transit.util.btoa(o)},com.cognitect.transit.util.Base64ToUint8=function(t){for(var e=(t=com.cognitect.transit.util.atob(t)).length,r=new Uint8Array(e),n=0;n<e;n++){var o=t.charCodeAt(n);r[n]=o}return r},com.cognitect.transit.eq={},com.cognitect.transit.eq.hashCodeProperty="transit$hashCode$",com.cognitect.transit.eq.hashCodeCounter=1,com.cognitect.transit.eq.equals=function(t,e){if(null==t)return null==e;if(t===e)return!0;if("object"==typeof t){if(com.cognitect.transit.util.isArray(t)){if(com.cognitect.transit.util.isArray(e)&&t.length===e.length){for(var r=0;r<t.length;r++)if(!com.cognitect.transit.eq.equals(t[r],e[r]))return!1;return!0}return!1}if(t.com$cognitect$transit$equals)return t.com$cognitect$transit$equals(e);if(null!=e&&"object"==typeof e){if(e.com$cognitect$transit$equals)return e.com$cognitect$transit$equals(t);r=0;var n,o=com.cognitect.transit.util.objectKeys(e).length;for(n in t)if(t.hasOwnProperty(n)&&(r++,!e.hasOwnProperty(n)||!com.cognitect.transit.eq.equals(t[n],e[n])))return!1;return r===o}}return!1},com.cognitect.transit.eq.hashCombine=function(t,e){return t^e+2654435769+(t<<6)+(t>>2)},com.cognitect.transit.eq.stringCodeCache={},com.cognitect.transit.eq.stringCodeCacheSize=0,com.cognitect.transit.eq.STR_CACHE_MAX=256,com.cognitect.transit.eq.hashString=function(t){var e=com.cognitect.transit.eq.stringCodeCache[t];if(null!=e)return e;for(var r=e=0;r<t.length;++r)e=31*e+t.charCodeAt(r),e%=4294967296;return com.cognitect.transit.eq.stringCodeCacheSize++,com.cognitect.transit.eq.stringCodeCacheSize>=com.cognitect.transit.eq.STR_CACHE_MAX&&(com.cognitect.transit.eq.stringCodeCache={},com.cognitect.transit.eq.stringCodeCacheSize=1),com.cognitect.transit.eq.stringCodeCache[t]=e},com.cognitect.transit.eq.hashMapLike=function(t){var e=0;if(null!=t.forEach)t.forEach(function(t,r,n){e=(e+(com.cognitect.transit.eq.hashCode(r)^com.cognitect.transit.eq.hashCode(t)))%4503599627370496});else for(var r=com.cognitect.transit.util.objectKeys(t),n=0;n<r.length;n++){var o=r[n],i=t[o];e=(e+(com.cognitect.transit.eq.hashCode(o)^com.cognitect.transit.eq.hashCode(i)))%4503599627370496}return e},com.cognitect.transit.eq.hashArrayLike=function(t){var e=0;if(com.cognitect.transit.util.isArray(t))for(var r=0;r<t.length;r++)e=com.cognitect.transit.eq.hashCombine(e,com.cognitect.transit.eq.hashCode(t[r]));else t.forEach&&t.forEach(function(t,r){e=com.cognitect.transit.eq.hashCombine(e,com.cognitect.transit.eq.hashCode(t))});return e},com.cognitect.transit.eq.hashCode=function(t){if(null==t)return 0;switch(typeof t){case"number":return t;case"boolean":return!0===t?1:0;case"string":return com.cognitect.transit.eq.hashString(t);case"function":var e=t[com.cognitect.transit.eq.hashCodeProperty];return e||(e=com.cognitect.transit.eq.hashCodeCounter,void 0!==Object.defineProperty?Object.defineProperty(t,com.cognitect.transit.eq.hashCodeProperty,{value:e,enumerable:!1}):t[com.cognitect.transit.eq.hashCodeProperty]=e,com.cognitect.transit.eq.hashCodeCounter++),e;default:return t instanceof Date?t.valueOf():com.cognitect.transit.util.isArray(t)?com.cognitect.transit.eq.hashArrayLike(t):t.com$cognitect$transit$hashCode?t.com$cognitect$transit$hashCode():com.cognitect.transit.eq.hashMapLike(t)}},com.cognitect.transit.eq.extendToEQ=function(t,e){return t.com$cognitect$transit$hashCode=e.hashCode,t.com$cognitect$transit$equals=e.equals,t},com.cognitect.transit.types={},com.cognitect.transit.types.ITERATOR="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",com.cognitect.transit.types.TaggedValue=function(t,e){this.tag=t,this.rep=e,this.hashCode=-1},com.cognitect.transit.types.TaggedValue.prototype.toString=function(){return"[TaggedValue: "+this.tag+", "+this.rep+"]"},com.cognitect.transit.types.TaggedValue.prototype.equiv=function(t){return com.cognitect.transit.eq.equals(this,t)},com.cognitect.transit.types.TaggedValue.prototype.equiv=com.cognitect.transit.types.TaggedValue.prototype.equiv,com.cognitect.transit.types.TaggedValue.prototype.com$cognitect$transit$equals=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&(this.tag===t.tag&&com.cognitect.transit.eq.equals(this.rep,t.rep))},com.cognitect.transit.types.TaggedValue.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashCombine(com.cognitect.transit.eq.hashCode(this.tag),com.cognitect.transit.eq.hashCode(this.rep))),this.hashCode},com.cognitect.transit.types.taggedValue=function(t,e){return new com.cognitect.transit.types.TaggedValue(t,e)},com.cognitect.transit.types.isTaggedValue=function(t){return t instanceof com.cognitect.transit.types.TaggedValue},com.cognitect.transit.types.nullValue=function(){return null},com.cognitect.transit.types.boolValue=function(t){return"t"===t},com.cognitect.transit.types.MAX_INT=goog.math.Long.fromString("9007199254740991"),com.cognitect.transit.types.MIN_INT=goog.math.Long.fromString("-9007199254740991"),com.cognitect.transit.types.intValue=function(t){return"number"==typeof t||t instanceof goog.math.Long?t:(t=goog.math.Long.fromString(t,10)).greaterThan(com.cognitect.transit.types.MAX_INT)||t.lessThan(com.cognitect.transit.types.MIN_INT)?t:t.toNumber()},goog.math.Long.prototype.equiv=function(t){return com.cognitect.transit.eq.equals(this,t)},goog.math.Long.prototype.equiv=goog.math.Long.prototype.equiv,goog.math.Long.prototype.com$cognitect$transit$equals=function(t){return t instanceof goog.math.Long&&this.equals(t)},goog.math.Long.prototype.com$cognitect$transit$hashCode=function(){return this.toInt()},com.cognitect.transit.types.isInteger=function(t){return t instanceof goog.math.Long||"number"==typeof t&&!isNaN(t)&&1/0!==t&&parseFloat(t)===parseInt(t,10)},com.cognitect.transit.types.floatValue=function(t){return parseFloat(t)},com.cognitect.transit.types.bigInteger=function(t){return com.cognitect.transit.types.taggedValue("n",t)},com.cognitect.transit.types.isBigInteger=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&"n"===t.tag},com.cognitect.transit.types.bigDecimalValue=function(t){return com.cognitect.transit.types.taggedValue("f",t)},com.cognitect.transit.types.isBigDecimal=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&"f"===t.tag},com.cognitect.transit.types.charValue=function(t){return t},com.cognitect.transit.types.Keyword=function(t){this._name=t,this.hashCode=-1},com.cognitect.transit.types.Keyword.prototype.toString=function(){return":"+this._name},com.cognitect.transit.types.Keyword.prototype.namespace=function(){var t=this._name.indexOf("/");return-1!=t?this._name.substring(0,t):null},com.cognitect.transit.types.Keyword.prototype.name=function(){var t=this._name.indexOf("/");return-1!=t?this._name.substring(t+1,this._name.length):this._name},com.cognitect.transit.types.Keyword.prototype.equiv=function(t){return com.cognitect.transit.eq.equals(this,t)},com.cognitect.transit.types.Keyword.prototype.equiv=com.cognitect.transit.types.Keyword.prototype.equiv,com.cognitect.transit.types.Keyword.prototype.com$cognitect$transit$equals=function(t){return t instanceof com.cognitect.transit.types.Keyword&&this._name==t._name},com.cognitect.transit.types.Keyword.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashCode(this._name)),this.hashCode},com.cognitect.transit.types.keyword=function(t){return new com.cognitect.transit.types.Keyword(t)},com.cognitect.transit.types.isKeyword=function(t){return t instanceof com.cognitect.transit.types.Keyword},com.cognitect.transit.types.Symbol=function(t){this._name=t,this.hashCode=-1},com.cognitect.transit.types.Symbol.prototype.namespace=function(){var t=this._name.indexOf("/");return-1!=t?this._name.substring(0,t):null},com.cognitect.transit.types.Symbol.prototype.name=function(){var t=this._name.indexOf("/");return-1!=t?this._name.substring(t+1,this._name.length):this._name},com.cognitect.transit.types.Symbol.prototype.toString=function(){return this._name},com.cognitect.transit.types.Symbol.prototype.equiv=function(t){return com.cognitect.transit.eq.equals(this,t)},com.cognitect.transit.types.Symbol.prototype.equiv=com.cognitect.transit.types.Symbol.prototype.equiv,com.cognitect.transit.types.Symbol.prototype.com$cognitect$transit$equals=function(t){return t instanceof com.cognitect.transit.types.Symbol&&this._name==t._name},com.cognitect.transit.types.Symbol.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashCode(this._name)),this.hashCode},com.cognitect.transit.types.symbol=function(t){return new com.cognitect.transit.types.Symbol(t)},com.cognitect.transit.types.isSymbol=function(t){return t instanceof com.cognitect.transit.types.Symbol},com.cognitect.transit.types.hexFor=function(t,e,r){var n="";r=r||e+1;for(var o=8*(7-e),i=goog.math.Long.fromInt(255).shiftLeft(o);e<r;e++,o-=8,i=i.shiftRightUnsigned(8)){var a=t.and(i).shiftRightUnsigned(o).toString(16);1==a.length&&(a="0"+a),n+=a}return n},com.cognitect.transit.types.UUID=function(t,e){this.high=t,this.low=e,this.hashCode=-1},com.cognitect.transit.types.UUID.prototype.getLeastSignificantBits=function(){return this.low},com.cognitect.transit.types.UUID.prototype.getMostSignificantBits=function(){return this.high},com.cognitect.transit.types.UUID.prototype.toString=function(){var t=this.high,e=this.low,r=com.cognitect.transit.types.hexFor(t,0,4)+"-";return r+=com.cognitect.transit.types.hexFor(t,4,6)+"-",r+=com.cognitect.transit.types.hexFor(t,6,8)+"-",(r+=com.cognitect.transit.types.hexFor(e,0,2)+"-")+com.cognitect.transit.types.hexFor(e,2,8)},com.cognitect.transit.types.UUID.prototype.equiv=function(t){return com.cognitect.transit.eq.equals(this,t)},com.cognitect.transit.types.UUID.prototype.equiv=com.cognitect.transit.types.UUID.prototype.equiv,com.cognitect.transit.types.UUID.prototype.com$cognitect$transit$equals=function(t){return t instanceof com.cognitect.transit.types.UUID&&this.high.equals(t.high)&&this.low.equals(t.low)},com.cognitect.transit.types.UUID.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashCode(this.toString())),this.hashCode},com.cognitect.transit.types.UUIDfromString=function(t){var e,r;t=t.replace(/-/g,"");var n=e=0;for(r=24;8>n;n+=2,r-=8)e|=parseInt(t.substring(n,n+2),16)<<r;var o=0;for(n=8,r=24;16>n;n+=2,r-=8)o|=parseInt(t.substring(n,n+2),16)<<r;var i=goog.math.Long.fromBits(o,e);for(e=0,n=16,r=24;24>n;n+=2,r-=8)e|=parseInt(t.substring(n,n+2),16)<<r;for(o=0,r=n=24;32>n;n+=2,r-=8)o|=parseInt(t.substring(n,n+2),16)<<r;return t=goog.math.Long.fromBits(o,e),new com.cognitect.transit.types.UUID(i,t)},com.cognitect.transit.types.uuid=function(t){return com.cognitect.transit.types.UUIDfromString(t)},com.cognitect.transit.types.isUUID=function(t){return t instanceof com.cognitect.transit.types.UUID},com.cognitect.transit.types.date=function(t){return t="number"==typeof t?t:parseInt(t,10),new Date(t)},com.cognitect.transit.types.verboseDate=function(t){return new Date(t)},Date.prototype.com$cognitect$transit$equals=function(t){return t instanceof Date&&this.valueOf()===t.valueOf()},Date.prototype.com$cognitect$transit$hashCode=function(){return this.valueOf()},com.cognitect.transit.types.binary=function(t,e){return e&&!1===e.preferBuffers||void 0===goog.global.Buffer?"undefined"!=typeof Uint8Array?com.cognitect.transit.util.Base64ToUint8(t):com.cognitect.transit.types.taggedValue("b",t):new goog.global.Buffer(t,"base64")},com.cognitect.transit.types.isBinary=function(t){return void 0!==goog.global.Buffer&&t instanceof goog.global.Buffer||("undefined"!=typeof Uint8Array&&t instanceof Uint8Array||t instanceof com.cognitect.transit.types.TaggedValue&&"b"===t.tag)},com.cognitect.transit.types.uri=function(t){return com.cognitect.transit.types.taggedValue("r",t)},com.cognitect.transit.types.isURI=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&"r"===t.tag},com.cognitect.transit.types.KEYS=0,com.cognitect.transit.types.VALUES=1,com.cognitect.transit.types.ENTRIES=2,com.cognitect.transit.types.TransitArrayMapIterator=function(t,e){this.entries=t,this.type=e||com.cognitect.transit.types.KEYS,this.idx=0},com.cognitect.transit.types.TransitArrayMapIterator.prototype.next=function(){if(this.idx<this.entries.length){var t={value:this.type===com.cognitect.transit.types.KEYS?this.entries[this.idx]:this.type===com.cognitect.transit.types.VALUES?this.entries[this.idx+1]:[this.entries[this.idx],this.entries[this.idx+1]],done:!1};return this.idx+=2,t}return{value:null,done:!0}},com.cognitect.transit.types.TransitArrayMapIterator.prototype.next=com.cognitect.transit.types.TransitArrayMapIterator.prototype.next,com.cognitect.transit.types.TransitArrayMapIterator.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this},com.cognitect.transit.types.TransitMapIterator=function(t,e){this.map=t,this.type=e||com.cognitect.transit.types.KEYS,this.keys=this.map.getKeys(),this.idx=0,this.bucket=null,this.bucketIdx=0},com.cognitect.transit.types.TransitMapIterator.prototype.next=function(){if(this.idx<this.map.size){null!=this.bucket&&this.bucketIdx<this.bucket.length||(this.bucket=this.map.map[this.keys[this.idx]],this.bucketIdx=0);var t={value:this.type===com.cognitect.transit.types.KEYS?this.bucket[this.bucketIdx]:this.type===com.cognitect.transit.types.VALUES?this.bucket[this.bucketIdx+1]:[this.bucket[this.bucketIdx],this.bucket[this.bucketIdx+1]],done:!1};return this.idx++,this.bucketIdx+=2,t}return{value:null,done:!0}},com.cognitect.transit.types.TransitMapIterator.prototype.next=com.cognitect.transit.types.TransitMapIterator.prototype.next,com.cognitect.transit.types.TransitMapIterator.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this},com.cognitect.transit.types.mapEquals=function(t,e){if(t instanceof com.cognitect.transit.types.TransitMap&&com.cognitect.transit.types.isMap(e)){if(t.size!==e.size)return!1;for(var r in t.map)for(var n=t.map[r],o=0;o<n.length;o+=2)if(!com.cognitect.transit.eq.equals(n[o+1],e.get(n[o])))return!1;return!0}if(t instanceof com.cognitect.transit.types.TransitArrayMap&&com.cognitect.transit.types.isMap(e)){if(t.size!==e.size)return!1;for(r=t._entries,o=0;o<r.length;o+=2)if(!com.cognitect.transit.eq.equals(r[o+1],e.get(r[o])))return!1;return!0}if(null!=e&&"object"==typeof e&&(r=(o=com.cognitect.transit.util.objectKeys(e)).length,t.size===r)){for(n=0;n<r;n++){var i=o[n];if(!t.has(i)||!com.cognitect.transit.eq.equals(e[i],t.get(i)))return!1}return!0}return!1},com.cognitect.transit.types.SMALL_ARRAY_MAP_THRESHOLD=8,com.cognitect.transit.types.ARRAY_MAP_THRESHOLD=32,com.cognitect.transit.types.ARRAY_MAP_ACCESS_THRESHOLD=32,com.cognitect.transit.types.print=function(t){return null==t?"null":goog.isArray(t)?"["+t.toString()+"]":goog.isString(t)?'"'+t+'"':t.toString()},com.cognitect.transit.types.printMap=function(t){var e=0,r="TransitMap {";return t.forEach(function(n,o){r+=com.cognitect.transit.types.print(o)+" => "+com.cognitect.transit.types.print(n),e<t.size-1&&(r+=", "),e++}),r+"}"},com.cognitect.transit.types.printSet=function(t){var e=0,r="TransitSet {";return t.forEach(function(n){r+=com.cognitect.transit.types.print(n),e<t.size-1&&(r+=", "),e++}),r+"}"},com.cognitect.transit.types.TransitArrayMap=function(t){this._entries=t,this.backingMap=null,this.hashCode=-1,this.size=t.length/2,this.accesses=0},com.cognitect.transit.types.TransitArrayMap.prototype.toString=function(){return com.cognitect.transit.types.printMap(this)},com.cognitect.transit.types.TransitArrayMap.prototype.inspect=function(){return this.toString()},com.cognitect.transit.types.TransitArrayMap.prototype.convert=function(){if(this.backingMap)throw Error("Invalid operation, already converted");return!(this.size<com.cognitect.transit.types.SMALL_ARRAY_MAP_THRESHOLD)&&(this.accesses++,this.accesses>com.cognitect.transit.types.ARRAY_MAP_ACCESS_THRESHOLD&&(this.backingMap=com.cognitect.transit.types.map(this._entries,!1,!0),this._entries=[],!0))},com.cognitect.transit.types.TransitArrayMap.prototype.clear=function(){this.hashCode=-1,this.backingMap?this.backingMap.clear():this._entries=[],this.size=0},com.cognitect.transit.types.TransitArrayMap.prototype.clear=com.cognitect.transit.types.TransitArrayMap.prototype.clear,com.cognitect.transit.types.TransitArrayMap.prototype.keys=function(){return this.backingMap?this.backingMap.keys():new com.cognitect.transit.types.TransitArrayMapIterator(this._entries,com.cognitect.transit.types.KEYS)},com.cognitect.transit.types.TransitArrayMap.prototype.keys=com.cognitect.transit.types.TransitArrayMap.prototype.keys,com.cognitect.transit.types.TransitArrayMap.prototype.keySet=function(){if(this.backingMap)return this.backingMap.keySet();for(var t=[],e=0,r=0;r<this._entries.length;e++,r+=2)t[e]=this._entries[r];return t},com.cognitect.transit.types.TransitArrayMap.prototype.keySet=com.cognitect.transit.types.TransitArrayMap.prototype.keySet,com.cognitect.transit.types.TransitArrayMap.prototype.entries=function(){return this.backingMap?this.backingMap.entries():new com.cognitect.transit.types.TransitArrayMapIterator(this._entries,com.cognitect.transit.types.ENTRIES)},com.cognitect.transit.types.TransitArrayMap.prototype.entries=com.cognitect.transit.types.TransitArrayMap.prototype.entries,com.cognitect.transit.types.TransitArrayMap.prototype.values=function(){return this.backingMap?this.backingMap.values():new com.cognitect.transit.types.TransitArrayMapIterator(this._entries,com.cognitect.transit.types.VALUES)},com.cognitect.transit.types.TransitArrayMap.prototype.values=com.cognitect.transit.types.TransitArrayMap.prototype.values,com.cognitect.transit.types.TransitArrayMap.prototype.forEach=function(t){if(this.backingMap)this.backingMap.forEach(t);else for(var e=0;e<this._entries.length;e+=2)t(this._entries[e+1],this._entries[e])},com.cognitect.transit.types.TransitArrayMap.prototype.forEach=com.cognitect.transit.types.TransitArrayMap.prototype.forEach,com.cognitect.transit.types.TransitArrayMap.prototype.get=function(t,e){if(this.backingMap)return this.backingMap.get(t);if(this.convert())return this.get(t);for(var r=0;r<this._entries.length;r+=2)if(com.cognitect.transit.eq.equals(this._entries[r],t))return this._entries[r+1];return e},com.cognitect.transit.types.TransitArrayMap.prototype.get=com.cognitect.transit.types.TransitArrayMap.prototype.get,com.cognitect.transit.types.TransitArrayMap.prototype.has=function(t){if(this.backingMap)return this.backingMap.has(t);if(this.convert())return this.has(t);for(var e=0;e<this._entries.length;e+=2)if(com.cognitect.transit.eq.equals(this._entries[e],t))return!0;return!1},com.cognitect.transit.types.TransitArrayMap.prototype.has=com.cognitect.transit.types.TransitArrayMap.prototype.has,com.cognitect.transit.types.TransitArrayMap.prototype.set=function(t,e){if(this.hashCode=-1,this.backingMap)this.backingMap.set(t,e),this.size=this.backingMap.size;else{for(var r=0;r<this._entries.length;r+=2)if(com.cognitect.transit.eq.equals(this._entries[r],t))return void(this._entries[r+1]=e);this._entries.push(t),this._entries.push(e),this.size++,this.size>com.cognitect.transit.types.ARRAY_MAP_THRESHOLD&&(this.backingMap=com.cognitect.transit.types.map(this._entries,!1,!0),this._entries=null)}},com.cognitect.transit.types.TransitArrayMap.prototype.set=com.cognitect.transit.types.TransitArrayMap.prototype.set,com.cognitect.transit.types.TransitArrayMap.prototype.delete=function(t){if(this.hashCode=-1,this.backingMap)return t=this.backingMap.delete(t),this.size=this.backingMap.size,t;for(var e=0;e<this._entries.length;e+=2)if(com.cognitect.transit.eq.equals(this._entries[e],t))return t=this._entries[e+1],this._entries.splice(e,2),this.size--,t},com.cognitect.transit.types.TransitArrayMap.prototype.clone=function(){var t=com.cognitect.transit.types.map();return this.forEach(function(e,r){t.set(r,e)}),t},com.cognitect.transit.types.TransitArrayMap.prototype.clone=com.cognitect.transit.types.TransitArrayMap.prototype.clone,com.cognitect.transit.types.TransitArrayMap.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this.entries()},com.cognitect.transit.types.TransitArrayMap.prototype.com$cognitect$transit$hashCode=function(){return this.backingMap?this.backingMap.com$cognitect$transit$hashCode():(-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashMapLike(this)),this.hashCode)},com.cognitect.transit.types.TransitArrayMap.prototype.com$cognitect$transit$equals=function(t){return this.backingMap?com.cognitect.transit.types.mapEquals(this.backingMap,t):com.cognitect.transit.types.mapEquals(this,t)},com.cognitect.transit.types.TransitMap=function(t,e,r){this.map=e||{},this._keys=t||[],this.size=r||0,this.hashCode=-1},com.cognitect.transit.types.TransitMap.prototype.toString=function(){return com.cognitect.transit.types.printMap(this)},com.cognitect.transit.types.TransitMap.prototype.inspect=function(){return this.toString()},com.cognitect.transit.types.TransitMap.prototype.clear=function(){this.hashCode=-1,this.map={},this._keys=[],this.size=0},com.cognitect.transit.types.TransitMap.prototype.clear=com.cognitect.transit.types.TransitMap.prototype.clear,com.cognitect.transit.types.TransitMap.prototype.getKeys=function(){return null!=this._keys?this._keys:com.cognitect.transit.util.objectKeys(this.map)},com.cognitect.transit.types.TransitMap.prototype.delete=function(t){this.hashCode=-1,this._keys=null;for(var e=com.cognitect.transit.eq.hashCode(t),r=this.map[e],n=0;n<r.length;n+=2)if(com.cognitect.transit.eq.equals(t,r[n]))return t=r[n+1],r.splice(n,2),0===r.length&&delete this.map[e],this.size--,t},com.cognitect.transit.types.TransitMap.prototype.entries=function(){return new com.cognitect.transit.types.TransitMapIterator(this,com.cognitect.transit.types.ENTRIES)},com.cognitect.transit.types.TransitMap.prototype.entries=com.cognitect.transit.types.TransitMap.prototype.entries,com.cognitect.transit.types.TransitMap.prototype.forEach=function(t){for(var e=this.getKeys(),r=0;r<e.length;r++)for(var n=this.map[e[r]],o=0;o<n.length;o+=2)t(n[o+1],n[o],this)},com.cognitect.transit.types.TransitMap.prototype.forEach=com.cognitect.transit.types.TransitMap.prototype.forEach,com.cognitect.transit.types.TransitMap.prototype.get=function(t,e){var r=com.cognitect.transit.eq.hashCode(t);if(null==(r=this.map[r]))return e;for(var n=0;n<r.length;n+=2)if(com.cognitect.transit.eq.equals(t,r[n]))return r[n+1]},com.cognitect.transit.types.TransitMap.prototype.get=com.cognitect.transit.types.TransitMap.prototype.get,com.cognitect.transit.types.TransitMap.prototype.has=function(t){var e=com.cognitect.transit.eq.hashCode(t);if(null!=(e=this.map[e]))for(var r=0;r<e.length;r+=2)if(com.cognitect.transit.eq.equals(t,e[r]))return!0;return!1},com.cognitect.transit.types.TransitMap.prototype.has=com.cognitect.transit.types.TransitMap.prototype.has,com.cognitect.transit.types.TransitMap.prototype.keys=function(){return new com.cognitect.transit.types.TransitMapIterator(this,com.cognitect.transit.types.KEYS)},com.cognitect.transit.types.TransitMap.prototype.keys=com.cognitect.transit.types.TransitMap.prototype.keys,com.cognitect.transit.types.TransitMap.prototype.keySet=function(){for(var t=this.getKeys(),e=[],r=0;r<t.length;r++)for(var n=this.map[t[r]],o=0;o<n.length;o+=2)e.push(n[o]);return e},com.cognitect.transit.types.TransitMap.prototype.keySet=com.cognitect.transit.types.TransitMap.prototype.keySet,com.cognitect.transit.types.TransitMap.prototype.set=function(t,e){this.hashCode=-1;var r=com.cognitect.transit.eq.hashCode(t),n=this.map[r];if(null==n)this._keys&&this._keys.push(r),this.map[r]=[t,e],this.size++;else{r=!0;for(var o=0;o<n.length;o+=2)if(com.cognitect.transit.eq.equals(e,n[o])){r=!1,n[o]=e;break}r&&(n.push(t),n.push(e),this.size++)}},com.cognitect.transit.types.TransitMap.prototype.set=com.cognitect.transit.types.TransitMap.prototype.set,com.cognitect.transit.types.TransitMap.prototype.values=function(){return new com.cognitect.transit.types.TransitMapIterator(this,com.cognitect.transit.types.VALUES)},com.cognitect.transit.types.TransitMap.prototype.values=com.cognitect.transit.types.TransitMap.prototype.values,com.cognitect.transit.types.TransitMap.prototype.clone=function(){var t=com.cognitect.transit.types.map();return this.forEach(function(e,r){t.set(r,e)}),t},com.cognitect.transit.types.TransitMap.prototype.clone=com.cognitect.transit.types.TransitMap.prototype.clone,com.cognitect.transit.types.TransitMap.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this.entries()},com.cognitect.transit.types.TransitMap.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashMapLike(this)),this.hashCode},com.cognitect.transit.types.TransitMap.prototype.com$cognitect$transit$equals=function(t){return com.cognitect.transit.types.mapEquals(this,t)},com.cognitect.transit.types.map=function(t,e,r){if(t=t||[],e=!1!==e||e,(!0!==r||!r)&&t.length<=2*com.cognitect.transit.types.ARRAY_MAP_THRESHOLD){if(e){var n=t;for(t=[],e=0;e<n.length;e+=2){var o=!1;for(r=0;r<t.length;r+=2)if(com.cognitect.transit.eq.equals(t[r],n[e])){t[r+1]=n[e+1],o=!0;break}o||(t.push(n[e]),t.push(n[e+1]))}}return new com.cognitect.transit.types.TransitArrayMap(t)}n={},o=[];var i=0;for(e=0;e<t.length;e+=2){var a=n[r=com.cognitect.transit.eq.hashCode(t[e])];if(null==a)o.push(r),n[r]=[t[e],t[e+1]],i++;else{var s=!0;for(r=0;r<a.length;r+=2)if(com.cognitect.transit.eq.equals(a[r],t[e])){a[r+1]=t[e+1],s=!1;break}s&&(a.push(t[e]),a.push(t[e+1]),i++)}}return new com.cognitect.transit.types.TransitMap(o,n,i)},com.cognitect.transit.types.isArrayMap=function(t){return t instanceof com.cognitect.transit.types.TransitArrayMap},com.cognitect.transit.types.isMap=function(t){return t instanceof com.cognitect.transit.types.TransitArrayMap||t instanceof com.cognitect.transit.types.TransitMap},com.cognitect.transit.types.TransitSet=function(t){this.map=t,this.size=t.size},com.cognitect.transit.types.TransitSet.prototype.toString=function(){return com.cognitect.transit.types.printSet(this)},com.cognitect.transit.types.TransitSet.prototype.inspect=function(){return this.toString()},com.cognitect.transit.types.TransitSet.prototype.add=function(t){this.map.set(t,t),this.size=this.map.size},com.cognitect.transit.types.TransitSet.prototype.add=com.cognitect.transit.types.TransitSet.prototype.add,com.cognitect.transit.types.TransitSet.prototype.clear=function(){this.map=new com.cognitect.transit.types.TransitMap,this.size=0},com.cognitect.transit.types.TransitSet.prototype.clear=com.cognitect.transit.types.TransitSet.prototype.clear,com.cognitect.transit.types.TransitSet.prototype.delete=function(t){return t=this.map.delete(t),this.size=this.map.size,t},com.cognitect.transit.types.TransitSet.prototype.entries=function(){return this.map.entries()},com.cognitect.transit.types.TransitSet.prototype.entries=com.cognitect.transit.types.TransitSet.prototype.entries,com.cognitect.transit.types.TransitSet.prototype.forEach=function(t,e){var r=this;this.map.forEach(function(e,n,o){t(n,r)})},com.cognitect.transit.types.TransitSet.prototype.forEach=com.cognitect.transit.types.TransitSet.prototype.forEach,com.cognitect.transit.types.TransitSet.prototype.has=function(t){return this.map.has(t)},com.cognitect.transit.types.TransitSet.prototype.has=com.cognitect.transit.types.TransitSet.prototype.has,com.cognitect.transit.types.TransitSet.prototype.keys=function(){return this.map.keys()},com.cognitect.transit.types.TransitSet.prototype.keys=com.cognitect.transit.types.TransitSet.prototype.keys,com.cognitect.transit.types.TransitSet.prototype.keySet=function(){return this.map.keySet()},com.cognitect.transit.types.TransitSet.prototype.keySet=com.cognitect.transit.types.TransitSet.prototype.keySet,com.cognitect.transit.types.TransitSet.prototype.values=function(){return this.map.values()},com.cognitect.transit.types.TransitSet.prototype.values=com.cognitect.transit.types.TransitSet.prototype.values,com.cognitect.transit.types.TransitSet.prototype.clone=function(){var t=com.cognitect.transit.types.set();return this.forEach(function(e){t.add(e)}),t},com.cognitect.transit.types.TransitSet.prototype.clone=com.cognitect.transit.types.TransitSet.prototype.clone,com.cognitect.transit.types.TransitSet.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this.values()},com.cognitect.transit.types.TransitSet.prototype.com$cognitect$transit$equals=function(t){return t instanceof com.cognitect.transit.types.TransitSet&&(this.size===t.size?com.cognitect.transit.eq.equals(this.map,t.map):void 0)},com.cognitect.transit.types.TransitSet.prototype.com$cognitect$transit$hashCode=function(t){return com.cognitect.transit.eq.hashCode(this.map)},com.cognitect.transit.types.set=function(t){t=t||[];for(var e={},r=[],n=0,o=0;o<t.length;o++){var i=e[a=com.cognitect.transit.eq.hashCode(t[o])];if(null==i)r.push(a),e[a]=[t[o],t[o]],n++;else{for(var a=!0,s=0;s<i.length;s+=2)if(com.cognitect.transit.eq.equals(i[s],t[o])){a=!1;break}a&&(i.push(t[o]),i.push(t[o]),n++)}}return new com.cognitect.transit.types.TransitSet(new com.cognitect.transit.types.TransitMap(r,e,n))},com.cognitect.transit.types.isSet=function(t){return t instanceof com.cognitect.transit.types.TransitSet},com.cognitect.transit.types.quoted=function(t){return com.cognitect.transit.types.taggedValue("'",t)},com.cognitect.transit.types.isQuoted=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&"'"===t.tag},com.cognitect.transit.types.list=function(t){return com.cognitect.transit.types.taggedValue("list",t)},com.cognitect.transit.types.isList=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&"list"===t.tag},com.cognitect.transit.types.link=function(t){return com.cognitect.transit.types.taggedValue("link",t)},com.cognitect.transit.types.isLink=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&"link"===t.tag},com.cognitect.transit.types.specialDouble=function(t){switch(t){case"-INF":return-1/0;case"INF":return 1/0;case"NaN":return NaN;default:throw Error("Invalid special double value "+t)}},com.cognitect.transit.handlers={},com.cognitect.transit.handlers.ctorGuid=0,com.cognitect.transit.handlers.ctorGuidProperty="transit$guid$"+com.cognitect.transit.util.randomUUID(),com.cognitect.transit.handlers.typeTag=function(t){if(null==t)return"null";if(t===String)return"string";if(t===Boolean)return"boolean";if(t===Number)return"number";if(t===Array)return"array";if(t===Object)return"map";var e=t[com.cognitect.transit.handlers.ctorGuidProperty];return null==e&&(void 0!==Object.defineProperty?(e=++com.cognitect.transit.handlers.ctorGuid,Object.defineProperty(t,com.cognitect.transit.handlers.ctorGuidProperty,{value:e,enumerable:!1})):t[com.cognitect.transit.handlers.ctorGuidProperty]=e=++com.cognitect.transit.handlers.ctorGuid),e},com.cognitect.transit.handlers.constructor=function(t){return null==t?null:t.constructor},com.cognitect.transit.handlers.padZeros=function(t,e){for(var r=t.toString(),n=r.length;n<e;n++)r="0"+r;return r},com.cognitect.transit.handlers.stringableKeys=function(t){t=com.cognitect.transit.util.objectKeys(t);for(var e=0;e<t.length;e++);return!0},com.cognitect.transit.handlers.NilHandler=function(){},com.cognitect.transit.handlers.NilHandler.prototype.tag=function(t){return"_"},com.cognitect.transit.handlers.NilHandler.prototype.rep=function(t){return null},com.cognitect.transit.handlers.NilHandler.prototype.stringRep=function(t){return"null"},com.cognitect.transit.handlers.StringHandler=function(){},com.cognitect.transit.handlers.StringHandler.prototype.tag=function(t){return"s"},com.cognitect.transit.handlers.StringHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.StringHandler.prototype.stringRep=function(t){return t},com.cognitect.transit.handlers.NumberHandler=function(){},com.cognitect.transit.handlers.NumberHandler.prototype.tag=function(t){return"i"},com.cognitect.transit.handlers.NumberHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.NumberHandler.prototype.stringRep=function(t){return t.toString()},com.cognitect.transit.handlers.IntegerHandler=function(){},com.cognitect.transit.handlers.IntegerHandler.prototype.tag=function(t){return"i"},com.cognitect.transit.handlers.IntegerHandler.prototype.rep=function(t){return t.toString()},com.cognitect.transit.handlers.IntegerHandler.prototype.stringRep=function(t){return t.toString()},com.cognitect.transit.handlers.BooleanHandler=function(){},com.cognitect.transit.handlers.BooleanHandler.prototype.tag=function(t){return"?"},com.cognitect.transit.handlers.BooleanHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.BooleanHandler.prototype.stringRep=function(t){return t.toString()},com.cognitect.transit.handlers.ArrayHandler=function(){},com.cognitect.transit.handlers.ArrayHandler.prototype.tag=function(t){return"array"},com.cognitect.transit.handlers.ArrayHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.ArrayHandler.prototype.stringRep=function(t){return null},com.cognitect.transit.handlers.MapHandler=function(){},com.cognitect.transit.handlers.MapHandler.prototype.tag=function(t){return"map"},com.cognitect.transit.handlers.MapHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.MapHandler.prototype.stringRep=function(t){return null},com.cognitect.transit.handlers.VerboseDateHandler=function(){},com.cognitect.transit.handlers.VerboseDateHandler.prototype.tag=function(t){return"t"},com.cognitect.transit.handlers.VerboseDateHandler.prototype.rep=function(t){return t.getUTCFullYear()+"-"+com.cognitect.transit.handlers.padZeros(t.getUTCMonth()+1,2)+"-"+com.cognitect.transit.handlers.padZeros(t.getUTCDate(),2)+"T"+com.cognitect.transit.handlers.padZeros(t.getUTCHours(),2)+":"+com.cognitect.transit.handlers.padZeros(t.getUTCMinutes(),2)+":"+com.cognitect.transit.handlers.padZeros(t.getUTCSeconds(),2)+"."+com.cognitect.transit.handlers.padZeros(t.getUTCMilliseconds(),3)+"Z"},com.cognitect.transit.handlers.VerboseDateHandler.prototype.stringRep=function(t,e){return e.rep(t)},com.cognitect.transit.handlers.DateHandler=function(){},com.cognitect.transit.handlers.DateHandler.prototype.tag=function(t){return"m"},com.cognitect.transit.handlers.DateHandler.prototype.rep=function(t){return t.valueOf()},com.cognitect.transit.handlers.DateHandler.prototype.stringRep=function(t){return t.valueOf().toString()},com.cognitect.transit.handlers.DateHandler.prototype.getVerboseHandler=function(t){return new com.cognitect.transit.handlers.VerboseDateHandler},com.cognitect.transit.handlers.UUIDHandler=function(){},com.cognitect.transit.handlers.UUIDHandler.prototype.tag=function(t){return"u"},com.cognitect.transit.handlers.UUIDHandler.prototype.rep=function(t){return t.toString()},com.cognitect.transit.handlers.UUIDHandler.prototype.stringRep=function(t){return t.toString()},com.cognitect.transit.handlers.KeywordHandler=function(){},com.cognitect.transit.handlers.KeywordHandler.prototype.tag=function(t){return":"},com.cognitect.transit.handlers.KeywordHandler.prototype.rep=function(t){return t._name},com.cognitect.transit.handlers.KeywordHandler.prototype.stringRep=function(t,e){return e.rep(t)},com.cognitect.transit.handlers.SymbolHandler=function(){},com.cognitect.transit.handlers.SymbolHandler.prototype.tag=function(t){return"$"},com.cognitect.transit.handlers.SymbolHandler.prototype.rep=function(t){return t._name},com.cognitect.transit.handlers.SymbolHandler.prototype.stringRep=function(t,e){return e.rep(t)},com.cognitect.transit.handlers.TaggedHandler=function(){},com.cognitect.transit.handlers.TaggedHandler.prototype.tag=function(t){return t.tag},com.cognitect.transit.handlers.TaggedHandler.prototype.rep=function(t){return t.rep},com.cognitect.transit.handlers.TaggedHandler.prototype.stringRep=function(t,e){return null},com.cognitect.transit.handlers.TransitSetHandler=function(){},com.cognitect.transit.handlers.TransitSetHandler.prototype.tag=function(t){return"set"},com.cognitect.transit.handlers.TransitSetHandler.prototype.rep=function(t){var e=[];return t.forEach(function(t,r){e.push(t)}),com.cognitect.transit.types.taggedValue("array",e)},com.cognitect.transit.handlers.TransitSetHandler.prototype.stringRep=function(t,e){return null},com.cognitect.transit.handlers.TransitArrayMapHandler=function(){},com.cognitect.transit.handlers.TransitArrayMapHandler.prototype.tag=function(t){return"map"},com.cognitect.transit.handlers.TransitArrayMapHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.TransitArrayMapHandler.prototype.stringRep=function(t,e){return null},com.cognitect.transit.handlers.TransitMapHandler=function(){},com.cognitect.transit.handlers.TransitMapHandler.prototype.tag=function(t){return"map"},com.cognitect.transit.handlers.TransitMapHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.TransitMapHandler.prototype.stringRep=function(t,e){return null},com.cognitect.transit.handlers.BufferHandler=function(){},com.cognitect.transit.handlers.BufferHandler.prototype.tag=function(t){return"b"},com.cognitect.transit.handlers.BufferHandler.prototype.rep=function(t){return t.toString("base64")},com.cognitect.transit.handlers.BufferHandler.prototype.stringRep=function(t,e){return null},com.cognitect.transit.handlers.Uint8ArrayHandler=function(){},com.cognitect.transit.handlers.Uint8ArrayHandler.prototype.tag=function(t){return"b"},com.cognitect.transit.handlers.Uint8ArrayHandler.prototype.rep=function(t){return com.cognitect.transit.util.Uint8ToBase64(t)},com.cognitect.transit.handlers.Uint8ArrayHandler.prototype.stringRep=function(t,e){return null},com.cognitect.transit.handlers.defaultHandlers=function(t){return t.set(null,new com.cognitect.transit.handlers.NilHandler),t.set(String,new com.cognitect.transit.handlers.StringHandler),t.set(Number,new com.cognitect.transit.handlers.NumberHandler),t.set(goog.math.Long,new com.cognitect.transit.handlers.IntegerHandler),t.set(Boolean,new com.cognitect.transit.handlers.BooleanHandler),t.set(Array,new com.cognitect.transit.handlers.ArrayHandler),t.set(Object,new com.cognitect.transit.handlers.MapHandler),t.set(Date,new com.cognitect.transit.handlers.DateHandler),t.set(com.cognitect.transit.types.UUID,new com.cognitect.transit.handlers.UUIDHandler),t.set(com.cognitect.transit.types.Keyword,new com.cognitect.transit.handlers.KeywordHandler),t.set(com.cognitect.transit.types.Symbol,new com.cognitect.transit.handlers.SymbolHandler),t.set(com.cognitect.transit.types.TaggedValue,new com.cognitect.transit.handlers.TaggedHandler),t.set(com.cognitect.transit.types.TransitSet,new com.cognitect.transit.handlers.TransitSetHandler),t.set(com.cognitect.transit.types.TransitArrayMap,new com.cognitect.transit.handlers.TransitArrayMapHandler),t.set(com.cognitect.transit.types.TransitMap,new com.cognitect.transit.handlers.TransitMapHandler),void 0!==goog.global.Buffer&&t.set(goog.global.Buffer,new com.cognitect.transit.handlers.BufferHandler),"undefined"!=typeof Uint8Array&&t.set(Uint8Array,new com.cognitect.transit.handlers.Uint8ArrayHandler),t},com.cognitect.transit.handlers.Handlers=function(){this.handlers={},com.cognitect.transit.handlers.defaultHandlers(this)},com.cognitect.transit.handlers.Handlers.prototype.get=function(t){return null!=(t="string"==typeof t?this.handlers[t]:this.handlers[com.cognitect.transit.handlers.typeTag(t)])?t:this.handlers.default},com.cognitect.transit.handlers.Handlers.prototype.get=com.cognitect.transit.handlers.Handlers.prototype.get,com.cognitect.transit.handlers.validTag=function(t){switch(t){case"null":case"string":case"boolean":case"number":case"array":case"map":return!1}return!0},com.cognitect.transit.handlers.Handlers.prototype.set=function(t,e){"string"==typeof t&&com.cognitect.transit.handlers.validTag(t)?this.handlers[t]=e:this.handlers[com.cognitect.transit.handlers.typeTag(t)]=e},com.cognitect.transit.impl={},com.cognitect.transit.impl.decoder={},com.cognitect.transit.impl.decoder.Tag=function(t){this.str=t},com.cognitect.transit.impl.decoder.tag=function(t){return new com.cognitect.transit.impl.decoder.Tag(t)},com.cognitect.transit.impl.decoder.isTag=function(t){return t&&t instanceof com.cognitect.transit.impl.decoder.Tag},com.cognitect.transit.impl.decoder.isGroundHandler=function(t){switch(t){case"_":case"s":case"?":case"i":case"d":case"b":case"'":case"array":case"map":return!0}return!1},com.cognitect.transit.impl.decoder.Decoder=function(t){for(var e in this.options=t||{},this.handlers={},this.defaults.handlers)this.handlers[e]=this.defaults.handlers[e];for(e in this.options.handlers){if(com.cognitect.transit.impl.decoder.isGroundHandler(e))throw Error('Cannot override handler for ground type "'+e+'"');this.handlers[e]=this.options.handlers[e]}this.preferStrings=null!=this.options.preferStrings?this.options.preferStrings:this.defaults.preferStrings,this.preferBuffers=null!=this.options.preferBuffers?this.options.preferBuffers:this.defaults.preferBuffers,this.defaultHandler=this.options.defaultHandler||this.defaults.defaultHandler,this.mapBuilder=this.options.mapBuilder,this.arrayBuilder=this.options.arrayBuilder},com.cognitect.transit.impl.decoder.Decoder.prototype.defaults={handlers:{_:function(t,e){return com.cognitect.transit.types.nullValue()},"?":function(t,e){return com.cognitect.transit.types.boolValue(t)},b:function(t,e){return com.cognitect.transit.types.binary(t,e)},i:function(t,e){return com.cognitect.transit.types.intValue(t)},n:function(t,e){return com.cognitect.transit.types.bigInteger(t)},d:function(t,e){return com.cognitect.transit.types.floatValue(t)},f:function(t,e){return com.cognitect.transit.types.bigDecimalValue(t)},c:function(t,e){return com.cognitect.transit.types.charValue(t)},":":function(t,e){return com.cognitect.transit.types.keyword(t)},$:function(t,e){return com.cognitect.transit.types.symbol(t)},r:function(t,e){return com.cognitect.transit.types.uri(t)},z:function(t,e){return com.cognitect.transit.types.specialDouble(t)},"'":function(t,e){return t},m:function(t,e){return com.cognitect.transit.types.date(t)},t:function(t,e){return com.cognitect.transit.types.verboseDate(t)},u:function(t,e){return com.cognitect.transit.types.uuid(t)},set:function(t,e){return com.cognitect.transit.types.set(t)},list:function(t,e){return com.cognitect.transit.types.list(t)},link:function(t,e){return com.cognitect.transit.types.link(t)},cmap:function(t,e){return com.cognitect.transit.types.map(t,!1)}},defaultHandler:function(t,e){return com.cognitect.transit.types.taggedValue(t,e)},preferStrings:!0,preferBuffers:!0},com.cognitect.transit.impl.decoder.Decoder.prototype.decode=function(t,e,r,n){if(null==t)return null;switch(typeof t){case"string":return this.decodeString(t,e,r,n);case"object":return com.cognitect.transit.util.isArray(t)?"^ "===t[0]?this.decodeArrayHash(t,e,r,n):this.decodeArray(t,e,r,n):this.decodeHash(t,e,r,n)}return t},com.cognitect.transit.impl.decoder.Decoder.prototype.decode=com.cognitect.transit.impl.decoder.Decoder.prototype.decode,com.cognitect.transit.impl.decoder.Decoder.prototype.decodeString=function(t,e,r,n){return com.cognitect.transit.caching.isCacheable(t,r)?(t=this.parseString(t,e,!1),e&&e.write(t,r),t):com.cognitect.transit.caching.isCacheCode(t)?e.read(t,r):this.parseString(t,e,r)},com.cognitect.transit.impl.decoder.Decoder.prototype.decodeHash=function(t,e,r,n){var o=(r=com.cognitect.transit.util.objectKeys(t))[0];if(n=1==r.length?this.decode(o,e,!1,!1):null,com.cognitect.transit.impl.decoder.isTag(n))return t=t[o],null!=(r=this.handlers[n.str])?r(this.decode(t,e,!1,!0),this):com.cognitect.transit.types.taggedValue(n.str,this.decode(t,e,!1,!1));if(this.mapBuilder){if(r.length<2*com.cognitect.transit.types.SMALL_ARRAY_MAP_THRESHOLD&&this.mapBuilder.fromArray){var i=[];for(o=0;o<r.length;o++)n=r[o],i.push(this.decode(n,e,!0,!1)),i.push(this.decode(t[n],e,!1,!1));return this.mapBuilder.fromArray(i,t)}for(i=this.mapBuilder.init(t),o=0;o<r.length;o++)n=r[o],i=this.mapBuilder.add(i,this.decode(n,e,!0,!1),this.decode(t[n],e,!1,!1),t);return this.mapBuilder.finalize(i,t)}for(i=[],o=0;o<r.length;o++)n=r[o],i.push(this.decode(n,e,!0,!1)),i.push(this.decode(t[n],e,!1,!1));return com.cognitect.transit.types.map(i,!1)},com.cognitect.transit.impl.decoder.Decoder.prototype.decodeArrayHash=function(t,e,r,n){if(this.mapBuilder){if(t.length<2*com.cognitect.transit.types.SMALL_ARRAY_MAP_THRESHOLD+1&&this.mapBuilder.fromArray){for(n=[],r=1;r<t.length;r+=2)n.push(this.decode(t[r],e,!0,!1)),n.push(this.decode(t[r+1],e,!1,!1));return this.mapBuilder.fromArray(n,t)}for(n=this.mapBuilder.init(t),r=1;r<t.length;r+=2)n=this.mapBuilder.add(n,this.decode(t[r],e,!0,!1),this.decode(t[r+1],e,!1,!1),t);return this.mapBuilder.finalize(n,t)}for(n=[],r=1;r<t.length;r+=2)n.push(this.decode(t[r],e,!0,!1)),n.push(this.decode(t[r+1],e,!1,!1));return com.cognitect.transit.types.map(n,!1)},com.cognitect.transit.impl.decoder.Decoder.prototype.decodeArray=function(t,e,r,n){if(n){var o=[];for(n=0;n<t.length;n++)o.push(this.decode(t[n],e,r,!1));return o}if(o=e&&e.idx,2===t.length&&"string"==typeof t[0]&&(n=this.decode(t[0],e,!1,!1),com.cognitect.transit.impl.decoder.isTag(n)))return o=t[1],null!=(t=this.handlers[n.str])?o=t(this.decode(o,e,r,!0),this):com.cognitect.transit.types.taggedValue(n.str,this.decode(o,e,r,!1));if(e&&o!=e.idx&&(e.idx=o),this.arrayBuilder){if(32>=t.length&&this.arrayBuilder.fromArray){for(o=[],n=0;n<t.length;n++)o.push(this.decode(t[n],e,r,!1));return this.arrayBuilder.fromArray(o,t)}for(o=this.arrayBuilder.init(t),n=0;n<t.length;n++)o=this.arrayBuilder.add(o,this.decode(t[n],e,r,!1),t);return this.arrayBuilder.finalize(o,t)}for(o=[],n=0;n<t.length;n++)o.push(this.decode(t[n],e,r,!1));return o},com.cognitect.transit.impl.decoder.Decoder.prototype.parseString=function(t,e,r){return t.charAt(0)===com.cognitect.transit.delimiters.ESC?(e=t.charAt(1))===com.cognitect.transit.delimiters.ESC||e===com.cognitect.transit.delimiters.SUB||e===com.cognitect.transit.delimiters.RES?t.substring(1):e===com.cognitect.transit.delimiters.TAG?com.cognitect.transit.impl.decoder.tag(t.substring(2)):null==(r=this.handlers[e])?this.defaultHandler(e,t.substring(2)):r(t.substring(2),this):t},com.cognitect.transit.impl.decoder.decoder=function(t){return new com.cognitect.transit.impl.decoder.Decoder(t)},com.cognitect.transit.impl.reader={},com.cognitect.transit.impl.reader.JSONUnmarshaller=function(t){this.decoder=new com.cognitect.transit.impl.decoder.Decoder(t)},com.cognitect.transit.impl.reader.JSONUnmarshaller.prototype.unmarshal=function(t,e){return this.decoder.decode(JSON.parse(t),e)},com.cognitect.transit.impl.reader.Reader=function(t,e){this.unmarshaller=t,this.options=e||{},this.cache=this.options.cache?this.options.cache:new com.cognitect.transit.caching.ReadCache},com.cognitect.transit.impl.reader.Reader.prototype.read=function(t){return t=this.unmarshaller.unmarshal(t,this.cache),this.cache.clear(),t},com.cognitect.transit.impl.reader.Reader.prototype.read=com.cognitect.transit.impl.reader.Reader.prototype.read,com.cognitect.transit.impl.writer={},com.cognitect.transit.impl.writer.escape=function(t){if(0<t.length){var e=t.charAt(0);return e===com.cognitect.transit.delimiters.ESC||e===com.cognitect.transit.delimiters.SUB||e===com.cognitect.transit.delimiters.RES?com.cognitect.transit.delimiters.ESC+t:t}return t},com.cognitect.transit.impl.writer.JSONMarshaller=function(t){if(this.opts=t||{},this.preferStrings=null==this.opts.preferStrings||this.opts.preferStrings,this.objectBuilder=this.opts.objectBuilder||null,this.transform=this.opts.transform||null,this.handlers=new com.cognitect.transit.handlers.Handlers,t=this.opts.handlers){if(com.cognitect.transit.util.isArray(t)||!t.forEach)throw Error('transit writer "handlers" option must be a map');var e=this;t.forEach(function(t,r){if(void 0===r)throw Error("Cannot create handler for JavaScript undefined");e.handlers.set(r,t)})}this.handlerForForeign=this.opts.handlerForForeign,this.unpack=this.opts.unpack||function(t){return!(!com.cognitect.transit.types.isArrayMap(t)||null!==t.backingMap)&&t._entries},this.verbose=this.opts&&this.opts.verbose||!1},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.handler=function(t){var e=this.handlers.get(com.cognitect.transit.handlers.constructor(t));return null!=e?e:(t=t&&t.transitTag)?this.handlers.get(t):null},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.registerHandler=function(t,e){this.handlers.set(t,e)},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitNil=function(t,e){return t?this.emitString(com.cognitect.transit.delimiters.ESC,"_","",t,e):null},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitString=function(t,e,r,n,o){return t=t+e+r,o?o.write(t,n):t},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitBoolean=function(t,e,r){return e?this.emitString(com.cognitect.transit.delimiters.ESC,"?",t.toString()[0],e,r):t},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitInteger=function(t,e,r){return 1/0===t?this.emitString(com.cognitect.transit.delimiters.ESC,"z","INF",e,r):-1/0===t?this.emitString(com.cognitect.transit.delimiters.ESC,"z","-INF",e,r):isNaN(t)?this.emitString(com.cognitect.transit.delimiters.ESC,"z","NaN",e,r):e||"string"==typeof t||t instanceof goog.math.Long?this.emitString(com.cognitect.transit.delimiters.ESC,"i",t.toString(),e,r):t},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitDouble=function(t,e,r){return e?this.emitString(t.ESC,"d",t,e,r):t},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitBinary=function(t,e,r){return this.emitString(com.cognitect.transit.delimiters.ESC,"b",t,e,r)},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitQuoted=function(t,e,r){return t.verbose?((t={})[this.emitString(com.cognitect.transit.delimiters.ESC_TAG,"'","",!0,r)]=com.cognitect.transit.impl.writer.marshal(this,e,!1,r),t):[this.emitString(com.cognitect.transit.delimiters.ESC_TAG,"'","",!0,r),com.cognitect.transit.impl.writer.marshal(this,e,!1,r)]},com.cognitect.transit.impl.writer.emitObjects=function(t,e,r){var n=[];if(com.cognitect.transit.util.isArray(e))for(var o=0;o<e.length;o++)n.push(com.cognitect.transit.impl.writer.marshal(t,e[o],!1,r));else e.forEach(function(e,o){n.push(com.cognitect.transit.impl.writer.marshal(t,e,!1,r))});return n},com.cognitect.transit.impl.writer.emitArray=function(t,e,r,n){return com.cognitect.transit.impl.writer.emitObjects(t,e,n)},com.cognitect.transit.impl.writer.isStringableKey=function(t,e){if("string"!=typeof e){var r=t.handler(e);return r&&1===r.tag(e).length}return!0},com.cognitect.transit.impl.writer.stringableKeys=function(t,e){var r=t.unpack(e),n=!0;if(r){for(var o=0;o<r.length&&(n=com.cognitect.transit.impl.writer.isStringableKey(t,r[o]));o+=2);return n}if(e.keys&&(o=null,(r=e.keys()).next)){for(o=r.next();!o.done&&(n=com.cognitect.transit.impl.writer.isStringableKey(t,o.value));)o=r.next();return n}if(e.forEach)return e.forEach(function(e,r){n=n&&com.cognitect.transit.impl.writer.isStringableKey(t,r)}),n;throw Error("Cannot walk keys of object type "+com.cognitect.transit.handlers.constructor(e).name)},com.cognitect.transit.impl.writer.isForeignObject=function(t){if(t.constructor.transit$isObject)return!0;var e="Object"==(e=(e=(e=t.constructor.toString()).substr(9)).substr(0,e.indexOf("(")));return void 0!==Object.defineProperty?Object.defineProperty(t.constructor,"transit$isObject",{value:e,enumerable:!1}):t.constructor.transit$isObject=e,e},com.cognitect.transit.impl.writer.emitMap=function(t,e,r,n){var o=null,i=null,a=null;o=null;if(r=0,e.constructor===Object||null!=e.forEach||t.handlerForForeign&&com.cognitect.transit.impl.writer.isForeignObject(e)){if(t.verbose){if(null!=e.forEach)if(com.cognitect.transit.impl.writer.stringableKeys(t,e)){var s={};e.forEach(function(e,r){s[com.cognitect.transit.impl.writer.marshal(t,r,!0,!1)]=com.cognitect.transit.impl.writer.marshal(t,e,!1,n)})}else{if(o=t.unpack(e),i=[],a=t.emitString(com.cognitect.transit.delimiters.ESC_TAG,"cmap","",!0,n),o)for(;r<o.length;r+=2)i.push(com.cognitect.transit.impl.writer.marshal(t,o[r],!1,!1)),i.push(com.cognitect.transit.impl.writer.marshal(t,o[r+1],!1,n));else e.forEach(function(e,r){i.push(com.cognitect.transit.impl.writer.marshal(t,r,!1,!1)),i.push(com.cognitect.transit.impl.writer.marshal(t,e,!1,n))});(s={})[a]=i}else for(o=com.cognitect.transit.util.objectKeys(e),s={};r<o.length;r++)s[com.cognitect.transit.impl.writer.marshal(t,o[r],!0,!1)]=com.cognitect.transit.impl.writer.marshal(t,e[o[r]],!1,n);return s}if(null!=e.forEach){if(com.cognitect.transit.impl.writer.stringableKeys(t,e)){if(o=t.unpack(e),s=["^ "],o)for(;r<o.length;r+=2)s.push(com.cognitect.transit.impl.writer.marshal(t,o[r],!0,n)),s.push(com.cognitect.transit.impl.writer.marshal(t,o[r+1],!1,n));else e.forEach(function(e,r){s.push(com.cognitect.transit.impl.writer.marshal(t,r,!0,n)),s.push(com.cognitect.transit.impl.writer.marshal(t,e,!1,n))});return s}if(o=t.unpack(e),i=[],a=t.emitString(com.cognitect.transit.delimiters.ESC_TAG,"cmap","",!0,n),o)for(;r<o.length;r+=2)i.push(com.cognitect.transit.impl.writer.marshal(t,o[r],!1,n)),i.push(com.cognitect.transit.impl.writer.marshal(t,o[r+1],!1,n));else e.forEach(function(e,r){i.push(com.cognitect.transit.impl.writer.marshal(t,r,!1,n)),i.push(com.cognitect.transit.impl.writer.marshal(t,e,!1,n))});return[a,i]}for(s=["^ "],o=com.cognitect.transit.util.objectKeys(e);r<o.length;r++)s.push(com.cognitect.transit.impl.writer.marshal(t,o[r],!0,n)),s.push(com.cognitect.transit.impl.writer.marshal(t,e[o[r]],!1,n));return s}if(null!=t.objectBuilder)return t.objectBuilder(e,function(e){return com.cognitect.transit.impl.writer.marshal(t,e,!0,n)},function(e){return com.cognitect.transit.impl.writer.marshal(t,e,!1,n)});throw r=com.cognitect.transit.handlers.constructor(e).name,(o=Error("Cannot write "+r)).data={obj:e,type:r},o},com.cognitect.transit.impl.writer.emitTaggedMap=function(t,e,r,n,o){return t.verbose?((n={})[t.emitString(com.cognitect.transit.delimiters.ESC_TAG,e,"",!0,o)]=com.cognitect.transit.impl.writer.marshal(t,r,!1,o),n):[t.emitString(com.cognitect.transit.delimiters.ESC_TAG,e,"",!0,o),com.cognitect.transit.impl.writer.marshal(t,r,!1,o)]},com.cognitect.transit.impl.writer.emitEncoded=function(t,e,r,n,o,i,a){if(1===r.length){if("string"==typeof n)return t.emitString(com.cognitect.transit.delimiters.ESC,r,n,i,a);if(i||t.preferStrings){if((n=t.verbose&&e.getVerboseHandler())?(r=n.tag(o),n=n.stringRep(o,n)):n=e.stringRep(o,e),null!==n)return t.emitString(com.cognitect.transit.delimiters.ESC,r,n,i,a);throw(t=Error('Tag "'+r+'" cannot be encoded as string')).data={tag:r,rep:n,obj:o},t}}return com.cognitect.transit.impl.writer.emitTaggedMap(t,r,n,i,a)},com.cognitect.transit.impl.writer.marshal=function(t,e,r,n){null!==t.transform&&(e=t.transform(e));var o=t.handler(e)||(t.handlerForForeign?t.handlerForForeign(e,t.handlers):null),i=o?o.tag(e):null,a=o?o.rep(e):null;if(null==o||null==i)throw t=com.cognitect.transit.handlers.constructor(e).name,(r=Error("Cannot write "+t)).data={obj:e,type:t},r;switch(i){case"_":return t.emitNil(r,n);case"s":return t.emitString("","",com.cognitect.transit.impl.writer.escape(a),r,n);case"?":return t.emitBoolean(a,r,n);case"i":return t.emitInteger(a,r,n);case"d":return t.emitDouble(a,r,n);case"b":return t.emitBinary(a,r,n);case"'":return t.emitQuoted(t,a,n);case"array":return com.cognitect.transit.impl.writer.emitArray(t,a,r,n);case"map":return com.cognitect.transit.impl.writer.emitMap(t,a,r,n);default:return com.cognitect.transit.impl.writer.emitEncoded(t,o,i,a,e,r,n)}},com.cognitect.transit.impl.writer.maybeQuoted=function(t,e){if(null!=(r=t.handler(e)||(t.handlerForForeign?t.handlerForForeign(e,t.handlers):null)))return 1===r.tag(e).length?com.cognitect.transit.types.quoted(e):e;var r=com.cognitect.transit.handlers.constructor(e).name,n=Error("Cannot write "+r);throw n.data={obj:e,type:r},n},com.cognitect.transit.impl.writer.marshalTop=function(t,e,r,n){return JSON.stringify(com.cognitect.transit.impl.writer.marshal(t,com.cognitect.transit.impl.writer.maybeQuoted(t,e),r,n))},com.cognitect.transit.impl.writer.Writer=function(t,e){this._marshaller=t,this.options=e||{},this.cache=!1===this.options.cache?null:this.options.cache?this.options.cache:new com.cognitect.transit.caching.WriteCache},com.cognitect.transit.impl.writer.Writer.prototype.marshaller=function(){return this._marshaller},com.cognitect.transit.impl.writer.Writer.prototype.marshaller=com.cognitect.transit.impl.writer.Writer.prototype.marshaller,com.cognitect.transit.impl.writer.Writer.prototype.write=function(t,e){var r=e||{},n=r.asMapKey||!1,o=!this._marshaller.verbose&&this.cache;return r=!1===r.marshalTop?com.cognitect.transit.impl.writer.marshal(this._marshaller,t,n,o):com.cognitect.transit.impl.writer.marshalTop(this._marshaller,t,n,o),null!=this.cache&&this.cache.clear(),r},com.cognitect.transit.impl.writer.Writer.prototype.write=com.cognitect.transit.impl.writer.Writer.prototype.write,com.cognitect.transit.impl.writer.Writer.prototype.register=function(t,e){this._marshaller.registerHandler(t,e)},com.cognitect.transit.impl.writer.Writer.prototype.register=com.cognitect.transit.impl.writer.Writer.prototype.register;var TRANSIT_DEV=!0,TRANSIT_NODE_TARGET=!0,TRANSIT_BROWSER_TARGET=!1,TRANSIT_BROWSER_AMD_TARGET=!1;com.cognitect.transit.reader=function(t,e){if("json"===t||"json-verbose"===t||null==t){var r=new com.cognitect.transit.impl.reader.JSONUnmarshaller(e);return new com.cognitect.transit.impl.reader.Reader(r,e)}throw Error("Cannot create reader of type "+t)},com.cognitect.transit.writer=function(t,e){if("json"===t||"json-verbose"===t||null==t){"json-verbose"===t&&(null==e&&(e={}),e.verbose=!0);var r=new com.cognitect.transit.impl.writer.JSONMarshaller(e);return new com.cognitect.transit.impl.writer.Writer(r,e)}throw(r=Error('Type must be "json"')).data={type:t},r},com.cognitect.transit.makeWriteHandler=function(t){var e=function(){};return e.prototype.tag=t.tag,e.prototype.rep=t.rep,e.prototype.stringRep=t.stringRep,e.prototype.getVerboseHandler=t.getVerboseHandler,new e},com.cognitect.transit.makeBuilder=function(t){var e=function(){};return e.prototype.init=t.init,e.prototype.add=t.add,e.prototype.finalize=t.finalize,e.prototype.fromArray=t.fromArray,new e},com.cognitect.transit.date=com.cognitect.transit.types.date,com.cognitect.transit.integer=com.cognitect.transit.types.intValue,com.cognitect.transit.isInteger=com.cognitect.transit.types.isInteger,com.cognitect.transit.uuid=com.cognitect.transit.types.uuid,com.cognitect.transit.isUUID=com.cognitect.transit.types.isUUID,com.cognitect.transit.bigInt=com.cognitect.transit.types.bigInteger,com.cognitect.transit.isBigInt=com.cognitect.transit.types.isBigInteger,com.cognitect.transit.bigDec=com.cognitect.transit.types.bigDecimalValue,com.cognitect.transit.isBigDec=com.cognitect.transit.types.isBigDecimal,com.cognitect.transit.keyword=com.cognitect.transit.types.keyword,com.cognitect.transit.isKeyword=com.cognitect.transit.types.isKeyword,com.cognitect.transit.symbol=com.cognitect.transit.types.symbol,com.cognitect.transit.isSymbol=com.cognitect.transit.types.isSymbol,com.cognitect.transit.binary=com.cognitect.transit.types.binary,com.cognitect.transit.isBinary=com.cognitect.transit.types.isBinary,com.cognitect.transit.uri=com.cognitect.transit.types.uri,com.cognitect.transit.isURI=com.cognitect.transit.types.isURI,com.cognitect.transit.map=com.cognitect.transit.types.map,com.cognitect.transit.isMap=com.cognitect.transit.types.isMap,com.cognitect.transit.set=com.cognitect.transit.types.set,com.cognitect.transit.isSet=com.cognitect.transit.types.isSet,com.cognitect.transit.list=com.cognitect.transit.types.list,com.cognitect.transit.isList=com.cognitect.transit.types.isList,com.cognitect.transit.quoted=com.cognitect.transit.types.quoted,com.cognitect.transit.isQuoted=com.cognitect.transit.types.isQuoted,com.cognitect.transit.tagged=com.cognitect.transit.types.taggedValue,com.cognitect.transit.isTaggedValue=com.cognitect.transit.types.isTaggedValue,com.cognitect.transit.link=com.cognitect.transit.types.link,com.cognitect.transit.isLink=com.cognitect.transit.types.isLink,com.cognitect.transit.hash=com.cognitect.transit.eq.hashCode,com.cognitect.transit.hashMapLike=com.cognitect.transit.eq.hashMapLike,com.cognitect.transit.hashArrayLike=com.cognitect.transit.eq.hashArrayLike,com.cognitect.transit.equals=com.cognitect.transit.eq.equals,com.cognitect.transit.extendToEQ=com.cognitect.transit.eq.extendToEQ,com.cognitect.transit.mapToObject=function(t){var e={};return t.forEach(function(t,r){if("string"!=typeof r)throw Error("Cannot convert map with non-string keys");e[r]=t}),e},com.cognitect.transit.objectToMap=function(t){var e,r=com.cognitect.transit.map();for(e in t)t.hasOwnProperty(e)&&r.set(e,t[e]);return r},com.cognitect.transit.decoder=com.cognitect.transit.impl.decoder.decoder,com.cognitect.transit.readCache=com.cognitect.transit.caching.readCache,com.cognitect.transit.writeCache=com.cognitect.transit.caching.writeCache,com.cognitect.transit.UUIDfromString=com.cognitect.transit.types.UUIDfromString,com.cognitect.transit.randomUUID=com.cognitect.transit.util.randomUUID,com.cognitect.transit.stringableKeys=com.cognitect.transit.impl.writer.stringableKeys,TRANSIT_BROWSER_TARGET&&(goog.exportSymbol("transit.reader",com.cognitect.transit.reader),goog.exportSymbol("transit.writer",com.cognitect.transit.writer),goog.exportSymbol("transit.makeBuilder",com.cognitect.transit.makeBuilder),goog.exportSymbol("transit.makeWriteHandler",com.cognitect.transit.makeWriteHandler),goog.exportSymbol("transit.date",com.cognitect.transit.types.date),goog.exportSymbol("transit.integer",com.cognitect.transit.types.intValue),goog.exportSymbol("transit.isInteger",com.cognitect.transit.types.isInteger),goog.exportSymbol("transit.uuid",com.cognitect.transit.types.uuid),goog.exportSymbol("transit.isUUID",com.cognitect.transit.types.isUUID),goog.exportSymbol("transit.bigInt",com.cognitect.transit.types.bigInteger),goog.exportSymbol("transit.isBigInt",com.cognitect.transit.types.isBigInteger),goog.exportSymbol("transit.bigDec",com.cognitect.transit.types.bigDecimalValue),goog.exportSymbol("transit.isBigDec",com.cognitect.transit.types.isBigDecimal),goog.exportSymbol("transit.keyword",com.cognitect.transit.types.keyword),goog.exportSymbol("transit.isKeyword",com.cognitect.transit.types.isKeyword),goog.exportSymbol("transit.symbol",com.cognitect.transit.types.symbol),goog.exportSymbol("transit.isSymbol",com.cognitect.transit.types.isSymbol),goog.exportSymbol("transit.binary",com.cognitect.transit.types.binary),goog.exportSymbol("transit.isBinary",com.cognitect.transit.types.isBinary),goog.exportSymbol("transit.uri",com.cognitect.transit.types.uri),goog.exportSymbol("transit.isURI",com.cognitect.transit.types.isURI),goog.exportSymbol("transit.map",com.cognitect.transit.types.map),goog.exportSymbol("transit.isMap",com.cognitect.transit.types.isMap),goog.exportSymbol("transit.set",com.cognitect.transit.types.set),goog.exportSymbol("transit.isSet",com.cognitect.transit.types.isSet),goog.exportSymbol("transit.list",com.cognitect.transit.types.list),goog.exportSymbol("transit.isList",com.cognitect.transit.types.isList),goog.exportSymbol("transit.quoted",com.cognitect.transit.types.quoted),goog.exportSymbol("transit.isQuoted",com.cognitect.transit.types.isQuoted),goog.exportSymbol("transit.tagged",com.cognitect.transit.types.taggedValue),goog.exportSymbol("transit.isTaggedValue",com.cognitect.transit.types.isTaggedValue),goog.exportSymbol("transit.link",com.cognitect.transit.types.link),goog.exportSymbol("transit.isLink",com.cognitect.transit.types.isLink),goog.exportSymbol("transit.hash",com.cognitect.transit.eq.hashCode),goog.exportSymbol("transit.hashMapLike",com.cognitect.transit.eq.hashMapLike),goog.exportSymbol("transit.hashArrayLike",com.cognitect.transit.eq.hashArrayLike),goog.exportSymbol("transit.equals",com.cognitect.transit.eq.equals),goog.exportSymbol("transit.extendToEQ",com.cognitect.transit.eq.extendToEQ),goog.exportSymbol("transit.mapToObject",com.cognitect.transit.mapToObject),goog.exportSymbol("transit.objectToMap",com.cognitect.transit.objectToMap),goog.exportSymbol("transit.decoder",com.cognitect.transit.impl.decoder.decoder),goog.exportSymbol("transit.UUIDfromString",com.cognitect.transit.types.UUIDfromString),goog.exportSymbol("transit.randomUUID",com.cognitect.transit.util.randomUUID),goog.exportSymbol("transit.stringableKeys",com.cognitect.transit.impl.writer.stringableKeys),goog.exportSymbol("transit.readCache",com.cognitect.transit.caching.readCache),goog.exportSymbol("transit.writeCache",com.cognitect.transit.caching.writeCache)),TRANSIT_NODE_TARGET&&(module.exports={reader:com.cognitect.transit.reader,writer:com.cognitect.transit.writer,makeBuilder:com.cognitect.transit.makeBuilder,makeWriteHandler:com.cognitect.transit.makeWriteHandler,date:com.cognitect.transit.types.date,integer:com.cognitect.transit.types.intValue,isInteger:com.cognitect.transit.types.isInteger,uuid:com.cognitect.transit.types.uuid,isUUID:com.cognitect.transit.types.isUUID,bigInt:com.cognitect.transit.types.bigInteger,isBigInt:com.cognitect.transit.types.isBigInteger,bigDec:com.cognitect.transit.types.bigDecimalValue,isBigDec:com.cognitect.transit.types.isBigDecimal,keyword:com.cognitect.transit.types.keyword,isKeyword:com.cognitect.transit.types.isKeyword,symbol:com.cognitect.transit.types.symbol,isSymbol:com.cognitect.transit.types.isSymbol,binary:com.cognitect.transit.types.binary,isBinary:com.cognitect.transit.types.isBinary,uri:com.cognitect.transit.types.uri,isURI:com.cognitect.transit.types.isURI,map:com.cognitect.transit.types.map,isMap:com.cognitect.transit.types.isMap,set:com.cognitect.transit.types.set,isSet:com.cognitect.transit.types.isSet,list:com.cognitect.transit.types.list,isList:com.cognitect.transit.types.isList,quoted:com.cognitect.transit.types.quoted,isQuoted:com.cognitect.transit.types.isQuoted,tagged:com.cognitect.transit.types.taggedValue,isTaggedValue:com.cognitect.transit.types.isTaggedValue,link:com.cognitect.transit.types.link,isLink:com.cognitect.transit.types.isLink,hash:com.cognitect.transit.eq.hashCode,hashArrayLike:com.cognitect.transit.eq.hashArrayLike,hashMapLike:com.cognitect.transit.eq.hashMapLike,equals:com.cognitect.transit.eq.equals,extendToEQ:com.cognitect.transit.eq.extendToEQ,mapToObject:com.cognitect.transit.mapToObject,objectToMap:com.cognitect.transit.objectToMap,decoder:com.cognitect.transit.impl.decoder.decoder,UUIDfromString:com.cognitect.transit.types.UUIDfromString,randomUUID:com.cognitect.transit.util.randomUUID,stringableKeys:com.cognitect.transit.impl.writer.stringableKeys,readCache:com.cognitect.transit.caching.readCache,writeCache:com.cognitect.transit.caching.writeCache})}).call(this,__webpack_require__("./node_modules/webpack/buildin/global.js"))},"./node_modules/uuid/lib/bytesToUuid.js":function(t,e){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);t.exports=function(t,e){var n=e||0,o=r;return[o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]]].join("")}},"./node_modules/uuid/lib/rng-browser.js":function(t,e){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);t.exports=function(){return r(n),n}}else{var o=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}},"./node_modules/uuid/v4.js":function(t,e,r){var n=r("./node_modules/uuid/lib/rng-browser.js"),o=r("./node_modules/uuid/lib/bytesToUuid.js");t.exports=function(t,e,r){var i=e&&r||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var s=0;s<16;++s)e[i+s]=a[s];return e||o(a)}},"./node_modules/webpack/buildin/global.js":function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"==typeof window&&(r=window)}t.exports=r},"./src/automerge.js":function(t,e,r){"use strict";var n=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(c){o=!0,i=c}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=r("./node_modules/transit-immutable-js/index.js"),i=r("./src/uuid.js"),a=r("./frontend/index.js"),s=r("./backend/index.js"),c=r("./src/common.js").isObject;function u(t,e){var r=g(t),o=s.applyChanges(s.init(),e),i=n(o,2),c=i[0],u=(i[1],s.getPatch(c));return u.state=c,a.applyPatch(r,u)}function g(t){if("string"==typeof t)t={actorId:t};else if(void 0===t)t={};else if(!c(t))throw new TypeError("Unsupported options for init(): "+t);return a.init(Object.assign({backend:s},t))}function l(t,e,r){var o=a.change(t,e,r),i=n(o,2),s=i[0];i[1];return s}function f(t,e){var r=a.getBackendState(t),n=a.getBackendState(e);return s.getChanges(r,n)}t.exports={init:g,from:function(t,e){return l(g(e),{message:"Initialization",undoable:!1},function(e){return Object.assign(e,t)})},change:l,emptyChange:function(t,e){var r=a.emptyChange(t,e),o=n(r,2),i=o[0];return o[1],i},undo:function(t,e){var r=a.undo(t,e),o=n(r,2),i=o[0];return o[1],i},redo:function(t,e){var r=a.redo(t,e),o=n(r,2),i=o[0];return o[1],i},load:function(t,e){return u(e,o.fromJSON(t))},save:function(t){var e=a.getBackendState(t);return o.toJSON(e.getIn(["opSet","history"]).concat(e.getIn(["opSet","queue"])))},merge:function(t,e){if(a.getActorId(t)===a.getActorId(e))throw new RangeError("Cannot merge an actor with itself");var r=a.getBackendState(t),o=a.getBackendState(e),i=s.merge(r,o),c=n(i,2),u=c[0],g=c[1];return 0===g.diffs.length?t:(g.state=u,a.applyPatch(t,g))},diff:function(t,e){var r=a.getBackendState(t),o=a.getBackendState(e),i=s.getChanges(r,o),c=s.applyChanges(r,i),u=n(c,2);return u[0],u[1].diffs},getChanges:f,getAllChanges:function(t){return f(g(),t)},applyChanges:function(t,e){var r=a.getBackendState(t),o=s.applyChanges(r,e),i=n(o,2),c=i[0],u=i[1];return u.state=c,a.applyPatch(t,u)},getMissingDeps:function(t){return s.getMissingDeps(a.getBackendState(t))},equals:function t(e,r){if(!c(e)||!c(r))return e===r;var n=Object.keys(e).sort(),o=Object.keys(r).sort();if(n.length!==o.length)return!1;for(var i=0;i<n.length;i++){if(n[i]!==o[i])return!1;if(!t(e[n[i]],r[o[i]]))return!1}return!0},getHistory:function(t){var e=a.getBackendState(t),r=a.getActorId(t),n=e.getIn(["opSet","history"]);return n.map(function(t,e){return{get change(){return t.toJS()},get snapshot(){return u(r,n.slice(0,e+1))}}}).toArray()},uuid:i,Frontend:a,Backend:s,DocSet:r("./src/doc_set.js"),WatchableDoc:r("./src/watchable_doc.js"),Connection:r("./src/connection.js")};for(var p=["canUndo","canRedo","getObjectId","getObjectById","getActorId","setActorId","getConflicts","Text","Table","Counter"],h=0;h<p.length;h++){var d=p[h];t.exports[d]=a[d]}},"./src/common.js":function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function o(t){return"object"===(void 0===t?"undefined":n(t))&&null!==t}t.exports={ROOT_ID:"00000000-0000-0000-0000-000000000000",isObject:o,copyObject:function(t){if(!o(t))return{};var e={},r=!0,n=!1,i=void 0;try{for(var a,s=Object.keys(t)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=a.value;e[c]=t[c]}}catch(u){n=!0,i=u}finally{try{!r&&s.return&&s.return()}finally{if(n)throw i}}return e},lessOrEqual:function(t,e){return t.keySeq().concat(e.keySeq()).reduce(function(r,n){return r&&t.get(n,0)<=e.get(n,0)},!0)},parseElemId:function(t){var e=/^(.*):(\d+)$/.exec(t||"");if(!e)throw new RangeError("Not a valid elemId: "+t);return{counter:parseInt(e[2]),actorId:e[1]}}}},"./src/connection.js":function(t,e,r){"use strict";var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();var o=r("./node_modules/immutable/dist/immutable.js"),i=o.Map,a=o.fromJS,s=r("./src/common.js").lessOrEqual,c=r("./frontend/index.js"),u=r("./backend/index.js");function g(t,e,r){return r=t.get(e,i()).mergeWith(function(t,e){return Math.max(t,e)},r),t.set(e,r)}var l=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._docSet=e,this._sendMsg=r,this._theirClock=i(),this._ourClock=i(),this._docChangedHandler=this.docChanged.bind(this)}return n(t,[{key:"open",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,o=this._docSet.docIds[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var i=n.value;this.docChanged(i,this._docSet.getDoc(i))}}catch(a){e=!0,r=a}finally{try{!t&&o.return&&o.return()}finally{if(e)throw r}}this._docSet.registerHandler(this._docChangedHandler)}},{key:"close",value:function(){this._docSet.unregisterHandler(this._docChangedHandler)}},{key:"sendMsg",value:function(t,e,r){var n={docId:t,clock:e.toJS()};this._ourClock=g(this._ourClock,t,e),r&&(n.changes=r),this._sendMsg(n)}},{key:"maybeSendChanges",value:function(t){var e=this._docSet.getDoc(t),r=c.getBackendState(e),n=r.getIn(["opSet","clock"]);if(this._theirClock.has(t)){var o=u.getMissingChanges(r,this._theirClock.get(t));if(o.length>0)return this._theirClock=g(this._theirClock,t,n),void this.sendMsg(t,n,o)}n.equals(this._ourClock.get(t,i()))||this.sendMsg(t,n)}},{key:"docChanged",value:function(t,e){var r=c.getBackendState(e).getIn(["opSet","clock"]);if(!r)throw new TypeError("This object cannot be used for network sync. Are you trying to sync a snapshot from the history?");if(!s(this._ourClock.get(t,i()),r))throw new RangeError("Cannot pass an old state object to a connection");this.maybeSendChanges(t)}},{key:"receiveMsg",value:function(t){return t.clock&&(this._theirClock=g(this._theirClock,t.docId,a(t.clock))),t.changes?this._docSet.applyChanges(t.docId,a(t.changes)):(this._docSet.getDoc(t.docId)?this.maybeSendChanges(t.docId):this._ourClock.has(t.docId)||this.sendMsg(t.docId,i()),this._docSet.getDoc(t.docId))}}]),t}();t.exports=l},"./src/doc_set.js":function(t,e,r){"use strict";var n=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(c){o=!0,i=c}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();var i=r("./node_modules/immutable/dist/immutable.js"),a=i.Map,s=i.Set,c=(r("./src/uuid.js"),r("./frontend/index.js")),u=r("./backend/index.js"),g=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.docs=a(),this.handlers=s()}return o(t,[{key:"getDoc",value:function(t){return this.docs.get(t)}},{key:"removeDoc",value:function(t){this.docs=this.docs.delete(t)}},{key:"setDoc",value:function(t,e){this.docs=this.docs.set(t,e),this.handlers.forEach(function(r){return r(t,e)})}},{key:"applyChanges",value:function(t,e){var r=this.docs.get(t)||c.init({backend:u}),o=c.getBackendState(r),i=u.applyChanges(o,e),a=n(i,2),s=a[0],g=a[1];return g.state=s,r=c.applyPatch(r,g),this.setDoc(t,r),r}},{key:"registerHandler",value:function(t){this.handlers=this.handlers.add(t)}},{key:"unregisterHandler",value:function(t){this.handlers=this.handlers.remove(t)}},{key:"docIds",get:function(){return this.docs.keys()}}]),t}();t.exports=g},"./src/uuid.js":function(t,e,r){"use strict";var n=r("./node_modules/uuid/v4.js"),o=n;function i(){return o()}i.setFactory=function(t){return o=t},i.reset=function(){return o=n},t.exports=i},"./src/watchable_doc.js":function(t,e,r){"use strict";var n=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(c){o=!0,i=c}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();var i=r("./node_modules/immutable/dist/immutable.js").Set,a=r("./frontend/index.js"),s=r("./backend/index.js"),c=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)throw new Error("doc argument is required");this.doc=e,this.handlers=i()}return o(t,[{key:"get",value:function(){return this.doc}},{key:"set",value:function(t){this.doc=t,this.handlers.forEach(function(e){return e(t)})}},{key:"applyChanges",value:function(t){var e=a.getBackendState(this.doc),r=s.applyChanges(e,t),o=n(r,2),i=o[0],c=o[1];c.state=i;var u=a.applyPatch(this.doc,c);return this.set(u),u}},{key:"registerHandler",value:function(t){this.handlers=this.handlers.add(t)}},{key:"unregisterHandler",value:function(t){this.handlers=this.handlers.remove(t)}}]),t}();t.exports=c}})});
},{}],"LRPb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("peerjs")),t=require("automerge");function n(e){return e&&e.__esModule?e:{default:e}}var o=function(){function n(n,o){var r=this;void 0===o&&(o={}),this._connections={},this._actorId=n,this.peer=o.peer||new e.default(this._actorId),this.docSet=o.docSet||new t.DocSet,this._encode=o.encode||JSON.stringify,this._decode=o.decode||JSON.parse,this.peer.on("connection",function(e){r._connections[e.peer]||r.connect(e.peer,e)})}var o=n.prototype;return o.connect=function(e,n,o){var r=this;if(this._connections[e])return this.peer.connections[e];var c=n||this.peer.connect(e,o),i=this._connections[e]=new t.Connection(this.docSet,function(e){c.send(r._encode(e))}),s=function(e){return i.receiveMsg(r._decode(e))},u=function(){c.off("data",s),r._connections[e]&&(delete r._connections[e],i.close())};return c.on("data",s),c.on("close",u),c.on("error",u),i.open(),c},o.get=function(e){return this.docSet.getDoc(e)||(0,t.init)(this._actorId)},o.select=function(e){var t=this;return function(n){var o=n.apply(void 0,[t.get(e)].concat([].slice.call(arguments,1)));return t.docSet.setDoc(e,o),o}},o.subscribe=function(e,t){var n=this;if("function"==typeof e)return this.docSet.registerHandler(e),function(){return n.docSet.unregisterHandler(e)};if("string"==typeof e&&t){var o=function(n,o){n===e&&t(o)};return this.docSet.registerHandler(o),function(){return n.docSet.unregisterHandler(o)}}return function(){}},n}(),r=o;exports.default=r;
},{"peerjs":"rWP2","automerge":"zES8"}],"OkYH":[function(require,module,exports) {
module.exports=function(r,t){var e="000000000"+r;return e.substr(e.length-t)};
},{}],"VOLn":[function(require,module,exports) {
var e=require("./pad.js"),t="object"==typeof window?window:self,n=Object.keys(t).length,o=navigator.mimeTypes?navigator.mimeTypes.length:0,r=e((o+navigator.userAgent.length).toString(36)+n.toString(36),4);module.exports=function(){return r};
},{"./pad.js":"OkYH"}],"yFRG":[function(require,module,exports) {
var e,n="undefined"!=typeof window&&(window.crypto||window.msCrypto)||"undefined"!=typeof self&&self.crypto;if(n){var o=Math.pow(2,32)-1;e=function(){return Math.abs(n.getRandomValues(new Uint32Array(1))[0]/o)}}else e=Math.random;module.exports=e;
},{}],"QD1d":[function(require,module,exports) {
var t=require("./lib/fingerprint.js"),r=require("./lib/pad.js"),e=require("./lib/getRandomValue.js"),i=0,n=4,u=36,o=Math.pow(u,n);function s(){return r((e()*o<<0).toString(u),n)}function g(){return i=i<o?i:0,++i-1}function c(){return"c"+(new Date).getTime().toString(u)+r(g().toString(u),n)+t()+(s()+s())}c.slug=function(){var r=(new Date).getTime().toString(36),e=g().toString(36).slice(-4),i=t().slice(0,1)+t().slice(-1),n=s().slice(-2);return r.slice(-2)+e+i+n},c.isCuid=function(t){return"string"==typeof t&&!!t.startsWith("c")},c.isSlug=function(t){if("string"!=typeof t)return!1;var r=t.length;return r>=7&&r<=10},c.fingerprint=t,module.exports=c;
},{"./lib/fingerprint.js":"VOLn","./lib/pad.js":"OkYH","./lib/getRandomValue.js":"yFRG"}],"dm40":[function(require,module,exports) {
"use strict";var e=n(require("perge")),r=n(require("cuid"));function n(e){return e&&e.__esModule?e:{default:e}}function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function a(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var i=function n(){t(this,n),a(this,"actorId",(0,r.default)()),a(this,"perge",new e.default(actorId)),console.log(perge)};
},{"perge":"LRPb","cuid":"QD1d"}]},{},["dm40"], null)
//# sourceMappingURL=/state.js.map